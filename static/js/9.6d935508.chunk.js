/*! For license information please see 9.6d935508.chunk.js.LICENSE.txt */
(this["webpackJsonppikaso-documentation"]=this["webpackJsonppikaso-documentation"]||[]).push([[9,2],Array(73).concat([function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return d}));var r=n(14),i=n(0),a=n(239),o=n(263),s=n(250),h=n(467),l=n(347),c=n(249),u=n(2);function d(){Object(o.a)("Pikaso | Core Components | Label");var t=Object(s.a)({selection:{transformer:{borderStroke:"#262626",anchorFill:"#262626"}}}),e=Object(r.a)(t,2),n=e[0],d=e[1];Object(i.useEffect)((function(){d&&d.shapes.label.insert({container:{x:300,y:100},tag:{fill:"#262626",cornerRadius:0},text:{text:"Pikaso Rocks",fill:"#00ff00",fontSize:60}})}),[d]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(c.a,{children:"# [Label](/api/classes/Label.html)\n        \nLabel is a special kind of [Text](/api/classes/Text.html) and [Shape Model](/api/classes/ShapeModel.html) that includes both [Text](/core/shapes/text) and [Tag](https://konvajs.org/api/Konva.Tag.html). \n\nLabel comes with built-in features such as Inline Editing and Auto Transformation.\n\n\n```js\n// create a new label\nconst myLabel = editor.shapes.label.insert({\n  container: {\n    x: 40,\n    y: 100\n  },\n  tag: {\n    fill: '#262626'\n  },\n  text: {\n    text: 'Pikaso Rocks',\n    fill: '#00ff00',\n    fontSize: 40\n  }\n})\n\n// update label's tag\nmylabel.updateTag({\n  fill: '#fff',\n  cornerRadius: [2, 0, 2, 0] // or simply cornerRadius: 2\n})\n\n// update label's text\nmylabel.updateText({\n  fill: '#ff0000',\n  fontSize: 30,\n  fontFamily: 'Arial'\n})\n\n// all ShapeModel methods and properties are available\nmylabel.addFilter({\n  name: 'Blur',\n  options: {\n    blurRadius: 10\n  }\n})\n```"}),Object(u.jsx)(a.a,{mb:3,children:Object(u.jsx)("div",{ref:n,style:{margin:"0 auto",background:"#CBC3E3",width:"100%",height:"300px"}})}),Object(u.jsxs)(a.a,{children:[Object(u.jsx)(h.a,{title:"Font Color",defaultColor:"#00ff00",onChange:function(t){var e=null===d||void 0===d?void 0:d.board.shapes.find((function(){return!0}));null===e||void 0===e||e.updateText({fill:t})}}),Object(u.jsx)(h.a,{title:"Background Color",defaultColor:"#262626",onChange:function(t){var e=null===d||void 0===d?void 0:d.board.shapes.find((function(){return!0}));null===e||void 0===e||e.updateTag({fill:t})}}),Object(u.jsx)(l.a,{title:"Font Size",defaultValue:60,SliderProps:{min:20,max:80,valueLabelDisplay:"on"},onChange:function(t){var e=null===d||void 0===d?void 0:d.board.shapes.find((function(){return!0}));null===e||void 0===e||e.updateText({fontSize:t})}}),Object(u.jsx)(l.a,{title:"Border Radius",defaultValue:0,SliderProps:{min:0,max:20,valueLabelDisplay:"on"},onChange:function(t){var e=null===d||void 0===d?void 0:d.board.shapes.find((function(){return!0}));null===e||void 0===e||e.updateTag({cornerRadius:t})}})]})]})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReactCSS=e.loop=e.handleActive=e.handleHover=e.hover=void 0;var r=l(n(354)),i=l(n(430)),a=l(n(456)),o=l(n(457)),s=l(n(458)),h=l(n(459));function l(t){return t&&t.__esModule?t:{default:t}}e.hover=o.default,e.handleHover=o.default,e.handleActive=s.default,e.loop=h.default;var c=e.ReactCSS=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var s=(0,r.default)(n),h=(0,i.default)(t,s);return(0,a.default)(h)};e.default=c},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(37),i=n(100),a=n(858),o=n(856),s=n(2),h=["children"];function l(t){var e=t.children,n=Object(i.a)(t,h);return Object(s.jsx)(a.a,Object(r.a)(Object(r.a)({style:o.a,showLineNumbers:!0,wrapLongLines:!0},n),{},{children:e}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(37),i=n(100),a=n(0),o=n(258),s=n(259),h=n(48),l=n(248),c=n(2),u=["node","inline","className","children"];function d(t){var e=t.children,n="string"===typeof e?e:e(),d=Object(a.useMemo)((function(){return function(t){for(var e=[],n=t.split("\n"),r=!1,i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.startsWith("```")||t.startsWith("~~~")},a=0;a<n.length;a++){var o=n[a];i(o)&&(r=!0),e.push(r?o:o.trim()),r&&i(n[a+1])&&(r=!1)}return e.join("\n")}(n)}),[n]);return Object(c.jsx)(o.a,{skipHtml:!0,remarkPlugins:[s.a],children:d,components:{a:function(t){var e=t.href,n=t.children;return(null===e||void 0===e?void 0:e.startsWith("/api/"))||(null===e||void 0===e?void 0:e.startsWith("http"))?Object(c.jsx)("a",{href:e,target:"_blank",children:n}):Object(c.jsx)(h.b,{to:e,children:n})},code:function(t){t.node;var e=t.inline,n=t.className,a=t.children,o=Object(i.a)(t,u),s=/language-(\w+)/.exec(n||"");return!e&&s?Object(c.jsx)(l.a,Object(r.a)({children:String(a).replace(/\n$/,""),language:s[1],PreTag:"div"},o)):Object(c.jsx)("code",Object(r.a)(Object(r.a)({className:n},o),{},{children:a}))}}})}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(37),i=n(14),a=n(0),o=n(252);function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=Object(a.useState)(null),s=Object(i.a)(n,2),h=s[0],l=s[1],c=Object(a.useRef)(null);return Object(a.useEffect)((function(){var n=new o.b(Object(r.a)({container:c.current},t),e);l(n)}),[]),Object(a.useEffect)((function(){h&&window.addEventListener("resize",(function(){h.board.rescale()}))}),[h]),[c,h]}},,function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return _n})),n.d(e,"b",(function(){return Ir})),n.d(e,"c",(function(){return wr})),n.d(e,"d",(function(){return qn})),n.d(e,"e",(function(){return In})),n.d(e,"f",(function(){return Rr})),n.d(e,"g",(function(){return $n}));var r,i,a,o=n(24),s=n(14),h=n(10),l=n(254),c=n(253),u=n(251),d=n(268),f=n(266),p=n(267),g=n(273),v=n(101),b=n(102),y=Math.PI/180;var m="undefined"!==typeof t?t:"undefined"!==typeof window?window:"undefined"!==typeof WorkerGlobalScope?self:{},x={_global:m,version:"8.1.4",isBrowser:"undefined"!==typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle:function(t){return x.angleDeg?t*y:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,pixelRatio:"undefined"!==typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return x.DD.isDragging},isDragReady:function(){return!!x.DD.node},document:m.document,_injectGlobal:function(t){m.Konva=t}},w=function(t){x[t.prototype.getClassName()]=t};x._injectGlobal(x);var _=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,0,0,1,0,0];Object(v.a)(this,t),this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}return Object(b.a)(t,[{key:"reset",value:function(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}},{key:"copy",value:function(){return new t(this.m)}},{key:"copyInto",value:function(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}},{key:"point",value:function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}},{key:"translate",value:function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}},{key:"scale",value:function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}},{key:"rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.m[0]*e+this.m[2]*n,i=this.m[1]*e+this.m[3]*n,a=this.m[0]*-n+this.m[2]*e,o=this.m[1]*-n+this.m[3]*e;return this.m[0]=r,this.m[1]=i,this.m[2]=a,this.m[3]=o,this}},{key:"getTranslation",value:function(){return{x:this.m[4],y:this.m[5]}}},{key:"skew",value:function(t,e){var n=this.m[0]+this.m[2]*e,r=this.m[1]+this.m[3]*e,i=this.m[2]+this.m[0]*t,a=this.m[3]+this.m[1]*t;return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=a,this}},{key:"multiply",value:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],r=this.m[0]*t.m[2]+this.m[2]*t.m[3],i=this.m[1]*t.m[2]+this.m[3]*t.m[3],a=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=a,this.m[5]=o,this}},{key:"invert",value:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,r=-this.m[2]*t,i=this.m[0]*t,a=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=a,this.m[5]=o,this}},{key:"getMatrix",value:function(){return this.m}},{key:"setAbsolutePosition",value:function(t,e){var n=this.m[0],r=this.m[1],i=this.m[2],a=this.m[3],o=this.m[4],s=(n*(e-this.m[5])-r*(t-o))/(n*a-r*i),h=(t-o-i*s)/n;return this.translate(h,s)}},{key:"decompose",value:function(){var t=this.m[0],e=this.m[1],n=this.m[2],r=this.m[3],i=t*r-e*n,a={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=e){var o=Math.sqrt(t*t+e*e);a.rotation=e>0?Math.acos(t/o):-Math.acos(t/o),a.scaleX=o,a.scaleY=i/o,a.skewX=(t*n+e*r)/i,a.skewY=0}else if(0!=n||0!=r){var s=Math.sqrt(n*n+r*r);a.rotation=Math.PI/2-(r>0?Math.acos(-n/s):-Math.acos(n/s)),a.scaleX=i/s,a.scaleY=s,a.skewX=0,a.skewY=(t*n+e*r)/i}return a.rotation=A._getRotation(a.rotation),a}}]),t}(),k=Math.PI/180,S=180/Math.PI,C="Konva error: ",O={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},j=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,E=[],P="undefined"!==typeof requestAnimationFrame&&requestAnimationFrame||function(t){setTimeout(t,60)},A={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject:function(t){return!!t&&t.constructor===Object},_isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t)},_isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},_isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isObject:function(t){return t instanceof Object},isValidSelector:function(t){if("string"!==typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:function(t){return 0===t||t>0?1:-1},requestAnimFrame:function(t){E.push(t),1===E.length&&P((function(){var t=E;E=[],t.forEach((function(t){t()}))}))},createCanvasElement:function(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(e){}return t},createImageElement:function(){return document.createElement("img")},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage:function(t,e){var n=A.createImageElement();n.onload=function(){e(n)},n.src=t},_rgbToHex:function(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},getRGB:function(t){var e;return t in O?{r:(e=O[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=j.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(t){return t=t||"black",A._namedColorToRBA(t)||A._hex3ColorToRGBA(t)||A._hex6ColorToRGBA(t)||A._rgbColorToRGBA(t)||A._rgbaColorToRGBA(t)||A._hslColorToRGBA(t)},_namedColorToRBA:function(t){var e=O[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA:function(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA:function(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA:function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA:function(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){var e,n,r,i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),a=Object(g.a)(i),o=(a[0],a.slice(1)),s=Number(o[0])/360,h=Number(o[1])/100,l=Number(o[2])/100;if(0===h)return r=255*l,{r:Math.round(r),g:Math.round(r),b:Math.round(r),a:1};for(var c=2*l-(e=l<.5?l*(1+h):l+h-l*h),u=[0,0,0],d=0;d<3;d++)(n=s+1/3*-(d-1))<0&&n++,n>1&&n--,r=6*n<1?c+6*(e-c)*n:2*n<1?e:3*n<2?c+(e-c)*(2/3-n)*6:c,u[d]=255*r;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection:function(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject:function(t){var e={};for(var n in t)this._isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray:function(t){return t.slice(0)},degToRad:function(t){return t*k},radToDeg:function(t){return t*S},_degToRad:function(t){return A.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),A.degToRad(t)},_radToDeg:function(t){return A.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),A.radToDeg(t)},_getRotation:function(t){return x.angleDeg?A.radToDeg(t):t},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw:function(t){throw new Error(C+t)},error:function(t){console.error(C+t)},warn:function(t){x.showWarnings&&console.warn("Konva warning: "+t)},each:function(t,e){for(var n in t)e(n,t[n])},_inRange:function(t,e,n){return e<=t&&t<n},_getProjectionToSegment:function(t,e,n,r,i,a){var o,s,h,l=(t-n)*(t-n)+(e-r)*(e-r);if(0==l)o=t,s=e,h=(i-n)*(i-n)+(a-r)*(a-r);else{var c=((i-t)*(n-t)+(a-e)*(r-e))/l;c<0?(o=t,s=e,h=(t-i)*(t-i)+(e-a)*(e-a)):c>1?(o=n,s=r,h=(n-i)*(n-i)+(r-a)*(r-a)):h=((o=t+c*(n-t))-i)*(o-i)+((s=e+c*(r-e))-a)*(s-a)}return[o,s,h]},_getProjectionToLine:function(t,e,n){var r=A.cloneObject(t),i=Number.MAX_VALUE;return e.forEach((function(a,o){if(n||o!==e.length-1){var s=e[(o+1)%e.length],h=A._getProjectionToSegment(a.x,a.y,s.x,s.y,t.x,t.y),l=h[0],c=h[1],u=h[2];u<i&&(r.x=l,r.y=c,i=u)}})),r},_prepareArrayForTween:function(t,e,n){var r,i=[],a=[];if(t.length>e.length){var o=e;e=t,t=o}for(r=0;r<t.length;r+=2)i.push({x:t[r],y:t[r+1]});for(r=0;r<e.length;r+=2)a.push({x:e[r],y:e[r+1]});var s=[];return a.forEach((function(t){var e=A._getProjectionToLine(t,i,n);s.push(e.x),s.push(e.y)})),s},_prepareToStringify:function(t){var e;for(var n in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(n)&&t[n]&&"object"==typeof t[n])if(e=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||A._isElement(t[n])){if(!e.configurable)return null;delete t[n]}else if(null===A._prepareToStringify(t[n])){if(!e.configurable)return null;delete t[n]}return delete t.visitedByCircularReferenceRemoval,t},_assign:function(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId:function(t){return t.touches?t.changedTouches[0].identifier:999}};function T(t){return A._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||A._isBoolean(t)?t:Object.prototype.toString.call(t)}function R(t){return t>255?255:t<0?0:Math.round(t)}function M(){if(x.isUnminified)return function(t,e){return A._isNumber(t)||A.warn(T(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function D(t){if(x.isUnminified)return function(e,n){var r=A._isNumber(e),i=A._isArray(e)&&e.length==t;return r||i||A.warn(T(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function L(){if(x.isUnminified)return function(t,e){return A._isNumber(t)||"auto"===t||A.warn(T(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function F(){if(x.isUnminified)return function(t,e){return A._isString(t)||A.warn(T(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function G(){if(x.isUnminified)return function(t,e){var n=A._isString(t),r="[object CanvasGradient]"===Object.prototype.toString.call(t)||t&&t.addColorStop;return n||r||A.warn(T(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function B(){if(x.isUnminified)return function(t,e){return!0===t||!1===t||A.warn(T(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}var z="get",N="set",I={addGetterSetter:function(t,e,n,r,i){I.addGetter(t,e,n),I.addSetter(t,e,r,i),I.addOverloadedGetterSetter(t,e)},addGetter:function(t,e,n){var r=z+A._capitalize(e);t.prototype[r]=t.prototype[r]||function(){var t=this.attrs[e];return void 0===t?n:t}},addSetter:function(t,e,n,r){var i=N+A._capitalize(e);t.prototype[i]||I.overWriteSetter(t,e,n,r)},overWriteSetter:function(t,e,n,r){var i=N+A._capitalize(e);t.prototype[i]=function(t){return n&&void 0!==t&&null!==t&&(t=n.call(this,t,e)),this._setAttr(e,t),r&&r.call(this),this}},addComponentsGetterSetter:function(t,e,n,r,i){var a,o,s=n.length,h=A._capitalize,l=z+h(e),c=N+h(e);t.prototype[l]=function(){var t={};for(a=0;a<s;a++)t[o=n[a]]=this.getAttr(e+h(o));return t};var u=function(t){if(x.isUnminified)return function(e,n){return A.isObject(e)||A.warn(T(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}(n);t.prototype[c]=function(t){var n,a=this.attrs[e];for(n in r&&(t=r.call(this,t)),u&&u.call(this,t,e),t)t.hasOwnProperty(n)&&this._setAttr(e+h(n),t[n]);return this._fireChangeEvent(e,a,t),i&&i.call(this),this},I.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter:function(t,e){var n=A._capitalize(e),r=N+n,i=z+n;t.prototype[e]=function(){return arguments.length?(this[r](arguments[0]),this):this[i]()}},addDeprecatedGetterSetter:function(t,e,n,r){A.error("Adding deprecated "+e);var i=z+A._capitalize(e),a=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[i]=function(){A.error(a);var t=this.attrs[e];return void 0===t?n:t},I.addSetter(t,e,r,(function(){A.error(a)})),I.addOverloadedGetterSetter(t,e)},backCompat:function(t,e){A.each(e,(function(e,n){var r=t.prototype[n],i=z+A._capitalize(e),a=N+A._capitalize(e);function o(){r.apply(this,arguments),A.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}t.prototype[e]=o,t.prototype[i]=o,t.prototype[a]=o}))},afterSetFilter:function(){this._filterUpToDate=!1}};function H(t){var e,n,r=[],i=t.length,a=A;for(e=0;e<i;e++)n=t[e],a._isNumber(n)?n=Math.round(1e3*n)/1e3:a._isString(n)||(n+=""),r.push(n);return r}var W=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],X=function(){function t(e){Object(v.a)(this,t),this.canvas=e,this._context=e._canvas.getContext("2d"),x.enableTrace&&(this.traceArr=[],this._enableTrace())}return Object(b.a)(t,[{key:"fillShape",value:function(t){t.fillEnabled()&&this._fill(t)}},{key:"_fill",value:function(t){}},{key:"strokeShape",value:function(t){t.hasStroke()&&this._stroke(t)}},{key:"_stroke",value:function(t){}},{key:"fillStrokeShape",value:function(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}},{key:"getTrace",value:function(t,e){var n,r,i,a,o=this.traceArr,s=o.length,h="";for(n=0;n<s;n++)(i=(r=o[n]).method)?(a=r.args,h+=i,t?h+="()":A._isArray(a[0])?h+="(["+a.join(",")+"])":(e&&(a=a.map((function(t){return"number"===typeof t?Math.floor(t):t}))),h+="("+a.join(",")+")")):(h+=r.property,t||(h+="="+r.val)),h+=";";return h}},{key:"clearTrace",value:function(){this.traceArr=[]}},{key:"_trace",value:function(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()}},{key:"reset",value:function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}},{key:"getCanvas",value:function(){return this.canvas}},{key:"clear",value:function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}},{key:"_applyLineCap",value:function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)}},{key:"_applyOpacity",value:function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)}},{key:"_applyLineJoin",value:function(t){var e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}},{key:"setAttr",value:function(t,e){this._context[t]=e}},{key:"arc",value:function(t,e,n,r,i,a){this._context.arc(t,e,n,r,i,a)}},{key:"arcTo",value:function(t,e,n,r,i){this._context.arcTo(t,e,n,r,i)}},{key:"beginPath",value:function(){this._context.beginPath()}},{key:"bezierCurveTo",value:function(t,e,n,r,i,a){this._context.bezierCurveTo(t,e,n,r,i,a)}},{key:"clearRect",value:function(t,e,n,r){this._context.clearRect(t,e,n,r)}},{key:"clip",value:function(){this._context.clip()}},{key:"closePath",value:function(){this._context.closePath()}},{key:"createImageData",value:function(t,e){var n=arguments;return 2===n.length?this._context.createImageData(t,e):1===n.length?this._context.createImageData(t):void 0}},{key:"createLinearGradient",value:function(t,e,n,r){return this._context.createLinearGradient(t,e,n,r)}},{key:"createPattern",value:function(t,e){return this._context.createPattern(t,e)}},{key:"createRadialGradient",value:function(t,e,n,r,i,a){return this._context.createRadialGradient(t,e,n,r,i,a)}},{key:"drawImage",value:function(t,e,n,r,i,a,o,s,h){var l=arguments,c=this._context;3===l.length?c.drawImage(t,e,n):5===l.length?c.drawImage(t,e,n,r,i):9===l.length&&c.drawImage(t,e,n,r,i,a,o,s,h)}},{key:"ellipse",value:function(t,e,n,r,i,a,o,s){this._context.ellipse(t,e,n,r,i,a,o,s)}},{key:"isPointInPath",value:function(t,e){return this._context.isPointInPath(t,e)}},{key:"fill",value:function(t){t?this._context.fill(t):this._context.fill()}},{key:"fillRect",value:function(t,e,n,r){this._context.fillRect(t,e,n,r)}},{key:"strokeRect",value:function(t,e,n,r){this._context.strokeRect(t,e,n,r)}},{key:"fillText",value:function(t,e,n,r){r?this._context.fillText(t,e,n,r):this._context.fillText(t,e,n)}},{key:"measureText",value:function(t){return this._context.measureText(t)}},{key:"getImageData",value:function(t,e,n,r){return this._context.getImageData(t,e,n,r)}},{key:"lineTo",value:function(t,e){this._context.lineTo(t,e)}},{key:"moveTo",value:function(t,e){this._context.moveTo(t,e)}},{key:"rect",value:function(t,e,n,r){this._context.rect(t,e,n,r)}},{key:"putImageData",value:function(t,e,n){this._context.putImageData(t,e,n)}},{key:"quadraticCurveTo",value:function(t,e,n,r){this._context.quadraticCurveTo(t,e,n,r)}},{key:"restore",value:function(){this._context.restore()}},{key:"rotate",value:function(t){this._context.rotate(t)}},{key:"save",value:function(){this._context.save()}},{key:"scale",value:function(t,e){this._context.scale(t,e)}},{key:"setLineDash",value:function(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}},{key:"getLineDash",value:function(){return this._context.getLineDash()}},{key:"setTransform",value:function(t,e,n,r,i,a){this._context.setTransform(t,e,n,r,i,a)}},{key:"stroke",value:function(t){t?this._context.stroke(t):this._context.stroke()}},{key:"strokeText",value:function(t,e,n,r){this._context.strokeText(t,e,n,r)}},{key:"transform",value:function(t,e,n,r,i,a){this._context.transform(t,e,n,r,i,a)}},{key:"translate",value:function(t,e){this._context.translate(t,e)}},{key:"_enableTrace",value:function(){var t,e,n=this,r=W.length,i=this.setAttr,a=function(t){var r,i=n[t];n[t]=function(){return e=H(Array.prototype.slice.call(arguments,0)),r=i.apply(n,arguments),n._trace({method:t,args:e}),r}};for(t=0;t<r;t++)a(W[t]);n.setAttr=function(){i.apply(n,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),n._trace({property:t,val:e})}}},{key:"_applyGlobalCompositeOperation",value:function(t){var e=t.attrs.globalCompositeOperation;!e||"source-over"===e||this.setAttr("globalCompositeOperation",e)}}]),t}();["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(t){Object.defineProperty(X.prototype,t,{get:function(){return this._context[t]},set:function(e){this._context[t]=e}})}));var U,Y=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"_fillColor",value:function(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}},{key:"_fillPattern",value:function(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}},{key:"_fillLinearGradient",value:function(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}},{key:"_fillRadialGradient",value:function(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}},{key:"_fill",value:function(t){var e=t.fill(),n=t.getFillPriority();if(e&&"color"===n)this._fillColor(t);else{var r=t.getFillPatternImage();if(r&&"pattern"===n)this._fillPattern(t);else{var i=t.getFillLinearGradientColorStops();if(i&&"linear-gradient"===n)this._fillLinearGradient(t);else{var a=t.getFillRadialGradientColorStops();a&&"radial-gradient"===n?this._fillRadialGradient(t):e?this._fillColor(t):r?this._fillPattern(t):i?this._fillLinearGradient(t):a&&this._fillRadialGradient(t)}}}}},{key:"_strokeLinearGradient",value:function(t){var e=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),r=t.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(e.x,e.y,n.x,n.y);if(r){for(var a=0;a<r.length;a+=2)i.addColorStop(r[a],r[a+1]);this.setAttr("strokeStyle",i)}}},{key:"_stroke",value:function(t){var e=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}}},{key:"_applyShadow",value:function(t){var e,n,r,i=null!==(e=t.getShadowRGBA())&&void 0!==e?e:"black",a=null!==(n=t.getShadowBlur())&&void 0!==n?n:5,o=null!==(r=t.getShadowOffset())&&void 0!==r?r:{x:0,y:0},s=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),l=s.x*h,c=s.y*h;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",a*Math.min(Math.abs(l),Math.abs(c))),this.setAttr("shadowOffsetX",o.x*l),this.setAttr("shadowOffsetY",o.y*c)}}]),n}(X),q=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"_fill",value:function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}},{key:"strokeShape",value:function(t){t.hasHitStroke()&&this._stroke(t)}},{key:"_stroke",value:function(t){if(t.hasHitStroke()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t);var r=t.hitStrokeWidth(),i="auto"===r?t.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}]),n}(X);var V=function(){function t(e){Object(v.a)(this,t),this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=(e||{}).pixelRatio||x.pixelRatio||function(){if(U)return U;var t=A.createCanvasElement().getContext("2d");return U=(x._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}();this.pixelRatio=n,this._canvas=A.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return Object(b.a)(t,[{key:"getContext",value:function(){return this.context}},{key:"getPixelRatio",value:function(){return this.pixelRatio}},{key:"setPixelRatio",value:function(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}},{key:"setWidth",value:function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}},{key:"setHeight",value:function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"setSize",value:function(t,e){this.setWidth(t||0),this.setHeight(e||0)}},{key:"toDataURL",value:function(t,e){try{return this._canvas.toDataURL(t,e)}catch(n){try{return this._canvas.toDataURL()}catch(r){return A.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}]),t}();I.addGetterSetter(V,"pixelRatio",void 0,M());var K=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:0,height:0};return Object(v.a)(this,n),(t=e.call(this,r)).context=new Y(Object(d.a)(t)),t.setSize(r.width,r.height),t}return n}(V),$=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:0,height:0};return Object(v.a)(this,n),(t=e.call(this,r)).hitCanvas=!0,t.context=new q(Object(d.a)(t)),t.setSize(r.width,r.height),t}return n}(V),Z={get isDragging(){var t=!1;return Z._dragElements.forEach((function(e){"dragging"===e.dragStatus&&(t=!0)})),t},justDragged:!1,get node(){var t;return Z._dragElements.forEach((function(e){t=e.node})),t},_dragElements:new Map,_drag:function(t){var e=[];Z._dragElements.forEach((function(n,r){var i=n.node,a=i.getStage();a.setPointersPositions(t),void 0===n.pointerId&&(n.pointerId=A._getFirstPointerId(t));var o=a._changedPointerPositions.find((function(t){return t.id===n.pointerId}));if(o){if("dragging"!==n.dragStatus){var s=i.dragDistance();if(Math.max(Math.abs(o.x-n.startPointerPos.x),Math.abs(o.y-n.startPointerPos.y))<s)return;if(i.startDrag({evt:t}),!i.isDragging())return}i._setDragPosition(t,n),e.push(i)}})),e.forEach((function(e){e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)}))},_endDragBefore:function(t){Z._dragElements.forEach((function(e){var n=e.node.getStage();if(t&&n.setPointersPositions(t),n._changedPointerPositions.find((function(t){return t.id===e.pointerId}))){"dragging"!==e.dragStatus&&"stopped"!==e.dragStatus||(Z.justDragged=!0,x._mouseListenClick=!1,x._touchListenClick=!1,x._pointerListenClick=!1,e.dragStatus="stopped");var r=e.node.getLayer()||e.node instanceof x.Stage&&e.node;r&&r.batchDraw()}}))},_endDragAfter:function(t){Z._dragElements.forEach((function(e,n){"stopped"===e.dragStatus&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),"dragging"!==e.dragStatus&&Z._dragElements.delete(n)}))}};x.isBrowser&&(window.addEventListener("mouseup",Z._endDragBefore,!0),window.addEventListener("touchend",Z._endDragBefore,!0),window.addEventListener("mousemove",Z._drag),window.addEventListener("touchmove",Z._drag),window.addEventListener("mouseup",Z._endDragAfter,!1),window.addEventListener("touchend",Z._endDragAfter,!1));var Q="absoluteOpacity",J="allEventListeners",tt="absoluteTransform",et="absoluteScale",nt="canvas",rt="listening",it="mouseenter",at="mouseleave",ot="Shape",st=" ",ht="stage",lt="transform",ct="visible",ut=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(st),dt=1,ft=function(){function t(e){Object(v.a)(this,t),this._id=dt++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}return Object(b.a)(t,[{key:"hasChildren",value:function(){return!1}},{key:"_clearCache",value:function(t){t!==lt&&t!==tt||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0}},{key:"_getCache",value:function(t,e){var n=this._cache.get(t);return(void 0===n||(t===lt||t===tt)&&!0===n.dirty)&&(n=e.call(this),this._cache.set(t,n)),n}},{key:"_calculate",value:function(t,e,n){var r=this;if(!this._attachedDepsListeners.get(t)){var i=e.map((function(t){return t+"Change.konva"})).join(st);this.on(i,(function(){r._clearCache(t)})),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)}},{key:"_getCanvasCache",value:function(){return this._cache.get(nt)}},{key:"_clearSelfAndDescendantCache",value:function(t){this._clearCache(t),t===tt&&this.fire("absoluteTransformChange")}},{key:"clearCache",value:function(){return this._cache.delete(nt),this._clearSelfAndDescendantCache(),this._requestDraw(),this}},{key:"cache",value:function(t){var e=t||{},n={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var r=Math.ceil(e.width||n.width),i=Math.ceil(e.height||n.height),a=e.pixelRatio,o=void 0===e.x?n.x:e.x,s=void 0===e.y?n.y:e.y,h=e.offset||0,l=e.drawBorder||!1,c=e.hitCanvasPixelRatio||1;if(r&&i){o-=h,s-=h;var u=new K({pixelRatio:a,width:r+=2*h,height:i+=2*h}),d=new K({pixelRatio:a,width:0,height:0}),f=new $({pixelRatio:c,width:r,height:i}),p=u.getContext(),g=f.getContext();return f.isCache=!0,u.isCache=!0,this._cache.delete(nt),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(u.getContext()._context.imageSmoothingEnabled=!1,d.getContext()._context.imageSmoothingEnabled=!1),p.save(),g.save(),p.translate(-o,-s),g.translate(-o,-s),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Q),this._clearSelfAndDescendantCache(et),this.drawScene(u,this),this.drawHit(f,this),this._isUnderCache=!1,p.restore(),g.restore(),l&&(p.save(),p.beginPath(),p.rect(0,0,r,i),p.closePath(),p.setAttr("strokeStyle","red"),p.setAttr("lineWidth",5),p.stroke(),p.restore()),this._cache.set(nt,{scene:u,filter:d,hit:f,x:o,y:s}),this._requestDraw(),this}A.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}},{key:"isCached",value:function(){return this._cache.has(nt)}},{key:"getClientRect",value:function(t){throw new Error('abstract "getClientRect" method call')}},{key:"_transformedRect",value:function(t,e){var n,r,i,a,o=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=this.getAbsoluteTransform(e);return o.forEach((function(t){var e=s.point(t);void 0===n&&(n=i=e.x,r=a=e.y),n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),a=Math.max(a,e.y)})),{x:n,y:r,width:i-n,height:a-r}}},{key:"_drawCachedSceneCanvas",value:function(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);var e=this._getCanvasCache();t.translate(e.x,e.y);var n=this._getCachedSceneCanvas(),r=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/r,n.height/r),t.restore()}},{key:"_drawCachedHitCanvas",value:function(t){var e=this._getCanvasCache(),n=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),t.restore()}},{key:"_getCachedSceneCanvas",value:function(){var t,e,n,r,i=this.filters(),a=this._getCanvasCache(),o=a.scene,s=a.filter,h=s.getContext();if(i){if(!this._filterUpToDate){var l=o.pixelRatio;s.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio);try{for(t=i.length,h.clear(),h.drawImage(o._canvas,0,0,o.getWidth()/l,o.getHeight()/l),e=h.getImageData(0,0,s.getWidth(),s.getHeight()),n=0;n<t;n++)"function"===typeof(r=i[n])?(r.call(this,e),h.putImageData(e,0,0)):A.error("Filter should be type of function, but got "+typeof r+" instead. Please check correct filters")}catch(c){A.error("Unable to apply filter. "+c.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return o}},{key:"on",value:function(t,e){if(this._cache&&this._cache.delete(J),3===arguments.length)return this._delegate.apply(this,arguments);var n,r,i,a,o=t.split(st),s=o.length;for(n=0;n<s;n++)i=(r=o[n].split("."))[0],a=r[1]||"",this.eventListeners[i]||(this.eventListeners[i]=[]),this.eventListeners[i].push({name:a,handler:e});return this}},{key:"off",value:function(t,e){var n,r,i,a,o,s=(t||"").split(st),h=s.length;if(this._cache&&this._cache.delete(J),!t)for(r in this.eventListeners)this._off(r);for(n=0;n<h;n++)if(a=(i=s[n].split("."))[0],o=i[1],a)this.eventListeners[a]&&this._off(a,o,e);else for(r in this.eventListeners)this._off(r,o,e);return this}},{key:"dispatchEvent",value:function(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}},{key:"addEventListener",value:function(t,e){return this.on(t,(function(t){e.call(this,t.evt)})),this}},{key:"removeEventListener",value:function(t){return this.off(t),this}},{key:"_delegate",value:function(t,e,n){var r=this;this.on(t,(function(t){for(var i=t.target.findAncestors(e,!0,r),a=0;a<i.length;a++)(t=A.cloneObject(t)).currentTarget=i[a],n.call(i[a],t)}))}},{key:"remove",value:function(){return this.isDragging()&&this.stopDrag(),Z._dragElements.delete(this._id),this._remove(),this}},{key:"_clearCaches",value:function(){this._clearSelfAndDescendantCache(tt),this._clearSelfAndDescendantCache(Q),this._clearSelfAndDescendantCache(et),this._clearSelfAndDescendantCache(ht),this._clearSelfAndDescendantCache(ct),this._clearSelfAndDescendantCache(rt)}},{key:"_remove",value:function(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}},{key:"destroy",value:function(){return this.remove(),this}},{key:"getAttr",value:function(t){var e="get"+A._capitalize(t);return A._isFunction(this[e])?this[e]():this.attrs[t]}},{key:"getAncestors",value:function(){for(var t=this.getParent(),e=[];t;)e.push(t),t=t.getParent();return e}},{key:"getAttrs",value:function(){return this.attrs||{}}},{key:"setAttrs",value:function(t){var e=this;return this._batchTransformChanges((function(){var n,r;if(!t)return e;for(n in t)"children"!==n&&(r="set"+A._capitalize(n),A._isFunction(e[r])?e[r](t[n]):e._setAttr(n,t[n]))})),this}},{key:"isListening",value:function(){return this._getCache(rt,this._isListening)}},{key:"_isListening",value:function(t){if(!this.listening())return!1;var e=this.getParent();return!e||e===t||this===t||e._isListening(t)}},{key:"isVisible",value:function(){return this._getCache(ct,this._isVisible)}},{key:"_isVisible",value:function(t){if(!this.visible())return!1;var e=this.getParent();return!e||e===t||this===t||e._isVisible(t)}},{key:"shouldDrawHit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return this._isVisible(t)&&this._isListening(t);var n=this.getLayer(),r=!1;Z._dragElements.forEach((function(t){"dragging"===t.dragStatus&&("Stage"===t.node.nodeType||t.node.getLayer()===n)&&(r=!0)}));var i=!e&&!x.hitOnDragEnabled&&r;return this.isListening()&&this.isVisible()&&!i}},{key:"show",value:function(){return this.visible(!0),this}},{key:"hide",value:function(){return this.visible(!1),this}},{key:"getZIndex",value:function(){return this.index||0}},{key:"getAbsoluteZIndex",value:function(){var t,e,n,r,i=this.getDepth(),a=this,o=0;return"Stage"!==a.nodeType&&function s(h){for(t=[],e=h.length,n=0;n<e;n++)r=h[n],o++,r.nodeType!==ot&&(t=t.concat(r.getChildren().slice())),r._id===a._id&&(n=e);t.length>0&&t[0].getDepth()<=i&&s(t)}(a.getStage().getChildren()),o}},{key:"getDepth",value:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}},{key:"_batchTransformChanges",value:function(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(lt),this._clearSelfAndDescendantCache(tt)),this._needClearTransformCache=!1}},{key:"setPosition",value:function(t){var e=this;return this._batchTransformChanges((function(){e.x(t.x),e.y(t.y)})),this}},{key:"getPosition",value:function(){return{x:this.x(),y:this.y()}}},{key:"getRelativePointerPosition",value:function(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var e=this.getAbsoluteTransform().copy();return e.invert(),e.point(t)}},{key:"getAbsolutePosition",value:function(t){for(var e=!1,n=this.parent;n;){if(n.isCached()){e=!0;break}n=n.parent}e&&!t&&(t=!0);var r=this.getAbsoluteTransform(t).getMatrix(),i=new _,a=this.offset();return i.m=r.slice(),i.translate(a.x,a.y),i.getTranslation()}},{key:"setAbsolutePosition",value:function(t){var e=this._clearTransform();this.attrs.x=e.x,this.attrs.y=e.y,delete e.x,delete e.y,this._clearCache(lt);var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(t.x,t.y),t={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(e),this.setPosition({x:t.x,y:t.y}),this._clearCache(lt),this._clearSelfAndDescendantCache(tt),this}},{key:"_setTransform",value:function(t){var e;for(e in t)this.attrs[e]=t[e]}},{key:"_clearTransform",value:function(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}},{key:"move",value:function(t){var e=t.x,n=t.y,r=this.x(),i=this.y();return void 0!==e&&(r+=e),void 0!==n&&(i+=n),this.setPosition({x:r,y:i}),this}},{key:"_eachAncestorReverse",value:function(t,e){var n,r,i=[],a=this.getParent();if(!e||e._id!==this._id){for(i.unshift(this);a&&(!e||a._id!==e._id);)i.unshift(a),a=a.parent;for(n=i.length,r=0;r<n;r++)t(i[r])}}},{key:"rotate",value:function(t){return this.rotation(this.rotation()+t),this}},{key:"moveToTop",value:function(){if(!this.parent)return A.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0}},{key:"moveUp",value:function(){if(!this.parent)return A.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)}},{key:"moveDown",value:function(){if(!this.parent)return A.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)}},{key:"moveToBottom",value:function(){if(!this.parent)return A.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}},{key:"setZIndex",value:function(t){if(!this.parent)return A.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&A.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}},{key:"getAbsoluteOpacity",value:function(){return this._getCache(Q,this._getAbsoluteOpacity)}},{key:"_getAbsoluteOpacity",value:function(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}},{key:"moveTo",value:function(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}},{key:"toObject",value:function(){var t,e,n,r,i={},a=this.getAttrs();for(t in i.attrs={},a)e=a[t],A.isObject(e)&&!A._isPlainObject(e)&&!A._isArray(e)||(n="function"===typeof this[t]&&this[t],delete a[t],r=n?n.call(this):null,a[t]=e,r!==e&&(i.attrs[t]=e));return i.className=this.getClassName(),A._prepareToStringify(i)}},{key:"toJSON",value:function(){return JSON.stringify(this.toObject())}},{key:"getParent",value:function(){return this.parent}},{key:"findAncestors",value:function(t,e,n){var r=[];e&&this._isMatch(t)&&r.push(this);for(var i=this.parent;i;){if(i===n)return r;i._isMatch(t)&&r.push(i),i=i.parent}return r}},{key:"isAncestorOf",value:function(t){return!1}},{key:"findAncestor",value:function(t,e,n){return this.findAncestors(t,e,n)[0]}},{key:"_isMatch",value:function(t){if(!t)return!1;if("function"===typeof t)return t(this);var e,n,r=t.replace(/ /g,"").split(","),i=r.length;for(e=0;e<i;e++)if(n=r[e],A.isValidSelector(n)||(A.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),A.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),A.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}},{key:"getLayer",value:function(){var t=this.getParent();return t?t.getLayer():null}},{key:"getStage",value:function(){return this._getCache(ht,this._getStage)}},{key:"_getStage",value:function(){var t=this.getParent();return t?t.getStage():void 0}},{key:"fire",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return e.target=e.target||this,n?this._fireAndBubble(t,e):this._fire(t,e),this}},{key:"getAbsoluteTransform",value:function(t){return t?this._getAbsoluteTransform(t):this._getCache(tt,this._getAbsoluteTransform)}},{key:"_getAbsoluteTransform",value:function(t){var e;if(t)return e=new _,this._eachAncestorReverse((function(t){var n=t.transformsEnabled();"all"===n?e.multiply(t.getTransform()):"position"===n&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())}),t),e;e=this._cache.get(tt)||new _,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();var n=this.transformsEnabled();if("all"===n)e.multiply(this.getTransform());else if("position"===n){var r=this.attrs.x||0,i=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;e.translate(r-a,i-o)}return e.dirty=!1,e}},{key:"getAbsoluteScale",value:function(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();var n=this.getAbsoluteTransform(t).decompose();return{x:n.scaleX,y:n.scaleY}}},{key:"getAbsoluteRotation",value:function(){return this.getAbsoluteTransform().decompose().rotation}},{key:"getTransform",value:function(){return this._getCache(lt,this._getTransform)}},{key:"_getTransform",value:function(){var t,e,n=this._cache.get(lt)||new _;n.reset();var r=this.x(),i=this.y(),a=x.getAngle(this.rotation()),o=null!==(t=this.attrs.scaleX)&&void 0!==t?t:1,s=null!==(e=this.attrs.scaleY)&&void 0!==e?e:1,h=this.attrs.skewX||0,l=this.attrs.skewY||0,c=this.attrs.offsetX||0,u=this.attrs.offsetY||0;return 0===r&&0===i||n.translate(r,i),0!==a&&n.rotate(a),0===h&&0===l||n.skew(h,l),1===o&&1===s||n.scale(o,s),0===c&&0===u||n.translate(-1*c,-1*u),n.dirty=!1,n}},{key:"clone",value:function(t){var e,n,r,i,a,o=A.cloneObject(this.attrs);for(e in t)o[e]=t[e];var s=new this.constructor(o);for(e in this.eventListeners)for(r=(n=this.eventListeners[e]).length,i=0;i<r;i++)(a=n[i]).name.indexOf("konva")<0&&(s.eventListeners[e]||(s.eventListeners[e]=[]),s.eventListeners[e].push(a));return s}},{key:"_toKonvaCanvas",value:function(t){t=t||{};var e=this.getClientRect(),n=this.getStage(),r=void 0!==t.x?t.x:e.x,i=void 0!==t.y?t.y:e.y,a=t.pixelRatio||1,o=new K({width:t.width||e.width||(n?n.width():0),height:t.height||e.height||(n?n.height():0),pixelRatio:a}),s=o.getContext();return s.save(),(r||i)&&s.translate(-1*r,-1*i),this.drawScene(o),s.restore(),o}},{key:"toCanvas",value:function(t){return this._toKonvaCanvas(t)._canvas}},{key:"toDataURL",value:function(t){var e=(t=t||{}).mimeType||null,n=t.quality||null,r=this._toKonvaCanvas(t).toDataURL(e,n);return t.callback&&t.callback(r),r}},{key:"toImage",value:function(t){if(!t||!t.callback)throw"callback required for toImage method config argument";var e=t.callback;delete t.callback,A._urlToImage(this.toDataURL(t),(function(t){e(t)}))}},{key:"setSize",value:function(t){return this.width(t.width),this.height(t.height),this}},{key:"getSize",value:function(){return{width:this.width(),height:this.height()}}},{key:"getClassName",value:function(){return this.className||this.nodeType}},{key:"getType",value:function(){return this.nodeType}},{key:"getDragDistance",value:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():x.dragDistance}},{key:"_off",value:function(t,e,n){var r,i,a,o=this.eventListeners[t];for(r=0;r<o.length;r++)if(i=o[r].name,a=o[r].handler,("konva"!==i||"konva"===e)&&(!e||i===e)&&(!n||n===a)){if(o.splice(r,1),0===o.length){delete this.eventListeners[t];break}r--}}},{key:"_fireChangeEvent",value:function(t,e,n){this._fire(t+"Change",{oldVal:e,newVal:n})}},{key:"addName",value:function(t){if(!this.hasName(t)){var e=this.name(),n=e?e+" "+t:t;this.name(n)}return this}},{key:"hasName",value:function(t){if(!t)return!1;var e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)}},{key:"removeName",value:function(t){var e=(this.name()||"").split(/\s/g),n=e.indexOf(t);return-1!==n&&(e.splice(n,1),this.name(e.join(" "))),this}},{key:"setAttr",value:function(t,e){var n=this["set"+A._capitalize(t)];return A._isFunction(n)?n.call(this,e):this._setAttr(t,e),this}},{key:"_requestDraw",value:function(){if(x.autoDrawEnabled){var t=this.getLayer()||this.getStage();null===t||void 0===t||t.batchDraw()}}},{key:"_setAttr",value:function(t,e){var n=this.attrs[t];(n!==e||A.isObject(e))&&(void 0===e||null===e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,n,e),this._requestDraw())}},{key:"_setComponentAttr",value:function(t,e,n){var r;void 0!==n&&((r=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,r,n))}},{key:"_fireAndBubble",value:function(t,e,n){if(e&&this.nodeType===ot&&(e.target=this),!((t===it||t===at)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n))){this._fire(t,e);var r=(t===it||t===at)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!r&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n):this._fireAndBubble.call(this.parent,t,e))}}},{key:"_getProtoListeners",value:function(t){var e=this._cache.get(J);if(!e){e={};for(var n=Object.getPrototypeOf(this);n;)if(n.eventListeners){for(var r in n.eventListeners){var i=n.eventListeners[r],a=e[r]||[];e[r]=i.concat(a)}n=Object.getPrototypeOf(n)}else n=Object.getPrototypeOf(n);this._cache.set(J,e)}return e[t]}},{key:"_fire",value:function(t,e){(e=e||{}).currentTarget=this,e.type=t;var n=this._getProtoListeners(t);if(n)for(var r=0;r<n.length;r++)n[r].handler.call(this,e);var i=this.eventListeners[t];if(i)for(r=0;r<i.length;r++)i[r].handler.call(this,e)}},{key:"draw",value:function(){return this.drawScene(),this.drawHit(),this}},{key:"_createDragElement",value:function(t){var e=t?t.pointerId:void 0,n=this.getStage(),r=this.getAbsolutePosition(),i=n._getPointerById(e)||n._changedPointerPositions[0]||r;Z._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-r.x,y:i.y-r.y},dragStatus:"ready",pointerId:e})}},{key:"startDrag",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Z._dragElements.has(this._id)||this._createDragElement(t);var n=Z._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}},{key:"_setDragPosition",value:function(t,e){var n=this.getStage()._getPointerById(e.pointerId);if(n){var r={x:n.x-e.offset.x,y:n.y-e.offset.y},i=this.dragBoundFunc();if(void 0!==i){var a=i.call(this,r,t);a?r=a:A.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===r.x&&this._lastPos.y===r.y||(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}}},{key:"stopDrag",value:function(t){var e=Z._dragElements.get(this._id);e&&(e.dragStatus="stopped"),Z._endDragBefore(t),Z._endDragAfter(t)}},{key:"setDraggable",value:function(t){this._setAttr("draggable",t),this._dragChange()}},{key:"isDragging",value:function(){var t=Z._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus}},{key:"_listenDrag",value:function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(t){var e=this;if((!(void 0!==t.evt.button)||x.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var n=!1;Z._dragElements.forEach((function(t){e.isAncestorOf(t.node)&&(n=!0)})),n||this._createDragElement(t)}}))}},{key:"_dragChange",value:function(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;var t=Z._dragElements.get(this._id),e=t&&"dragging"===t.dragStatus,n=t&&"ready"===t.dragStatus;e?this.stopDrag():n&&Z._dragElements.delete(this._id)}}},{key:"_dragCleanup",value:function(){this.off("mousedown.konva"),this.off("touchstart.konva")}},{key:"isClientRectOnScreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=this.getStage();if(!e)return!1;var n={x:-t.x,y:-t.y,width:e.width()+t.x,height:e.height()+t.y};return A.haveIntersection(n,this.getClientRect())}}],[{key:"create",value:function(t,e){return A._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}},{key:"_createNode",value:function(e,n){var r,i,a,o=t.prototype.getClassName.call(e),s=e.children;if(n&&(e.attrs.container=n),x[o]||(A.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape"),r=new(0,x[o])(e.attrs),s)for(i=s.length,a=0;a<i;a++)r.add(t._createNode(s[a]));return r}}]),t}();ft.prototype.nodeType="Node",ft.prototype._attrsAffectingSize=[],ft.prototype.eventListeners={},ft.prototype.on.call(ft.prototype,ut,(function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(lt),this._clearSelfAndDescendantCache(tt))})),ft.prototype.on.call(ft.prototype,"visibleChange.konva",(function(){this._clearSelfAndDescendantCache(ct)})),ft.prototype.on.call(ft.prototype,"listeningChange.konva",(function(){this._clearSelfAndDescendantCache(rt)})),ft.prototype.on.call(ft.prototype,"opacityChange.konva",(function(){this._clearSelfAndDescendantCache(Q)}));var pt=I.addGetterSetter;pt(ft,"zIndex"),pt(ft,"absolutePosition"),pt(ft,"position"),pt(ft,"x",0,M()),pt(ft,"y",0,M()),pt(ft,"globalCompositeOperation","source-over",F()),pt(ft,"opacity",1,M()),pt(ft,"name","",F()),pt(ft,"id","",F()),pt(ft,"rotation",0,M()),I.addComponentsGetterSetter(ft,"scale",["x","y"]),pt(ft,"scaleX",1,M()),pt(ft,"scaleY",1,M()),I.addComponentsGetterSetter(ft,"skew",["x","y"]),pt(ft,"skewX",0,M()),pt(ft,"skewY",0,M()),I.addComponentsGetterSetter(ft,"offset",["x","y"]),pt(ft,"offsetX",0,M()),pt(ft,"offsetY",0,M()),pt(ft,"dragDistance",null,M()),pt(ft,"width",0,M()),pt(ft,"height",0,M()),pt(ft,"listening",!0,B()),pt(ft,"preventDefault",!0,B()),pt(ft,"filters",null,(function(t){return this._filterUpToDate=!1,t})),pt(ft,"visible",!0,B()),pt(ft,"transformsEnabled","all",F()),pt(ft,"size"),pt(ft,"dragBoundFunc"),pt(ft,"draggable",!1,B()),I.backCompat(ft,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var gt=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(v.a)(this,n),(t=e.apply(this,arguments)).children=[],t}return Object(b.a)(n,[{key:"getChildren",value:function(t){if(!t)return this.children||[];var e=this.children||[],n=[];return e.forEach((function(e){t(e)&&n.push(e)})),n}},{key:"hasChildren",value:function(){return this.getChildren().length>0}},{key:"removeChildren",value:function(){return this.getChildren().forEach((function(t){t.parent=null,t.index=0,t.remove()})),this.children=[],this._requestDraw(),this}},{key:"destroyChildren",value:function(){return this.getChildren().forEach((function(t){t.parent=null,t.index=0,t.destroy()})),this.children=[],this._requestDraw(),this}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}var i=e[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}},{key:"destroy",value:function(){return this.hasChildren()&&this.destroyChildren(),Object(c.a)(Object(u.a)(n.prototype),"destroy",this).call(this),this}},{key:"find",value:function(t){return this._generalFind(t,!1)}},{key:"findOne",value:function(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}},{key:"_generalFind",value:function(t,e){var n=[];return this._descendants((function(r){var i=r._isMatch(t);return i&&n.push(r),!(!i||!e)})),n}},{key:"_descendants",value:function(t){var e,n=this.getChildren(),r=Object(l.a)(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(t(i))return!0;if(i.hasChildren()&&i._descendants(t))return!0}}catch(a){r.e(a)}finally{r.f()}return!1}},{key:"toObject",value:function(){var t=ft.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach((function(e){t.children.push(e.toObject())})),t}},{key:"isAncestorOf",value:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}},{key:"clone",value:function(t){var e=ft.prototype.clone.call(this,t);return this.getChildren().forEach((function(t){e.add(t.clone())})),e}},{key:"getAllIntersections",value:function(t){var e=[];return this.find("Shape").forEach((function(n){n.isVisible()&&n.intersects(t)&&e.push(n)})),e}},{key:"_clearSelfAndDescendantCache",value:function(t){var e;Object(c.a)(Object(u.a)(n.prototype),"_clearSelfAndDescendantCache",this).call(this,t),this.isCached()||null===(e=this.children)||void 0===e||e.forEach((function(e){e._clearSelfAndDescendantCache(t)}))}},{key:"_setChildrenIndices",value:function(){var t;null===(t=this.children)||void 0===t||t.forEach((function(t,e){t.index=e})),this._requestDraw()}},{key:"drawScene",value:function(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas(),i=r&&r.getContext(),a=this._getCanvasCache(),o=a&&a.scene,s=r&&r.isCache;if(!this.isVisible()&&!s)return this;if(o){i.save();var h=this.getAbsoluteTransform(e).getMatrix();i.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(i),i.restore()}else this._drawChildren("drawScene",r,e);return this}},{key:"drawHit",value:function(t,e){if(!this.shouldDrawHit(e))return this;var n=this.getLayer(),r=t||n&&n.hitCanvas,i=r&&r.getContext(),a=this._getCanvasCache();if(a&&a.hit){i.save();var o=this.getAbsoluteTransform(e).getMatrix();i.transform(o[0],o[1],o[2],o[3],o[4],o[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",r,e);return this}},{key:"_drawChildren",value:function(t,e,n){var r,i=e&&e.getContext(),a=this.clipWidth(),o=this.clipHeight(),s=this.clipFunc(),h=a&&o||s,l=n===this;if(h){i.save();var c=this.getAbsoluteTransform(n),u=c.getMatrix();if(i.transform(u[0],u[1],u[2],u[3],u[4],u[5]),i.beginPath(),s)s.call(this,i,this);else{var d=this.clipX(),f=this.clipY();i.rect(d,f,a,o)}i.clip(),u=c.copy().invert().getMatrix(),i.transform(u[0],u[1],u[2],u[3],u[4],u[5])}var p=!l&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;p&&(i.save(),i._applyGlobalCompositeOperation(this)),null===(r=this.children)||void 0===r||r.forEach((function(r){r[t](e,n)})),p&&i.restore(),h&&i.restore()}},{key:"getClientRect",value:function(t){var e,n,r,i,a,o=(t=t||{}).skipTransform,s=t.relativeTo,h={x:1/0,y:1/0,width:0,height:0},l=this;null===(e=this.children)||void 0===e||e.forEach((function(e){if(e.visible()){var o=e.getClientRect({relativeTo:l,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===o.width&&0===o.height||(void 0===n?(n=o.x,r=o.y,i=o.x+o.width,a=o.y+o.height):(n=Math.min(n,o.x),r=Math.min(r,o.y),i=Math.max(i,o.x+o.width),a=Math.max(a,o.y+o.height)))}}));for(var c=this.find("Shape"),u=!1,d=0;d<c.length;d++){if(c[d]._isVisible(this)){u=!0;break}}return h=u&&void 0!==n?{x:n,y:r,width:i-n,height:a-r}:{x:0,y:0,width:0,height:0},o?h:this._transformedRect(h,s)}}]),n}(ft);I.addComponentsGetterSetter(gt,"clip",["x","y","width","height"]),I.addGetterSetter(gt,"clipX",void 0,M()),I.addGetterSetter(gt,"clipY",void 0,M()),I.addGetterSetter(gt,"clipWidth",void 0,M()),I.addGetterSetter(gt,"clipHeight",void 0,M()),I.addGetterSetter(gt,"clipFunc");var vt=new Map,bt=void 0!==x._global.PointerEvent;function yt(t){return vt.get(t)}function mt(t){return{evt:t,pointerId:t.pointerId}}function xt(t,e){return vt.get(t)===e}function wt(t,e){_t(t),e.getStage()&&(vt.set(t,e),bt&&e._fire("gotpointercapture",mt(new PointerEvent("gotpointercapture"))))}function _t(t,e){var n=vt.get(t);if(n){var r=n.getStage();r&&r.content,vt.delete(t),bt&&n._fire("lostpointercapture",mt(new PointerEvent("lostpointercapture")))}}var kt="mouseleave",St="mouseover",Ct="mouseenter",Ot="mousemove",jt="mousedown",Et="mouseup",Pt="pointermove",At="pointerdown",Tt="pointerup",Rt="pointercancel",Mt="pointerout",Dt="pointerleave",Lt="pointerover",Ft="pointerenter",Gt="contextmenu",Bt="touchstart",zt="touchend",Nt="touchmove",It="touchcancel",Ht="wheel",Wt=[[Ct,"_pointerenter"],[jt,"_pointerdown"],[Ot,"_pointermove"],[Et,"_pointerup"],[kt,"_pointerleave"],[Bt,"_pointerdown"],[Nt,"_pointermove"],[zt,"_pointerup"],[It,"_pointercancel"],[St,"_pointerover"],[Ht,"_wheel"],[Gt,"_contextmenu"],[At,"_pointerdown"],[Pt,"_pointermove"],[Tt,"_pointerup"],[Rt,"_pointercancel"],["lostpointercapture","_lostpointercapture"]],Xt={mouse:(r={},Object(h.a)(r,Mt,"mouseout"),Object(h.a)(r,Dt,kt),Object(h.a)(r,Lt,St),Object(h.a)(r,Ft,Ct),Object(h.a)(r,Pt,Ot),Object(h.a)(r,At,jt),Object(h.a)(r,Tt,Et),Object(h.a)(r,Rt,"mousecancel"),Object(h.a)(r,"pointerclick","click"),Object(h.a)(r,"pointerdblclick","dblclick"),r),touch:(i={},Object(h.a)(i,Mt,"touchout"),Object(h.a)(i,Dt,"touchleave"),Object(h.a)(i,Lt,"touchover"),Object(h.a)(i,Ft,"touchenter"),Object(h.a)(i,Pt,Nt),Object(h.a)(i,At,Bt),Object(h.a)(i,Tt,zt),Object(h.a)(i,Rt,It),Object(h.a)(i,"pointerclick","tap"),Object(h.a)(i,"pointerdblclick","dbltap"),i),pointer:(a={},Object(h.a)(a,Mt,Mt),Object(h.a)(a,Dt,Dt),Object(h.a)(a,Lt,Lt),Object(h.a)(a,Ft,Ft),Object(h.a)(a,Pt,Pt),Object(h.a)(a,At,At),Object(h.a)(a,Tt,Tt),Object(h.a)(a,Rt,Rt),Object(h.a)(a,"pointerclick","pointerclick"),Object(h.a)(a,"pointerdblclick","pointerdblclick"),a)},Ut=function(t){return t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse"},Yt=function(t){var e=Ut(t);return"pointer"===e?x.pointerEventsEnabled&&Xt.pointer:"touch"===e?Xt.touch:"mouse"===e?Xt.mouse:void 0};function qt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t.clipFunc||t.clipWidth||t.clipHeight)&&A.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}var Vt=[],Kt=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this,qt(t)))._pointerPositions=[],r._changedPointerPositions=[],r._buildDOM(),r._bindContentEvents(),Vt.push(Object(d.a)(r)),r.on("widthChange.konva heightChange.konva",r._resizeDOM),r.on("visibleChange.konva",r._checkVisibility),r.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(function(){qt(r.attrs)})),r._checkVisibility(),r}return Object(b.a)(n,[{key:"_validateAdd",value:function(t){var e="Layer"===t.getType(),n="FastLayer"===t.getType();e||n||A.throw("You may only add layers to the stage.")}},{key:"_checkVisibility",value:function(){if(this.content){var t=this.visible()?"":"none";this.content.style.display=t}}},{key:"setContainer",value:function(t){if("string"===typeof t){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var n;n="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(n)}if(!t)throw"Can not find container in document with id "+n}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}},{key:"shouldDrawHit",value:function(){return!0}},{key:"clear",value:function(){var t,e=this.children,n=e.length;for(t=0;t<n;t++)e[t].clear();return this}},{key:"clone",value:function(t){return t||(t={}),t.container="undefined"!==typeof document&&document.createElement("div"),gt.prototype.clone.call(this,t)}},{key:"destroy",value:function(){Object(c.a)(Object(u.a)(n.prototype),"destroy",this).call(this);var t=this.content;t&&A._isInDocument(t)&&this.container().removeChild(t);var e=Vt.indexOf(this);return e>-1&&Vt.splice(e,1),this}},{key:"getPointerPosition",value:function(){var t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(A.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}},{key:"_getPointerById",value:function(t){return this._pointerPositions.find((function(e){return e.id===t}))}},{key:"getPointersPositions",value:function(){return this._pointerPositions}},{key:"getStage",value:function(){return this}},{key:"getContent",value:function(){return this.content}},{key:"_toKonvaCanvas",value:function(t){(t=t||{}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var e=new K({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),n=e.getContext()._context,r=this.children;return(t.x||t.y)&&n.translate(-1*t.x,-1*t.y),r.forEach((function(e){if(e.isVisible()){var r=e._toKonvaCanvas(t);n.drawImage(r._canvas,t.x,t.y,r.getWidth()/r.getPixelRatio(),r.getHeight()/r.getPixelRatio())}})),e}},{key:"getIntersection",value:function(t){if(!t)return null;var e,n=this.children;for(e=n.length-1;e>=0;e--){var r=n[e].getIntersection(t);if(r)return r}return null}},{key:"_resizeDOM",value:function(){var t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach((function(n){n.setSize({width:t,height:e}),n.draw()}))}},{key:"add",value:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(arguments.length>1){for(var a=0;a<arguments.length;a++)this.add(arguments[a]);return this}Object(c.a)(Object(u.a)(n.prototype),"add",this).call(this,t);var o=this.children.length;return o>5&&A.warn("The stage has "+o+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),x.isBrowser&&this.content.appendChild(t.canvas._canvas),this}},{key:"getParent",value:function(){return null}},{key:"getLayer",value:function(){return null}},{key:"hasPointerCapture",value:function(t){return xt(t,this)}},{key:"setPointerCapture",value:function(t){wt(t,this)}},{key:"releaseCapture",value:function(t){_t(t)}},{key:"getLayers",value:function(){return this.children}},{key:"_bindContentEvents",value:function(){var t=this;x.isBrowser&&Wt.forEach((function(e){var n=Object(s.a)(e,2),r=n[0],i=n[1];t.content.addEventListener(r,(function(e){t[i](e)}))}))}},{key:"_pointerenter",value:function(t){this.setPointersPositions(t);var e=Yt(t.type);this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}},{key:"_pointerover",value:function(t){this.setPointersPositions(t);var e=Yt(t.type);this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}},{key:"_getTargetShape",value:function(t){var e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}},{key:"_pointerleave",value:function(t){var e=Yt(t.type),n=Ut(t.type);if(e){this.setPointersPositions(t);var r=this._getTargetShape(n),i=!Z.isDragging||x.hitOnDragEnabled;r&&i?(r._fireAndBubble(e.pointerout,{evt:t}),r._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[n+"targetShape"]=null):i&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}},{key:"_pointerdown",value:function(t){var e=this,n=Yt(t.type),r=Ut(t.type);if(n){this.setPointersPositions(t);var i=!1;this._changedPointerPositions.forEach((function(a){var o=e.getIntersection(a);if(Z.justDragged=!1,x["_"+r+"ListenClick"]=!0,o&&o.isListening()){x.capturePointerEventsEnabled&&o.setPointerCapture(a.id),e[r+"ClickStartShape"]=o,o._fireAndBubble(n.pointerdown,{evt:t,pointerId:a.id}),i=!0;var s=t.type.indexOf("touch")>=0;o.preventDefault()&&t.cancelable&&s&&t.preventDefault()}})),i||this._fire(n.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}},{key:"_pointermove",value:function(t){var e=this,n=Yt(t.type),r=Ut(t.type);if(n&&(Z.isDragging&&Z.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t),!Z.isDragging||x.hitOnDragEnabled)){var i={},a=!1,o=this._getTargetShape(r);this._changedPointerPositions.forEach((function(s){var h=yt(s.id)||e.getIntersection(s),l=s.id,c={evt:t,pointerId:l},u=o!==h;if(u&&o&&(o._fireAndBubble(n.pointerout,Object.assign({},c),h),o._fireAndBubble(n.pointerleave,Object.assign({},c),h)),h){if(i[h._id])return;i[h._id]=!0}h&&h.isListening()?(a=!0,u&&(h._fireAndBubble(n.pointerover,Object.assign({},c),o),h._fireAndBubble(n.pointerenter,Object.assign({},c),o),e[r+"targetShape"]=h),h._fireAndBubble(n.pointermove,Object.assign({},c))):o&&(e._fire(n.pointerover,{evt:t,target:e,currentTarget:e,pointerId:l}),e[r+"targetShape"]=null)})),a||this._fire(n.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}}},{key:"_pointerup",value:function(t){var e=this,n=Yt(t.type),r=Ut(t.type);if(n){this.setPointersPositions(t);var i=this[r+"ClickStartShape"],a=this[r+"ClickEndShape"],o={},s=!1;this._changedPointerPositions.forEach((function(h){var l=yt(h.id)||e.getIntersection(h);if(l){if(l.releaseCapture(h.id),o[l._id])return;o[l._id]=!0}var c=h.id,u={evt:t,pointerId:c},d=!1;x["_"+r+"InDblClickWindow"]?(d=!0,clearTimeout(e[r+"DblTimeout"])):Z.justDragged||(x["_"+r+"InDblClickWindow"]=!0,clearTimeout(e[r+"DblTimeout"])),e[r+"DblTimeout"]=setTimeout((function(){x["_"+r+"InDblClickWindow"]=!1}),x.dblClickWindow),l&&l.isListening()?(s=!0,e[r+"ClickEndShape"]=l,l._fireAndBubble(n.pointerup,Object.assign({},u)),x["_"+r+"ListenClick"]&&i&&i===l&&(l._fireAndBubble(n.pointerclick,Object.assign({},u)),d&&a&&a===l&&l._fireAndBubble(n.pointerdblclick,Object.assign({},u)))):(e[r+"ClickEndShape"]=null,x["_"+r+"ListenClick"]&&e._fire(n.pointerclick,{evt:t,target:e,currentTarget:e,pointerId:c}),d&&e._fire(n.pointerdblclick,{evt:t,target:e,currentTarget:e,pointerId:c}))})),s||this._fire(n.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),x["_"+r+"ListenClick"]=!1,t.cancelable&&t.preventDefault()}}},{key:"_contextmenu",value:function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(Gt,{evt:t}):this._fire(Gt,{evt:t,target:this,currentTarget:this})}},{key:"_wheel",value:function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(Ht,{evt:t}):this._fire(Ht,{evt:t,target:this,currentTarget:this})}},{key:"_pointercancel",value:function(t){this.setPointersPositions(t);var e=yt(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(Tt,mt(t)),_t(t.pointerId)}},{key:"_lostpointercapture",value:function(t){_t(t.pointerId)}},{key:"setPointersPositions",value:function(t){var e=this,n=this._getContentPosition(),r=null,i=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,(function(t){e._pointerPositions.push({id:t.identifier,x:(t.clientX-n.left)/n.scaleX,y:(t.clientY-n.top)/n.scaleY})})),Array.prototype.forEach.call(t.changedTouches||t.touches,(function(t){e._changedPointerPositions.push({id:t.identifier,x:(t.clientX-n.left)/n.scaleX,y:(t.clientY-n.top)/n.scaleY})}))):(r=(t.clientX-n.left)/n.scaleX,i=(t.clientY-n.top)/n.scaleY,this.pointerPos={x:r,y:i},this._pointerPositions=[{x:r,y:i,id:A._getFirstPointerId(t)}],this._changedPointerPositions=[{x:r,y:i,id:A._getFirstPointerId(t)}])}},{key:"_setPointerPosition",value:function(t){A.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}},{key:"_getContentPosition",value:function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}},{key:"_buildDOM",value:function(){if(this.bufferCanvas=new K({width:this.width(),height:this.height()}),this.bufferHitCanvas=new $({pixelRatio:1,width:this.width(),height:this.height()}),x.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}}},{key:"cache",value:function(){return A.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}},{key:"clearCache",value:function(){return this}},{key:"batchDraw",value:function(){return this.getChildren().forEach((function(t){t.batchDraw()})),this}}]),n}(gt);Kt.prototype.nodeType="Stage",w(Kt),I.addGetterSetter(Kt,"container");var $t,Zt="hasShadow",Qt="shadowRGBA",Jt="patternImage",te="linearGradient",ee="radialGradient";function ne(){return $t||($t=A.createCanvasElement().getContext("2d"))}var re={};var ie=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(t){var r,i;for(Object(v.a)(this,n),r=e.call(this,t);!(i=A.getRandomColor())||i in re;);return r.colorKey=i,re[i]=Object(d.a)(r),r}return Object(b.a)(n,[{key:"getContext",value:function(){return A.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}},{key:"getCanvas",value:function(){return A.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}},{key:"getSceneFunc",value:function(){return this.attrs.sceneFunc||this._sceneFunc}},{key:"getHitFunc",value:function(){return this.attrs.hitFunc||this._hitFunc}},{key:"hasShadow",value:function(){return this._getCache(Zt,this._hasShadow)}},{key:"_hasShadow",value:function(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}},{key:"_getFillPattern",value:function(){return this._getCache(Jt,this.__getFillPattern)}},{key:"__getFillPattern",value:function(){if(this.fillPatternImage()){var t=ne().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){var e=new _;e.translate(this.fillPatternX(),this.fillPatternY()),e.rotate(x.getAngle(this.fillPatternRotation())),e.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),e.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());var n=e.getMatrix();t.setTransform({a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]})}return t}}},{key:"_getLinearGradient",value:function(){return this._getCache(te,this.__getLinearGradient)}},{key:"__getLinearGradient",value:function(){var t=this.fillLinearGradientColorStops();if(t){for(var e=ne(),n=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),i=e.createLinearGradient(n.x,n.y,r.x,r.y),a=0;a<t.length;a+=2)i.addColorStop(t[a],t[a+1]);return i}}},{key:"_getRadialGradient",value:function(){return this._getCache(ee,this.__getRadialGradient)}},{key:"__getRadialGradient",value:function(){var t=this.fillRadialGradientColorStops();if(t){for(var e=ne(),n=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),i=e.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius()),a=0;a<t.length;a+=2)i.addColorStop(t[a],t[a+1]);return i}}},{key:"getShadowRGBA",value:function(){return this._getCache(Qt,this._getShadowRGBA)}},{key:"_getShadowRGBA",value:function(){if(this.hasShadow()){var t=A.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}}},{key:"hasFill",value:function(){var t=this;return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],(function(){return t.fillEnabled()&&!!(t.fill()||t.fillPatternImage()||t.fillLinearGradientColorStops()||t.fillRadialGradientColorStops())}))}},{key:"hasStroke",value:function(){var t=this;return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],(function(){return t.strokeEnabled()&&t.strokeWidth()&&!(!t.stroke()&&!t.strokeLinearGradientColorStops())}))}},{key:"hasHitStroke",value:function(){var t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t}},{key:"intersects",value:function(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawHit(e,null,!0),e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}},{key:"destroy",value:function(){return ft.prototype.destroy.call(this),delete re[this.colorKey],delete this.colorKey,this}},{key:"_useBufferCanvas",value:function(t){var e;if(!this.getStage())return!1;if(!(null===(e=this.attrs.perfectDrawEnabled)||void 0===e||e))return!1;var n=t||this.hasFill(),r=this.hasStroke(),i=1!==this.getAbsoluteOpacity();if(n&&r&&i)return!0;var a=this.hasShadow(),o=this.shadowForStrokeEnabled();return!!(n&&r&&a&&o)}},{key:"setStrokeHitEnabled",value:function(t){A.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}},{key:"getStrokeHitEnabled",value:function(){return 0!==this.hitStrokeWidth()}},{key:"getSelfRect",value:function(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}},{key:"getClientRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.skipTransform,n=t.relativeTo,r=this.getSelfRect(),i=!t.skipStroke&&this.hasStroke(),a=i&&this.strokeWidth()||0,o=r.width+a,s=r.height+a,h=!t.skipShadow&&this.hasShadow(),l=h?this.shadowOffsetX():0,c=h?this.shadowOffsetY():0,u=o+Math.abs(l),d=s+Math.abs(c),f=h&&this.shadowBlur()||0,p=u+2*f,g=d+2*f,v=0;Math.round(a/2)!==a/2&&(v=1);var b={width:p+v,height:g+v,x:-Math.round(a/2+f)+Math.min(l,0)+r.x,y:-Math.round(a/2+f)+Math.min(c,0)+r.y};return e?b:this._transformedRect(b,n)}},{key:"drawScene",value:function(t,e){var n,r,i=this.getLayer(),a=t||i.getCanvas(),o=a.getContext(),s=this._getCanvasCache(),h=this.getSceneFunc(),l=this.hasShadow(),c=a.isCache,u=e===this;if(!this.isVisible()&&!u)return this;if(s){o.save();var d=this.getAbsoluteTransform(e).getMatrix();return o.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(o),o.restore(),this}if(!h)return this;if(o.save(),this._useBufferCanvas()&&!c){(r=(n=this.getStage().bufferCanvas).getContext()).clear(),r.save(),r._applyLineJoin(this);var f=this.getAbsoluteTransform(e).getMatrix();r.transform(f[0],f[1],f[2],f[3],f[4],f[5]),h.call(this,r,this),r.restore();var p=n.pixelRatio;l&&o._applyShadow(this),o._applyOpacity(this),o._applyGlobalCompositeOperation(this),o.drawImage(n._canvas,0,0,n.width/p,n.height/p)}else{if(o._applyLineJoin(this),!u){f=this.getAbsoluteTransform(e).getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o._applyOpacity(this),o._applyGlobalCompositeOperation(this)}l&&o._applyShadow(this),h.call(this,o,this)}return o.restore(),this}},{key:"drawHit",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.shouldDrawHit(e,n))return this;var r=this.getLayer(),i=t||r.hitCanvas,a=i&&i.getContext(),o=this.hitFunc()||this.sceneFunc(),s=this._getCanvasCache(),h=s&&s.hit;if(this.colorKey||A.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){a.save();var l=this.getAbsoluteTransform(e).getMatrix();return a.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;a.save(),a._applyLineJoin(this);var c=this===e;if(!c){var u=this.getAbsoluteTransform(e).getMatrix();a.transform(u[0],u[1],u[2],u[3],u[4],u[5])}return o.call(this,a,this),a.restore(),this}},{key:"drawHitFromCache",value:function(){var t,e,n,r,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=this._getCanvasCache(),s=this._getCachedSceneCanvas(),h=o.hit,l=h.getContext(),c=h.getWidth(),u=h.getHeight();l.clear(),l.drawImage(s._canvas,0,0,c,u);try{for(n=(e=(t=l.getImageData(0,0,c,u)).data).length,r=A._hexToRgb(this.colorKey),i=0;i<n;i+=4)e[i+3]>a?(e[i]=r.r,e[i+1]=r.g,e[i+2]=r.b,e[i+3]=255):e[i+3]=0;l.putImageData(t,0,0)}catch(d){A.error("Unable to draw hit graph from cached scene canvas. "+d.message)}return this}},{key:"hasPointerCapture",value:function(t){return xt(t,this)}},{key:"setPointerCapture",value:function(t){wt(t,this)}},{key:"releaseCapture",value:function(t){_t(t)}}]),n}(ft);ie.prototype._fillFunc=function(t){t.fill()},ie.prototype._strokeFunc=function(t){t.stroke()},ie.prototype._fillFuncHit=function(t){t.fill()},ie.prototype._strokeFuncHit=function(t){t.stroke()},ie.prototype._centroid=!1,ie.prototype.nodeType="Shape",w(ie),ie.prototype.eventListeners={},ie.prototype.on.call(ie.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(Zt)})),ie.prototype.on.call(ie.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(Qt)})),ie.prototype.on.call(ie.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",(function(){this._clearCache(Jt)})),ie.prototype.on.call(ie.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",(function(){this._clearCache(te)})),ie.prototype.on.call(ie.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",(function(){this._clearCache(ee)})),I.addGetterSetter(ie,"stroke",void 0,G()),I.addGetterSetter(ie,"strokeWidth",2,M()),I.addGetterSetter(ie,"fillAfterStrokeEnabled",!1),I.addGetterSetter(ie,"hitStrokeWidth","auto",L()),I.addGetterSetter(ie,"strokeHitEnabled",!0,B()),I.addGetterSetter(ie,"perfectDrawEnabled",!0,B()),I.addGetterSetter(ie,"shadowForStrokeEnabled",!0,B()),I.addGetterSetter(ie,"lineJoin"),I.addGetterSetter(ie,"lineCap"),I.addGetterSetter(ie,"sceneFunc"),I.addGetterSetter(ie,"hitFunc"),I.addGetterSetter(ie,"dash"),I.addGetterSetter(ie,"dashOffset",0,M()),I.addGetterSetter(ie,"shadowColor",void 0,F()),I.addGetterSetter(ie,"shadowBlur",0,M()),I.addGetterSetter(ie,"shadowOpacity",1,M()),I.addComponentsGetterSetter(ie,"shadowOffset",["x","y"]),I.addGetterSetter(ie,"shadowOffsetX",0,M()),I.addGetterSetter(ie,"shadowOffsetY",0,M()),I.addGetterSetter(ie,"fillPatternImage"),I.addGetterSetter(ie,"fill",void 0,G()),I.addGetterSetter(ie,"fillPatternX",0,M()),I.addGetterSetter(ie,"fillPatternY",0,M()),I.addGetterSetter(ie,"fillLinearGradientColorStops"),I.addGetterSetter(ie,"strokeLinearGradientColorStops"),I.addGetterSetter(ie,"fillRadialGradientStartRadius",0),I.addGetterSetter(ie,"fillRadialGradientEndRadius",0),I.addGetterSetter(ie,"fillRadialGradientColorStops"),I.addGetterSetter(ie,"fillPatternRepeat","repeat"),I.addGetterSetter(ie,"fillEnabled",!0),I.addGetterSetter(ie,"strokeEnabled",!0),I.addGetterSetter(ie,"shadowEnabled",!0),I.addGetterSetter(ie,"dashEnabled",!0),I.addGetterSetter(ie,"strokeScaleEnabled",!0),I.addGetterSetter(ie,"fillPriority","color"),I.addComponentsGetterSetter(ie,"fillPatternOffset",["x","y"]),I.addGetterSetter(ie,"fillPatternOffsetX",0,M()),I.addGetterSetter(ie,"fillPatternOffsetY",0,M()),I.addComponentsGetterSetter(ie,"fillPatternScale",["x","y"]),I.addGetterSetter(ie,"fillPatternScaleX",1,M()),I.addGetterSetter(ie,"fillPatternScaleY",1,M()),I.addComponentsGetterSetter(ie,"fillLinearGradientStartPoint",["x","y"]),I.addComponentsGetterSetter(ie,"strokeLinearGradientStartPoint",["x","y"]),I.addGetterSetter(ie,"fillLinearGradientStartPointX",0),I.addGetterSetter(ie,"strokeLinearGradientStartPointX",0),I.addGetterSetter(ie,"fillLinearGradientStartPointY",0),I.addGetterSetter(ie,"strokeLinearGradientStartPointY",0),I.addComponentsGetterSetter(ie,"fillLinearGradientEndPoint",["x","y"]),I.addComponentsGetterSetter(ie,"strokeLinearGradientEndPoint",["x","y"]),I.addGetterSetter(ie,"fillLinearGradientEndPointX",0),I.addGetterSetter(ie,"strokeLinearGradientEndPointX",0),I.addGetterSetter(ie,"fillLinearGradientEndPointY",0),I.addGetterSetter(ie,"strokeLinearGradientEndPointY",0),I.addComponentsGetterSetter(ie,"fillRadialGradientStartPoint",["x","y"]),I.addGetterSetter(ie,"fillRadialGradientStartPointX",0),I.addGetterSetter(ie,"fillRadialGradientStartPointY",0),I.addComponentsGetterSetter(ie,"fillRadialGradientEndPoint",["x","y"]),I.addGetterSetter(ie,"fillRadialGradientEndPointX",0),I.addGetterSetter(ie,"fillRadialGradientEndPointY",0),I.addGetterSetter(ie,"fillPatternRotation",0),I.backCompat(ie,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var ae=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],oe=ae.length,se=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this,t)).canvas=new K,r.hitCanvas=new $({pixelRatio:1}),r._waitingForDraw=!1,r.on("visibleChange.konva",r._checkVisibility),r._checkVisibility(),r.on("imageSmoothingEnabledChange.konva",r._setSmoothEnabled),r._setSmoothEnabled(),r}return Object(b.a)(n,[{key:"createPNGStream",value:function(){return this.canvas._canvas.createPNGStream()}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getNativeCanvasElement",value:function(){return this.canvas._canvas}},{key:"getHitCanvas",value:function(){return this.hitCanvas}},{key:"getContext",value:function(){return this.getCanvas().getContext()}},{key:"clear",value:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}},{key:"setZIndex",value:function(t){Object(c.a)(Object(u.a)(n.prototype),"setZIndex",this).call(this,t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}},{key:"moveToTop",value:function(){ft.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}},{key:"moveUp",value:function(){if(!ft.prototype.moveUp.call(this))return!1;var t=this.getStage();return!(!t||!t.content)&&(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}},{key:"moveDown",value:function(){if(ft.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}},{key:"moveToBottom",value:function(){if(ft.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}},{key:"getLayer",value:function(){return this}},{key:"remove",value:function(){var t=this.getNativeCanvasElement();return ft.prototype.remove.call(this),t&&t.parentNode&&A._isInDocument(t)&&t.parentNode.removeChild(t),this}},{key:"getStage",value:function(){return this.parent}},{key:"setSize",value:function(t){var e=t.width,n=t.height;return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}},{key:"_validateAdd",value:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&A.throw("You may only add groups and shapes to a layer.")}},{key:"_toKonvaCanvas",value:function(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),ft.prototype._toKonvaCanvas.call(this,t)}},{key:"_checkVisibility",value:function(){var t=this.visible();this.canvas._canvas.style.display=t?"block":"none"}},{key:"_setSmoothEnabled",value:function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}},{key:"getWidth",value:function(){if(this.parent)return this.parent.width()}},{key:"setWidth",value:function(){A.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}},{key:"getHeight",value:function(){if(this.parent)return this.parent.height()}},{key:"setHeight",value:function(){A.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}},{key:"batchDraw",value:function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,A.requestAnimFrame((function(){t.draw(),t._waitingForDraw=!1}))),this}},{key:"getIntersection",value:function(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,n=!1;;){for(var r=0;r<oe;r++){var i=ae[r],a=this._getIntersection({x:t.x+i.x*e,y:t.y+i.y*e}),o=a.shape;if(o)return o;if(n=!!a.antialiased,!a.antialiased)break}if(!n)return null;e+=1}}},{key:"_getIntersection",value:function(t){var e=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=n[3];if(255===r){var i=A._rgbToHex(n[0],n[1],n[2]),a=re["#"+i];return a?{shape:a}:{antialiased:!0}}return r>0?{antialiased:!0}:{}}},{key:"drawScene",value:function(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),gt.prototype.drawScene.call(this,r,e),this._fire("draw",{node:this}),this}},{key:"drawHit",value:function(t,e){var n=this.getLayer(),r=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),gt.prototype.drawHit.call(this,r,e),this}},{key:"enableHitGraph",value:function(){return this.hitGraphEnabled(!0),this}},{key:"disableHitGraph",value:function(){return this.hitGraphEnabled(!1),this}},{key:"setHitGraphEnabled",value:function(t){A.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}},{key:"getHitGraphEnabled",value:function(t){return A.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}},{key:"toggleHitCanvas",value:function(){if(this.parent&&this.parent.content){var t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}}]),n}(gt);se.prototype.nodeType="Layer",w(se),I.addGetterSetter(se,"imageSmoothingEnabled",!0),I.addGetterSetter(se,"clearBeforeDraw",!0),I.addGetterSetter(se,"hitGraphEnabled",!0,B());var he=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this,t)).listening(!1),A.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.'),r}return n}(se);he.prototype.nodeType="FastLayer",w(he);var le=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"_validateAdd",value:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&A.throw("You may only add groups and shapes to groups.")}}]),n}(gt);le.prototype.nodeType="Group",w(le);var ce=m.performance&&m.performance.now?function(){return m.performance.now()}:function(){return(new Date).getTime()},ue=function(){function t(e,n){Object(v.a)(this,t),this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:ce(),frameRate:0},this.func=e,this.setLayers(n)}return Object(b.a)(t,[{key:"setLayers",value:function(t){var e=[];return e=t?t.length>0?t:[t]:[],this.layers=e,this}},{key:"getLayers",value:function(){return this.layers}},{key:"addLayer",value:function(t){var e,n=this.layers,r=n.length;for(e=0;e<r;e++)if(n[e]._id===t._id)return!1;return this.layers.push(t),!0}},{key:"isRunning",value:function(){var e,n=t.animations,r=n.length;for(e=0;e<r;e++)if(n[e].id===this.id)return!0;return!1}},{key:"start",value:function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=ce(),t._addAnimation(this),this}},{key:"stop",value:function(){return t._removeAnimation(this),this}},{key:"_updateFrameObject",value:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}}],[{key:"_addAnimation",value:function(t){this.animations.push(t),this._handleAnimation()}},{key:"_removeAnimation",value:function(t){var e,n=t.id,r=this.animations,i=r.length;for(e=0;e<i;e++)if(r[e].id===n){this.animations.splice(e,1);break}}},{key:"_runFrames",value:function(){var t,e,n,r,i,a,o,s,h={},l=this.animations;for(r=0;r<l.length;r++)if(e=(t=l[r]).layers,n=t.func,t._updateFrameObject(ce()),a=e.length,!n||!1!==n.call(t,t.frame))for(i=0;i<a;i++)void 0!==(o=e[i])._id&&(h[o._id]=o);for(s in h)h.hasOwnProperty(s)&&h[s].batchDraw()}},{key:"_animationLoop",value:function(){var e=t;e.animations.length?(e._runFrames(),A.requestAnimFrame(e._animationLoop)):e.animRunning=!1}},{key:"_handleAnimation",value:function(){this.animRunning||(this.animRunning=!0,A.requestAnimFrame(this._animationLoop))}}]),t}();ue.animations=[],ue.animIdCounter=0,ue.animRunning=!1;var de={node:1,duration:1,easing:1,onFinish:1,yoyo:1},fe=0,pe=["fill","stroke","shadowColor"],ge=function(){function t(e,n,r,i,a,o,s){Object(v.a)(this,t),this.prop=e,this.propFunc=n,this.begin=i,this._pos=i,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=s,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=a-this.begin,this.pause()}return Object(b.a)(t,[{key:"fire",value:function(t){var e=this[t];e&&e()}},{key:"setTime",value:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}},{key:"getTime",value:function(){return this._time}},{key:"setPosition",value:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}},{key:"getPosition",value:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}},{key:"play",value:function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}},{key:"reverse",value:function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}},{key:"seek",value:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}},{key:"reset",value:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")}},{key:"finish",value:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}},{key:"update",value:function(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}},{key:"onEnterFrame",value:function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)}},{key:"pause",value:function(){this.state=1,this.fire("onPause")}},{key:"getTimer",value:function(){return(new Date).getTime()}}]),t}(),ve=function(){function t(e){Object(v.a)(this,t);var n,r,i=this,a=e.node,o=a._id,s=e.easing||be.Linear,h=!!e.yoyo;n="undefined"===typeof e.duration?.3:0===e.duration?.001:e.duration,this.node=a,this._id=fe++;var l=a.getLayer()||(a instanceof x.Stage?a.getLayers():null);for(r in l||A.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new ue((function(){i.tween.onEnterFrame()}),l),this.tween=new ge(r,(function(t){i._tweenFunc(t)}),s,0,1,1e3*n,h),this._addListeners(),t.attrs[o]||(t.attrs[o]={}),t.attrs[o][this._id]||(t.attrs[o][this._id]={}),t.tweens[o]||(t.tweens[o]={}),e)void 0===de[r]&&this._addAttr(r,e[r]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}return Object(b.a)(t,[{key:"_addAttr",value:function(e,n){var r,i,a,o,s,h,l,c,u=this.node,d=u._id;if((a=t.tweens[d][e])&&delete t.attrs[d][a][e],r=u.getAttr(e),A._isArray(n))if(i=[],s=Math.max(n.length,r.length),"points"===e&&n.length!==r.length&&(n.length>r.length?(l=r,r=A._prepareArrayForTween(r,n,u.closed())):(h=n,n=A._prepareArrayForTween(n,r,u.closed()))),0===e.indexOf("fill"))for(o=0;o<s;o++)if(o%2===0)i.push(n[o]-r[o]);else{var f=A.colorToRGBA(r[o]);c=A.colorToRGBA(n[o]),r[o]=f,i.push({r:c.r-f.r,g:c.g-f.g,b:c.b-f.b,a:c.a-f.a})}else for(o=0;o<s;o++)i.push(n[o]-r[o]);else-1!==pe.indexOf(e)?(r=A.colorToRGBA(r),i={r:(c=A.colorToRGBA(n)).r-r.r,g:c.g-r.g,b:c.b-r.b,a:c.a-r.a}):i=n-r;t.attrs[d][this._id][e]={start:r,diff:i,end:n,trueEnd:h,trueStart:l},t.tweens[d][e]=this._id}},{key:"_tweenFunc",value:function(e){var n,r,i,a,o,s,h,l,c=this.node,u=t.attrs[c._id][this._id];for(n in u){if(i=(r=u[n]).start,a=r.diff,l=r.end,A._isArray(i))if(o=[],h=Math.max(i.length,l.length),0===n.indexOf("fill"))for(s=0;s<h;s++)s%2===0?o.push((i[s]||0)+a[s]*e):o.push("rgba("+Math.round(i[s].r+a[s].r*e)+","+Math.round(i[s].g+a[s].g*e)+","+Math.round(i[s].b+a[s].b*e)+","+(i[s].a+a[s].a*e)+")");else for(s=0;s<h;s++)o.push((i[s]||0)+a[s]*e);else o=-1!==pe.indexOf(n)?"rgba("+Math.round(i.r+a.r*e)+","+Math.round(i.g+a.g*e)+","+Math.round(i.b+a.b*e)+","+(i.a+a.a*e)+")":i+a*e;c.setAttr(n,o)}}},{key:"_addListeners",value:function(){var e=this;this.tween.onPlay=function(){e.anim.start()},this.tween.onReverse=function(){e.anim.start()},this.tween.onPause=function(){e.anim.stop()},this.tween.onFinish=function(){var n=e.node,r=t.attrs[n._id][e._id];r.points&&r.points.trueEnd&&n.setAttr("points",r.points.trueEnd),e.onFinish&&e.onFinish.call(e)},this.tween.onReset=function(){var n=e.node,r=t.attrs[n._id][e._id];r.points&&r.points.trueStart&&n.points(r.points.trueStart),e.onReset&&e.onReset()},this.tween.onUpdate=function(){e.onUpdate&&e.onUpdate.call(e)}}},{key:"play",value:function(){return this.tween.play(),this}},{key:"reverse",value:function(){return this.tween.reverse(),this}},{key:"reset",value:function(){return this.tween.reset(),this}},{key:"seek",value:function(t){return this.tween.seek(1e3*t),this}},{key:"pause",value:function(){return this.tween.pause(),this}},{key:"finish",value:function(){return this.tween.finish(),this}},{key:"destroy",value:function(){var e,n=this.node._id,r=this._id,i=t.tweens[n];for(e in this.pause(),i)delete t.tweens[n][e];delete t.attrs[n][r]}}]),t}();ve.attrs={},ve.tweens={},ft.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new ve(t).play()};var be={BackEaseIn:function(t,e,n,r){var i=1.70158;return n*(t/=r)*t*((i+1)*t-i)+e},BackEaseOut:function(t,e,n,r){var i=1.70158;return n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut:function(t,e,n,r){var i=1.70158;return(t/=r/2)<1?n/2*(t*t*((1+(i*=1.525))*t-i))+e:n/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e},ElasticEaseIn:function(t,e,n,r,i,a){var o=0;return 0===t?e:1===(t/=r)?e+n:(a||(a=.3*r),!i||i<Math.abs(n)?(i=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)+e)},ElasticEaseOut:function(t,e,n,r,i,a){var o=0;return 0===t?e:1===(t/=r)?e+n:(a||(a=.3*r),!i||i<Math.abs(n)?(i=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/a)+n+e)},ElasticEaseInOut:function(t,e,n,r,i,a){var o=0;return 0===t?e:2===(t/=r/2)?e+n:(a||(a=r*(.3*1.5)),!i||i<Math.abs(n)?(i=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)*-.5+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)*.5+n+e)},BounceEaseOut:function(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,n,r){return n-be.BounceEaseOut(r-t,0,n,r)+e},BounceEaseInOut:function(t,e,n,r){return t<r/2?.5*be.BounceEaseIn(2*t,0,n,r)+e:.5*be.BounceEaseOut(2*t-r,0,n,r)+.5*n+e},EaseIn:function(t,e,n,r){return n*(t/=r)*t+e},EaseOut:function(t,e,n,r){return-n*(t/=r)*(t-2)+e},EaseInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,n,r){return n*(t/=r)*t*t*t*t+e},StrongEaseOut:function(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,n,r){return n*t/r+e}},ye=A._assign(x,{Util:A,Transform:_,Node:ft,Container:gt,Stage:Kt,stages:Vt,Layer:se,FastLayer:he,Group:le,DD:Z,Shape:ie,shapes:re,Animation:ue,Tween:ve,Easings:be,Context:X,Canvas:V}),me=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){var e=x.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,n),t.arc(0,0,this.innerRadius(),e,0,!n),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.outerRadius()}},{key:"getHeight",value:function(){return 2*this.outerRadius()}},{key:"setWidth",value:function(t){this.outerRadius(t/2)}},{key:"setHeight",value:function(t){this.outerRadius(t/2)}}]),n}(ie);function xe(t,e,n,r,i,a,o){var s=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),h=Math.sqrt(Math.pow(i-n,2)+Math.pow(a-r,2)),l=o*s/(s+h),c=o*h/(s+h);return[n-l*(i-t),r-l*(a-e),n+c*(i-t),r+c*(a-e)]}function we(t,e){var n,r,i=t.length,a=[];for(n=2;n<i-2;n+=2)r=xe(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],e),isNaN(r[0])||(a.push(r[0]),a.push(r[1]),a.push(t[n]),a.push(t[n+1]),a.push(r[2]),a.push(r[3]));return a}me.prototype._centroid=!0,me.prototype.className="Arc",me.prototype._attrsAffectingSize=["innerRadius","outerRadius"],w(me),I.addGetterSetter(me,"innerRadius",0,M()),I.addGetterSetter(me,"outerRadius",0,M()),I.addGetterSetter(me,"angle",0,M()),I.addGetterSetter(me,"clockwise",!1,B());var _e=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this,t)).on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")})),r}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){var e,n,r,i=this.points(),a=i.length,o=this.tension(),s=this.closed(),h=this.bezier();if(a){if(t.beginPath(),t.moveTo(i[0],i[1]),0!==o&&a>4){for(n=(e=this.getTensionPoints()).length,r=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);r<n-2;)t.bezierCurveTo(e[r++],e[r++],e[r++],e[r++],e[r++],e[r++]);s||t.quadraticCurveTo(e[n-2],e[n-1],i[a-2],i[a-1])}else if(h)for(r=2;r<a;)t.bezierCurveTo(i[r++],i[r++],i[r++],i[r++],i[r++],i[r++]);else for(r=2;r<a;r+=2)t.lineTo(i[r],i[r+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}},{key:"getTensionPoints",value:function(){return this._getCache("tensionPoints",this._getTensionPoints)}},{key:"_getTensionPoints",value:function(){return this.closed()?this._getTensionPointsClosed():we(this.points(),this.tension())}},{key:"_getTensionPointsClosed",value:function(){var t=this.points(),e=t.length,n=this.tension(),r=xe(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),i=xe(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),a=we(t,n);return[r[2],r[3]].concat(a).concat([i[0],i[1],t[e-2],t[e-1],i[2],i[3],r[0],r[1],t[0],t[1]])}},{key:"getWidth",value:function(){return this.getSelfRect().width}},{key:"getHeight",value:function(){return this.getSelfRect().height}},{key:"getSelfRect",value:function(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,n,r=(t=0!==this.tension()?[t[0],t[1]].concat(Object(o.a)(this._getTensionPoints()),[t[t.length-2],t[t.length-1]]):this.points())[0],i=t[0],a=t[1],s=t[1],h=0;h<t.length/2;h++)e=t[2*h],n=t[2*h+1],r=Math.min(r,e),i=Math.max(i,e),a=Math.min(a,n),s=Math.max(s,n);return{x:r,y:a,width:i-r,height:s-a}}}]),n}(ie);_e.prototype.className="Line",_e.prototype._attrsAffectingSize=["points","bezier","tension"],w(_e),I.addGetterSetter(_e,"closed",!1),I.addGetterSetter(_e,"bezier",!1),I.addGetterSetter(_e,"tension",0,M()),I.addGetterSetter(_e,"points",[],function(){if(x.isUnminified)return function(t,e){return A._isArray(t)?t.forEach((function(t){A._isNumber(t)||A.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")})):A.warn(T(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}}());var ke=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(t){var r;Object(v.a)(this,n),(r=e.call(this,t)).dataArray=[],r.pathLength=0,r.dataArray=n.parsePathData(r.data()),r.pathLength=0;for(var i=0;i<r.dataArray.length;++i)r.pathLength+=r.dataArray[i].pathLength;return r.on("dataChange.konva",(function(){this.dataArray=n.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength})),r}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){var e=this.dataArray;t.beginPath();for(var n=!1,r=0;r<e.length;r++){var i=e[r].command,a=e[r].points;switch(i){case"L":t.lineTo(a[0],a[1]);break;case"M":t.moveTo(a[0],a[1]);break;case"C":t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"Q":t.quadraticCurveTo(a[0],a[1],a[2],a[3]);break;case"A":var o=a[0],s=a[1],h=a[2],l=a[3],c=a[4],u=a[5],d=a[6],f=a[7],p=h>l?h:l,g=h>l?1:h/l,v=h>l?l/h:1;t.translate(o,s),t.rotate(d),t.scale(g,v),t.arc(0,0,p,c,c+u,1-f),t.scale(1/g,1/v),t.rotate(-d),t.translate(-o,-s);break;case"z":n=!0,t.closePath()}}n||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)}},{key:"getSelfRect",value:function(){var t=[];this.dataArray.forEach((function(e){if("A"===e.command){var r=e.points[4],i=e.points[5],a=e.points[4]+i,o=Math.PI/180;if(Math.abs(r-a)<o&&(o=Math.abs(r-a)),i<0)for(var s=r-o;s>a;s-=o){var h=n.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],s,0);t.push(h.x,h.y)}else for(var l=r+o;l<a;l+=o){var c=n.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],l,0);t.push(c.x,c.y)}}else if("C"===e.command)for(var u=0;u<=1;u+=.01){var d=n.getPointOnCubicBezier(u,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);t.push(d.x,d.y)}else t=t.concat(e.points)}));for(var e,r,i=t[0],a=t[0],o=t[1],s=t[1],h=0;h<t.length/2;h++)e=t[2*h],r=t[2*h+1],isNaN(e)||(i=Math.min(i,e),a=Math.max(a,e)),isNaN(r)||(o=Math.min(o,r),s=Math.max(s,r));return{x:Math.round(i),y:Math.round(o),width:Math.round(a-i),height:Math.round(s-o)}}},{key:"getLength",value:function(){return this.pathLength}},{key:"getPointAtLength",value:function(t){var e,r=0,i=this.dataArray.length;if(!i)return null;for(;r<i&&t>this.dataArray[r].pathLength;)t-=this.dataArray[r].pathLength,++r;if(r===i)return{x:(e=this.dataArray[r-1].points.slice(-2))[0],y:e[1]};if(t<.01)return{x:(e=this.dataArray[r].points.slice(0,2))[0],y:e[1]};var a=this.dataArray[r],o=a.points;switch(a.command){case"L":return n.getPointOnLine(t,a.start.x,a.start.y,o[0],o[1]);case"C":return n.getPointOnCubicBezier(t/a.pathLength,a.start.x,a.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return n.getPointOnQuadraticBezier(t/a.pathLength,a.start.x,a.start.y,o[0],o[1],o[2],o[3]);case"A":var s=o[0],h=o[1],l=o[2],c=o[3],u=o[4],d=o[5],f=o[6];return u+=d*t/a.pathLength,n.getPointOnEllipticalArc(s,h,l,c,u,f)}return null}}],[{key:"getLineLength",value:function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))}},{key:"getPointOnLine",value:function(t,e,n,r,i,a,o){void 0===a&&(a=e),void 0===o&&(o=n);var s=(i-n)/(r-e+1e-8),h=Math.sqrt(t*t/(1+s*s));r<e&&(h*=-1);var l,c=s*h;if(r===e)l={x:a,y:o+c};else if((o-n)/(a-e+1e-8)===s)l={x:a+h,y:o+c};else{var u,d,f=this.getLineLength(e,n,r,i),p=(a-e)*(r-e)+(o-n)*(i-n);u=e+(p/=f*f)*(r-e),d=n+p*(i-n);var g=this.getLineLength(a,o,u,d),v=Math.sqrt(t*t-g*g);h=Math.sqrt(v*v/(1+s*s)),r<e&&(h*=-1),l={x:u+h,y:d+(c=s*h)}}return l}},{key:"getPointOnCubicBezier",value:function(t,e,n,r,i,a,o,s,h){function l(t){return t*t*t}function c(t){return 3*t*t*(1-t)}function u(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}return{x:s*l(t)+a*c(t)+r*u(t)+e*d(t),y:h*l(t)+o*c(t)+i*u(t)+n*d(t)}}},{key:"getPointOnQuadraticBezier",value:function(t,e,n,r,i,a,o){function s(t){return t*t}function h(t){return 2*t*(1-t)}function l(t){return(1-t)*(1-t)}return{x:a*s(t)+r*h(t)+e*l(t),y:o*s(t)+i*h(t)+n*l(t)}}},{key:"getPointOnEllipticalArc",value:function(t,e,n,r,i,a){var o=Math.cos(a),s=Math.sin(a),h=n*Math.cos(i),l=r*Math.sin(i);return{x:t+(h*o-l*s),y:e+(h*s+l*o)}}},{key:"parsePathData",value:function(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var r=0;r<n.length;r++)e=e.replace(new RegExp(n[r],"g"),"|"+n[r]);var i,a=e.split("|"),o=[],s=[],h=0,l=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(r=1;r<a.length;r++){var u=a[r],d=u.charAt(0);for(u=u.slice(1),s.length=0;i=c.exec(u);)s.push(i[0]);for(var f=[],p=0,g=s.length;p<g;p++)if("00"!==s[p]){var v=parseFloat(s[p]);isNaN(v)?f.push(0):f.push(v)}else f.push(0,0);for(;f.length>0&&!isNaN(f[0]);){var b,y,m,x,w,_,k,S,C,O,j=null,E=[],P=h,A=l;switch(d){case"l":h+=f.shift(),l+=f.shift(),j="L",E.push(h,l);break;case"L":h=f.shift(),l=f.shift(),E.push(h,l);break;case"m":var T=f.shift(),R=f.shift();if(h+=T,l+=R,j="M",o.length>2&&"z"===o[o.length-1].command)for(var M=o.length-2;M>=0;M--)if("M"===o[M].command){h=o[M].points[0]+T,l=o[M].points[1]+R;break}E.push(h,l),d="l";break;case"M":h=f.shift(),l=f.shift(),j="M",E.push(h,l),d="L";break;case"h":h+=f.shift(),j="L",E.push(h,l);break;case"H":h=f.shift(),j="L",E.push(h,l);break;case"v":l+=f.shift(),j="L",E.push(h,l);break;case"V":l=f.shift(),j="L",E.push(h,l);break;case"C":E.push(f.shift(),f.shift(),f.shift(),f.shift()),h=f.shift(),l=f.shift(),E.push(h,l);break;case"c":E.push(h+f.shift(),l+f.shift(),h+f.shift(),l+f.shift()),h+=f.shift(),l+=f.shift(),j="C",E.push(h,l);break;case"S":y=h,m=l,"C"===(b=o[o.length-1]).command&&(y=h+(h-b.points[2]),m=l+(l-b.points[3])),E.push(y,m,f.shift(),f.shift()),h=f.shift(),l=f.shift(),j="C",E.push(h,l);break;case"s":y=h,m=l,"C"===(b=o[o.length-1]).command&&(y=h+(h-b.points[2]),m=l+(l-b.points[3])),E.push(y,m,h+f.shift(),l+f.shift()),h+=f.shift(),l+=f.shift(),j="C",E.push(h,l);break;case"Q":E.push(f.shift(),f.shift()),h=f.shift(),l=f.shift(),E.push(h,l);break;case"q":E.push(h+f.shift(),l+f.shift()),h+=f.shift(),l+=f.shift(),j="Q",E.push(h,l);break;case"T":y=h,m=l,"Q"===(b=o[o.length-1]).command&&(y=h+(h-b.points[0]),m=l+(l-b.points[1])),h=f.shift(),l=f.shift(),j="Q",E.push(y,m,h,l);break;case"t":y=h,m=l,"Q"===(b=o[o.length-1]).command&&(y=h+(h-b.points[0]),m=l+(l-b.points[1])),h+=f.shift(),l+=f.shift(),j="Q",E.push(y,m,h,l);break;case"A":x=f.shift(),w=f.shift(),_=f.shift(),k=f.shift(),S=f.shift(),C=h,O=l,h=f.shift(),l=f.shift(),j="A",E=this.convertEndpointToCenterParameterization(C,O,h,l,k,S,x,w,_);break;case"a":x=f.shift(),w=f.shift(),_=f.shift(),k=f.shift(),S=f.shift(),C=h,O=l,h+=f.shift(),l+=f.shift(),j="A",E=this.convertEndpointToCenterParameterization(C,O,h,l,k,S,x,w,_)}o.push({command:j||d,points:E,start:{x:P,y:A},pathLength:this.calcLength(P,A,j||d,E)})}"z"!==d&&"Z"!==d||o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}},{key:"calcLength",value:function(t,e,r,i){var a,o,s,h,l=n;switch(r){case"L":return l.getLineLength(t,e,i[0],i[1]);case"C":for(a=0,o=l.getPointOnCubicBezier(0,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),h=.01;h<=1;h+=.01)s=l.getPointOnCubicBezier(h,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),a+=l.getLineLength(o.x,o.y,s.x,s.y),o=s;return a;case"Q":for(a=0,o=l.getPointOnQuadraticBezier(0,t,e,i[0],i[1],i[2],i[3]),h=.01;h<=1;h+=.01)s=l.getPointOnQuadraticBezier(h,t,e,i[0],i[1],i[2],i[3]),a+=l.getLineLength(o.x,o.y,s.x,s.y),o=s;return a;case"A":a=0;var c=i[4],u=i[5],d=i[4]+u,f=Math.PI/180;if(Math.abs(c-d)<f&&(f=Math.abs(c-d)),o=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),u<0)for(h=c-f;h>d;h-=f)s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),a+=l.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(h=c+f;h<d;h+=f)s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),a+=l.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],d,0),a+=l.getLineLength(o.x,o.y,s.x,s.y)}return 0}},{key:"convertEndpointToCenterParameterization",value:function(t,e,n,r,i,a,o,s,h){var l=h*(Math.PI/180),c=Math.cos(l)*(t-n)/2+Math.sin(l)*(e-r)/2,u=-1*Math.sin(l)*(t-n)/2+Math.cos(l)*(e-r)/2,d=c*c/(o*o)+u*u/(s*s);d>1&&(o*=Math.sqrt(d),s*=Math.sqrt(d));var f=Math.sqrt((o*o*(s*s)-o*o*(u*u)-s*s*(c*c))/(o*o*(u*u)+s*s*(c*c)));i===a&&(f*=-1),isNaN(f)&&(f=0);var p=f*o*u/s,g=f*-s*c/o,v=(t+n)/2+Math.cos(l)*p-Math.sin(l)*g,b=(e+r)/2+Math.sin(l)*p+Math.cos(l)*g,y=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},m=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e))},x=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(m(t,e))},w=x([1,0],[(c-p)/o,(u-g)/s]),_=[(c-p)/o,(u-g)/s],k=[(-1*c-p)/o,(-1*u-g)/s],S=x(_,k);return m(_,k)<=-1&&(S=Math.PI),m(_,k)>=1&&(S=0),0===a&&S>0&&(S-=2*Math.PI),1===a&&S<0&&(S+=2*Math.PI),[v,b,o,s,w,S,l,a]}}]),n}(ie);ke.prototype.className="Path",ke.prototype._attrsAffectingSize=["data"],w(ke),I.addGetterSetter(ke,"data");var Se=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){Object(c.a)(Object(u.a)(n.prototype),"_sceneFunc",this).call(this,t);var e=2*Math.PI,r=this.points(),i=r,a=0!==this.tension()&&r.length>4;a&&(i=this.getTensionPoints());var o,s,h=this.pointerLength(),l=r.length;if(a){var d=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[l-2],r[l-1]],f=ke.calcLength(i[i.length-4],i[i.length-3],"C",d),p=ke.getPointOnQuadraticBezier(Math.min(1,1-h/f),d[0],d[1],d[2],d[3],d[4],d[5]);o=r[l-2]-p.x,s=r[l-1]-p.y}else o=r[l-2]-r[l-4],s=r[l-1]-r[l-3];var g=(Math.atan2(s,o)+e)%e,v=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(r[l-2],r[l-1]),t.rotate(g),t.moveTo(0,0),t.lineTo(-h,v/2),t.lineTo(-h,-v/2),t.closePath(),t.restore()),this.pointerAtBeginning()&&(t.save(),t.translate(r[0],r[1]),a?(o=(i[0]+i[2])/2-r[0],s=(i[1]+i[3])/2-r[1]):(o=r[2]-r[0],s=r[3]-r[1]),t.rotate((Math.atan2(-s,-o)+e)%e),t.moveTo(0,0),t.lineTo(-h,v/2),t.lineTo(-h,-v/2),t.closePath(),t.restore());var b=this.dashEnabled();b&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),b&&(this.attrs.dashEnabled=!0)}},{key:"getSelfRect",value:function(){var t=Object(c.a)(Object(u.a)(n.prototype),"getSelfRect",this).call(this),e=this.pointerWidth()/2;return{x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e}}}]),n}(_e);Se.prototype.className="Arrow",w(Se),I.addGetterSetter(Se,"pointerLength",10,M()),I.addGetterSetter(Se,"pointerWidth",10,M()),I.addGetterSetter(Se,"pointerAtBeginning",!1),I.addGetterSetter(Se,"pointerAtEnding",!0);var Ce=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.radius()}},{key:"getHeight",value:function(){return 2*this.radius()}},{key:"setWidth",value:function(t){this.radius()!==t/2&&this.radius(t/2)}},{key:"setHeight",value:function(t){this.radius()!==t/2&&this.radius(t/2)}}]),n}(ie);Ce.prototype._centroid=!0,Ce.prototype.className="Circle",Ce.prototype._attrsAffectingSize=["radius"],w(Ce),I.addGetterSetter(Ce,"radius",0,M());var Oe=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){var e=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),e!==n&&t.scale(1,n/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.radiusX()}},{key:"getHeight",value:function(){return 2*this.radiusY()}},{key:"setWidth",value:function(t){this.radiusX(t/2)}},{key:"setHeight",value:function(t){this.radiusY(t/2)}}]),n}(ie);Oe.prototype.className="Ellipse",Oe.prototype._centroid=!0,Oe.prototype._attrsAffectingSize=["radiusX","radiusY"],w(Oe),I.addComponentsGetterSetter(Oe,"radius",["x","y"]),I.addGetterSetter(Oe,"radiusX",0,M()),I.addGetterSetter(Oe,"radiusY",0,M());var je=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this,t)).on("imageChange.konva",(function(){r._setImageLoad()})),r._setImageLoad(),r}return Object(b.a)(n,[{key:"_setImageLoad",value:function(){var t=this,e=this.image();e&&e.complete||e&&4===e.readyState||e&&e.addEventListener&&e.addEventListener("load",(function(){t._requestDraw()}))}},{key:"_useBufferCanvas",value:function(){return Object(c.a)(Object(u.a)(n.prototype),"_useBufferCanvas",this).call(this,!0)}},{key:"_sceneFunc",value:function(t){var e,n=this.getWidth(),r=this.getHeight(),i=this.attrs.image;if(i){var a=this.attrs.cropWidth,o=this.attrs.cropHeight;e=a&&o?[i,this.cropX(),this.cropY(),a,o,0,0,n,r]:[i,0,0,n,r]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)),i&&t.drawImage.apply(t,e)}},{key:"_hitFunc",value:function(t){var e=this.width(),n=this.height();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.width}},{key:"getHeight",value:function(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.height}}],[{key:"fromURL",value:function(t,e){var r=A.createImageElement();r.onload=function(){var t=new n({image:r});e(t)},r.crossOrigin="Anonymous",r.src=t}}]),n}(ie);je.prototype.className="Image",w(je),I.addGetterSetter(je,"image"),I.addComponentsGetterSetter(je,"crop",["x","y","width","height"]),I.addGetterSetter(je,"cropX",0,M()),I.addGetterSetter(je,"cropY",0,M()),I.addGetterSetter(je,"cropWidth",0,M()),I.addGetterSetter(je,"cropHeight",0,M());var Ee=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],Pe="up",Ae="right",Te="down",Re="left",Me=Ee.length,De=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this,t)).on("add.konva",(function(t){this._addListeners(t.child),this._sync()})),r}return Object(b.a)(n,[{key:"getText",value:function(){return this.find("Text")[0]}},{key:"getTag",value:function(){return this.find("Tag")[0]}},{key:"_addListeners",value:function(t){var e,n=this,r=function(){n._sync()};for(e=0;e<Me;e++)t.on(Ee[e]+"Change.konva",r)}},{key:"getWidth",value:function(){return this.getText().width()}},{key:"getHeight",value:function(){return this.getText().height()}},{key:"_sync",value:function(){var t,e,n,r,i,a,o,s=this.getText(),h=this.getTag();if(s&&h){switch(t=s.width(),e=s.height(),n=h.pointerDirection(),r=h.pointerWidth(),o=h.pointerHeight(),i=0,a=0,n){case Pe:i=t/2,a=-1*o;break;case Ae:i=t+r,a=e/2;break;case Te:i=t/2,a=e+o;break;case Re:i=-1*r,a=e/2}h.setAttrs({x:-1*i,y:-1*a,width:t,height:e}),s.setAttrs({x:-1*i,y:-1*a})}}}]),n}(le);De.prototype.className="Label",w(De);var Le=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){var e=this.width(),n=this.height(),r=this.pointerDirection(),i=this.pointerWidth(),a=this.pointerHeight(),o=this.cornerRadius(),s=0,h=0,l=0,c=0;"number"===typeof o?s=h=l=c=Math.min(o,e/2,n/2):(s=Math.min(o[0]||0,e/2,n/2),h=Math.min(o[1]||0,e/2,n/2),c=Math.min(o[2]||0,e/2,n/2),l=Math.min(o[3]||0,e/2,n/2)),t.beginPath(),t.moveTo(s,0),r===Pe&&(t.lineTo((e-i)/2,0),t.lineTo(e/2,-1*a),t.lineTo((e+i)/2,0)),t.lineTo(e-h,0),t.arc(e-h,h,h,3*Math.PI/2,0,!1),r===Ae&&(t.lineTo(e,(n-a)/2),t.lineTo(e+i,n/2),t.lineTo(e,(n+a)/2)),t.lineTo(e,n-c),t.arc(e-c,n-c,c,0,Math.PI/2,!1),r===Te&&(t.lineTo((e+i)/2,n),t.lineTo(e/2,n+a),t.lineTo((e-i)/2,n)),t.lineTo(l,n),t.arc(l,n-l,l,Math.PI/2,Math.PI,!1),r===Re&&(t.lineTo(0,(n+a)/2),t.lineTo(-1*i,n/2),t.lineTo(0,(n-a)/2)),t.lineTo(0,s),t.arc(s,s,s,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)}},{key:"getSelfRect",value:function(){var t=0,e=0,n=this.pointerWidth(),r=this.pointerHeight(),i=this.pointerDirection(),a=this.width(),o=this.height();return i===Pe?(e-=r,o+=r):i===Te?o+=r:i===Re?(t-=1.5*n,a+=n):i===Ae&&(a+=1.5*n),{x:t,y:e,width:a,height:o}}}]),n}(ie);Le.prototype.className="Tag",w(Le),I.addGetterSetter(Le,"pointerDirection","none"),I.addGetterSetter(Le,"pointerWidth",0,M()),I.addGetterSetter(Le,"pointerHeight",0,M()),I.addGetterSetter(Le,"cornerRadius",0,D(4));var Fe=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){var e=this.cornerRadius(),n=this.width(),r=this.height();if(t.beginPath(),e){var i=0,a=0,o=0,s=0;"number"===typeof e?i=a=o=s=Math.min(e,n/2,r/2):(i=Math.min(e[0]||0,n/2,r/2),a=Math.min(e[1]||0,n/2,r/2),s=Math.min(e[2]||0,n/2,r/2),o=Math.min(e[3]||0,n/2,r/2)),t.moveTo(i,0),t.lineTo(n-a,0),t.arc(n-a,a,a,3*Math.PI/2,0,!1),t.lineTo(n,r-s),t.arc(n-s,r-s,s,0,Math.PI/2,!1),t.lineTo(o,r),t.arc(o,r-o,o,Math.PI/2,Math.PI,!1),t.lineTo(0,i),t.arc(i,i,i,Math.PI,3*Math.PI/2,!1)}else t.rect(0,0,n,r);t.closePath(),t.fillStrokeShape(this)}}]),n}(ie);Fe.prototype.className="Rect",w(Fe),I.addGetterSetter(Fe,"cornerRadius",0,D(4));var Ge=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){var e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.closePath(),t.fillStrokeShape(this)}},{key:"_getPoints",value:function(){for(var t=this.attrs.sides,e=this.attrs.radius||0,n=[],r=0;r<t;r++)n.push({x:e*Math.sin(2*r*Math.PI/t),y:-1*e*Math.cos(2*r*Math.PI/t)});return n}},{key:"getSelfRect",value:function(){var t=this._getPoints(),e=t[0].x,n=t[0].y,r=t[0].x,i=t[0].y;return t.forEach((function(t){e=Math.min(e,t.x),n=Math.max(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.y)})),{x:e,y:r,width:n-e,height:i-r}}},{key:"getWidth",value:function(){return 2*this.radius()}},{key:"getHeight",value:function(){return 2*this.radius()}},{key:"setWidth",value:function(t){this.radius(t/2)}},{key:"setHeight",value:function(t){this.radius(t/2)}}]),n}(ie);Ge.prototype.className="RegularPolygon",Ge.prototype._centroid=!0,Ge.prototype._attrsAffectingSize=["radius"],w(Ge),I.addGetterSetter(Ge,"radius",0,M()),I.addGetterSetter(Ge,"sides",0,M());var Be=2*Math.PI,ze=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Be,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Be,0,!0),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.outerRadius()}},{key:"getHeight",value:function(){return 2*this.outerRadius()}},{key:"setWidth",value:function(t){this.outerRadius(t/2)}},{key:"setHeight",value:function(t){this.outerRadius(t/2)}}]),n}(ie);ze.prototype.className="Ring",ze.prototype._centroid=!0,ze.prototype._attrsAffectingSize=["innerRadius","outerRadius"],w(ze),I.addGetterSetter(ze,"innerRadius",0,M()),I.addGetterSetter(ze,"outerRadius",0,M());var Ne=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this,t))._updated=!0,r.anim=new ue((function(){var t=r._updated;return r._updated=!1,t})),r.on("animationChange.konva",(function(){this.frameIndex(0)})),r.on("frameIndexChange.konva",(function(){this._updated=!0})),r.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})),r}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){var e=this.animation(),n=this.frameIndex(),r=4*n,i=this.animations()[e],a=this.frameOffsets(),o=i[r+0],s=i[r+1],h=i[r+2],l=i[r+3],c=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,l),t.closePath(),t.fillStrokeShape(this)),c)if(a){var u=a[e],d=2*n;t.drawImage(c,o,s,h,l,u[d+0],u[d+1],h,l)}else t.drawImage(c,o,s,h,l,0,0,h,l)}},{key:"_hitFunc",value:function(t){var e=this.animation(),n=this.frameIndex(),r=4*n,i=this.animations()[e],a=this.frameOffsets(),o=i[r+2],s=i[r+3];if(t.beginPath(),a){var h=a[e],l=2*n;t.rect(h[l+0],h[l+1],o,s)}else t.rect(0,0,o,s);t.closePath(),t.fillShape(this)}},{key:"_useBufferCanvas",value:function(){return Object(c.a)(Object(u.a)(n.prototype),"_useBufferCanvas",this).call(this,!0)}},{key:"_setInterval",value:function(){var t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())}},{key:"start",value:function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}},{key:"stop",value:function(){this.anim.stop(),clearInterval(this.interval)}},{key:"isRunning",value:function(){return this.anim.isRunning()}},{key:"_updateIndex",value:function(){var t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)}}]),n}(ie);Ne.prototype.className="Sprite",w(Ne),I.addGetterSetter(Ne,"animation"),I.addGetterSetter(Ne,"animations"),I.addGetterSetter(Ne,"frameOffsets"),I.addGetterSetter(Ne,"image"),I.addGetterSetter(Ne,"frameIndex",0,M()),I.addGetterSetter(Ne,"frameRate",17,M()),I.backCompat(Ne,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Ie=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){var e=this.innerRadius(),n=this.outerRadius(),r=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(var i=1;i<2*r;i++){var a=i%2===0?n:e,o=a*Math.sin(i*Math.PI/r),s=-1*a*Math.cos(i*Math.PI/r);t.lineTo(o,s)}t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.outerRadius()}},{key:"getHeight",value:function(){return 2*this.outerRadius()}},{key:"setWidth",value:function(t){this.outerRadius(t/2)}},{key:"setHeight",value:function(t){this.outerRadius(t/2)}}]),n}(ie);function He(t){return Array.from(t)}Ie.prototype.className="Star",Ie.prototype._centroid=!0,Ie.prototype._attrsAffectingSize=["innerRadius","outerRadius"],w(Ie),I.addGetterSetter(Ie,"numPoints",5,M()),I.addGetterSetter(Ie,"innerRadius",0,M()),I.addGetterSetter(Ie,"outerRadius",0,M());var We,Xe="auto",Ue="justify",Ye="left",qe="middle",Ve="normal",Ke=" ",$e=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Ze=$e.length;function Qe(){return We||(We=A.createCanvasElement().getContext("2d"))}var Je=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(t){var r;Object(v.a)(this,n),r=e.call(this,function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(t)),r._partialTextX=0,r._partialTextY=0;for(var i=0;i<Ze;i++)r.on($e[i]+"Change.konva",r._setTextData);return r._setTextData(),r}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){var e=this.textArr,n=e.length;if(this.text()){var r,i=this.padding(),a=this.fontSize(),o=this.lineHeight()*a,s=this.verticalAlign(),h=0,l=this.align(),c=this.getWidth(),u=this.letterSpacing(),d=this.fill(),f=this.textDecoration(),p=-1!==f.indexOf("underline"),g=-1!==f.indexOf("line-through"),v=0,b=(v=o/2,0),y=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",qe),t.setAttr("textAlign",Ye),s===qe?h=(this.getHeight()-n*o-2*i)/2:"bottom"===s&&(h=this.getHeight()-n*o-2*i),t.translate(i,h+i),r=0;r<n;r++){b=0,y=0;var m,x,w,_=e[r],k=_.text,S=_.width,C=r!==n-1;if(t.save(),"right"===l?b+=c-S-2*i:"center"===l&&(b+=(c-S-2*i)/2),p&&(t.save(),t.beginPath(),t.moveTo(b,v+y+Math.round(a/2)),x=0===(m=k.split(" ").length-1),w=l===Ue&&C&&!x?c-2*i:S,t.lineTo(b+Math.round(w),v+y+Math.round(a/2)),t.lineWidth=a/15,t.strokeStyle=d,t.stroke(),t.restore()),g&&(t.save(),t.beginPath(),t.moveTo(b,v+y),x=0===(m=k.split(" ").length-1),w=l===Ue&&C&&!x?c-2*i:S,t.lineTo(b+Math.round(w),v+y),t.lineWidth=a/15,t.strokeStyle=d,t.stroke(),t.restore()),0!==u||l===Ue){m=k.split(" ").length-1;for(var O=He(k),j=0;j<O.length;j++){var E=O[j];" "===E&&r!==n-1&&l===Ue&&(b+=(c-2*i-S)/m),this._partialTextX=b,this._partialTextY=v+y,this._partialText=E,t.fillStrokeShape(this),b+=this.measureSize(E).width+u}}else this._partialTextX=b,this._partialTextY=v+y,this._partialText=k,t.fillStrokeShape(this);t.restore(),n>1&&(v+=o)}}}},{key:"_hitFunc",value:function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)}},{key:"setText",value:function(t){var e=A._isString(t)?t:null===t||void 0===t?"":t+"";return this._setAttr("text",e),this}},{key:"getWidth",value:function(){return this.attrs.width===Xe||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}},{key:"getHeight",value:function(){return this.attrs.height===Xe||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}},{key:"getTextWidth",value:function(){return this.textWidth}},{key:"getTextHeight",value:function(){return A.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}},{key:"measureSize",value:function(t){var e,n=Qe(),r=this.fontSize();return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:r}}},{key:"_getContextFont",value:function(){return this.fontStyle()+Ke+this.fontVariant()+Ke+(this.fontSize()+"px ")+this.fontFamily().split(",").map((function(t){var e=(t=t.trim()).indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!n&&(t='"'.concat(t,'"')),t})).join(", ")}},{key:"_addTextLine",value:function(t){this.align()===Ue&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e})}},{key:"_getTextWidth",value:function(t){var e=this.letterSpacing(),n=t.length;return Qe().measureText(t).width+(n?e*(n-1):0)}},{key:"_setTextData",value:function(){var t=this.text().split("\n"),e=+this.fontSize(),n=0,r=this.lineHeight()*e,i=this.attrs.width,a=this.attrs.height,o=i!==Xe&&void 0!==i,s=a!==Xe&&void 0!==a,h=this.padding(),l=i-2*h,c=a-2*h,u=0,d=this.wrap(),f="none"!==d,p="char"!==d&&f,g=this.ellipsis();this.textArr=[],Qe().font=this._getContextFont();for(var v=g?this._getTextWidth("\u2026"):0,b=0,y=t.length;b<y;++b){var m=t[b],x=this._getTextWidth(m);if(o&&x>l)for(;m.length>0;){for(var w=0,_=m.length,k="",S=0;w<_;){var C=w+_>>>1,O=m.slice(0,C+1),j=this._getTextWidth(O)+v;j<=l?(w=C+1,k=O,S=j):_=C}if(!k)break;if(p){var E,P=m[k.length];(E=(P===Ke||"-"===P)&&S<=l?k.length:Math.max(k.lastIndexOf(Ke),k.lastIndexOf("-"))+1)>0&&(w=E,k=k.slice(0,w),S=this._getTextWidth(k))}if(k=k.trimRight(),this._addTextLine(k),n=Math.max(n,S),u+=r,!f||s&&u+r>c){var A=this.textArr[this.textArr.length-1];if(A)if(g)this._getTextWidth(A.text+"\u2026")<l||(A.text=A.text.slice(0,A.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(A.text+"\u2026");break}if((m=(m=m.slice(w)).trimLeft()).length>0&&(x=this._getTextWidth(m))<=l){this._addTextLine(m),u+=r,n=Math.max(n,x);break}}else this._addTextLine(m),u+=r,n=Math.max(n,x);if(s&&u+r>c)break}this.textHeight=e,this.textWidth=n}},{key:"getStrokeScaleEnabled",value:function(){return!0}}]),n}(ie);Je.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},Je.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},Je.prototype.className="Text",Je.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],w(Je),I.overWriteSetter(Je,"width",L()),I.overWriteSetter(Je,"height",L()),I.addGetterSetter(Je,"fontFamily","Arial"),I.addGetterSetter(Je,"fontSize",12,M()),I.addGetterSetter(Je,"fontStyle",Ve),I.addGetterSetter(Je,"fontVariant",Ve),I.addGetterSetter(Je,"padding",0,M()),I.addGetterSetter(Je,"align",Ye),I.addGetterSetter(Je,"verticalAlign","top"),I.addGetterSetter(Je,"lineHeight",1,M()),I.addGetterSetter(Je,"wrap","word"),I.addGetterSetter(Je,"ellipsis",!1,B()),I.addGetterSetter(Je,"letterSpacing",0,M()),I.addGetterSetter(Je,"text","",F()),I.addGetterSetter(Je,"textDecoration","");var tn="normal";function en(t){t.fillText(this.partialText,0,0)}function nn(t){t.strokeText(this.partialText,0,0)}var rn=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this,t)).dummyCanvas=A.createCanvasElement(),r.dataArray=[],r.dataArray=ke.parsePathData(r.attrs.data),r.on("dataChange.konva",(function(){this.dataArray=ke.parsePathData(this.attrs.data),this._setTextData()})),r.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva",r._setTextData),r._setTextData(),r}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),n=this.fill(),r=this.fontSize(),i=this.glyphInfo;"underline"===e&&t.beginPath();for(var a=0;a<i.length;a++){t.save();var o=i[a].p0;t.translate(o.x,o.y),t.rotate(i[a].rotation),this.partialText=i[a].text,t.fillStrokeShape(this),"underline"===e&&(0===a&&t.moveTo(0,r/2+1),t.lineTo(r,r/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=n,t.lineWidth=r/20,t.stroke()),t.restore()}},{key:"_hitFunc",value:function(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var n=e[0].p0;t.moveTo(n.x,n.y)}for(var r=0;r<e.length;r++){var i=e[r].p1;t.lineTo(i.x,i.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}},{key:"getTextWidth",value:function(){return this.textWidth}},{key:"getTextHeight",value:function(){return A.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}},{key:"setText",value:function(t){return Je.prototype.setText.call(this,t)}},{key:"_getContextFont",value:function(){return Je.prototype._getContextFont.call(this)}},{key:"_getTextSize",value:function(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var n=e.measureText(t);return e.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}}},{key:"_setTextData",value:function(){var t=this,e=this._getTextSize(this.attrs.text),n=this.letterSpacing(),r=this.align(),i=this.kerningFunc();this.textWidth=e.width,this.textHeight=e.height;var a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);this.glyphInfo=[];for(var o=0,s=0;s<t.dataArray.length;s++)t.dataArray[s].pathLength>0&&(o+=t.dataArray[s].pathLength);var h=0;"center"===r&&(h=Math.max(0,o/2-a/2)),"right"===r&&(h=Math.max(0,o-a));for(var l,c,u,d=He(this.text()),f=this.text().split(" ").length-1,p=-1,g=0,v=function(){g=0;for(var e=t.dataArray,n=p+1;n<e.length;n++){if(e[n].pathLength>0)return p=n,e[n];"M"===e[n].command&&(l={x:e[n].points[0],y:e[n].points[1]})}return{}},b=function(e){var i=t._getTextSize(e).width+n;" "===e&&"justify"===r&&(i+=(o-a)/f);var s=0,h=0;for(c=void 0;Math.abs(i-s)/i>.01&&h<20;){h++;for(var d=s;void 0===u;)(u=v())&&d+u.pathLength<i&&(d+=u.pathLength,u=void 0);if(u==={}||void 0===l)return;var p=!1;switch(u.command){case"L":ke.getLineLength(l.x,l.y,u.points[0],u.points[1])>i?c=ke.getPointOnLine(i,l.x,l.y,u.points[0],u.points[1],l.x,l.y):u=void 0;break;case"A":var b=u.points[4],y=u.points[5],m=u.points[4]+y;0===g?g=b+1e-8:i>s?g+=Math.PI/180*y/Math.abs(y):g-=Math.PI/360*y/Math.abs(y),(y<0&&g<m||y>=0&&g>m)&&(g=m,p=!0),c=ke.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],g,u.points[6]);break;case"C":0===g?g=i>u.pathLength?1e-8:i/u.pathLength:i>s?g+=(i-s)/u.pathLength/2:g=Math.max(g-(s-i)/u.pathLength/2,0),g>1&&(g=1,p=!0),c=ke.getPointOnCubicBezier(g,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);break;case"Q":0===g?g=i/u.pathLength:i>s?g+=(i-s)/u.pathLength:g-=(s-i)/u.pathLength,g>1&&(g=1,p=!0),c=ke.getPointOnQuadraticBezier(g,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3])}void 0!==c&&(s=ke.getLineLength(l.x,l.y,c.x,c.y)),p&&(p=!1,u=void 0)}},y=h/(t._getTextSize("C").width+n)-1,m=0;m<y&&(b("C"),void 0!==l&&void 0!==c);m++)l=c;for(var x=0;x<d.length&&(b(d[x]),void 0!==l&&void 0!==c);x++){var w=ke.getLineLength(l.x,l.y,c.x,c.y),_=0;if(i)try{_=i(d[x-1],d[x])*this.fontSize()}catch(C){_=0}l.x+=_,c.x+=_,this.textWidth+=_;var k=ke.getPointOnLine(_+w/2,l.x,l.y,c.x,c.y),S=Math.atan2(c.y-l.y,c.x-l.x);this.glyphInfo.push({transposeX:k.x,transposeY:k.y,text:d[x],rotation:S,p0:l,p1:c}),l=c}}},{key:"getSelfRect",value:function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach((function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)}));for(var e,n,r=t[0]||0,i=t[0]||0,a=t[1]||0,o=t[1]||0,s=0;s<t.length/2;s++)e=t[2*s],n=t[2*s+1],r=Math.min(r,e),i=Math.max(i,e),a=Math.min(a,n),o=Math.max(o,n);var h=this.fontSize();return{x:r-h/2,y:a-h/2,width:i-r+h,height:o-a+h}}}]),n}(ie);rn.prototype._fillFunc=en,rn.prototype._strokeFunc=nn,rn.prototype._fillFuncHit=en,rn.prototype._strokeFuncHit=nn,rn.prototype.className="TextPath",rn.prototype._attrsAffectingSize=["text","fontSize","data"],w(rn),I.addGetterSetter(rn,"data"),I.addGetterSetter(rn,"fontFamily","Arial"),I.addGetterSetter(rn,"fontSize",12,M()),I.addGetterSetter(rn,"fontStyle",tn),I.addGetterSetter(rn,"align","left"),I.addGetterSetter(rn,"letterSpacing",0,M()),I.addGetterSetter(rn,"textBaseline","middle"),I.addGetterSetter(rn,"fontVariant",tn),I.addGetterSetter(rn,"text",""),I.addGetterSetter(rn,"textDecoration",null),I.addGetterSetter(rn,"kerningFunc",null);var an="tr-konva",on=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map((function(t){return t+".".concat(an)})).join(" "),sn="nodesRect",hn=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map((function(t){return t+".".concat(an)})).join(" "),ln={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},cn="ontouchstart"in x._global;var un=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function dn(t,e,n){var r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),i=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return Object.assign(Object.assign({},t),{rotation:t.rotation+e,x:r,y:i})}function fn(t,e){var n=function(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}(t);return dn(t,e,n)}var pn=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this,t))._transforming=!1,r._createElements(),r._handleMouseMove=r._handleMouseMove.bind(Object(d.a)(r)),r._handleMouseUp=r._handleMouseUp.bind(Object(d.a)(r)),r.update=r.update.bind(Object(d.a)(r)),r.on(on,r.update),r.getNode()&&r.update(),r}return Object(b.a)(n,[{key:"attachTo",value:function(t){return this.setNode(t),this}},{key:"setNode",value:function(t){return A.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}},{key:"getNode",value:function(){return this._nodes&&this._nodes[0]}},{key:"setNodes",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._nodes&&this._nodes.length&&this.detach(),this._nodes=e,1===e.length&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach((function(e){var n=e._attrsAffectingSize.map((function(t){return t+"Change."+an})).join(" "),r=function(){1===t.nodes().length&&t.useSingleNodeRotation()&&t.rotation(t.nodes()[0].getAbsoluteRotation()),t._resetTransformCache(),t._transforming||t.isDragging()||t.update()};e.on(n,r),e.on(hn,r),e.on("absoluteTransformChange.".concat(an),r),e.on("xChange.".concat(an," yChange.").concat(an),r),t._proxyDrag(e)})),this._resetTransformCache();var n=!!this.findOne(".top-left");return n&&this.update(),this}},{key:"_proxyDrag",value:function(t){var e,n=this;t.on("dragstart.".concat(an),(function(r){e=t.getAbsolutePosition(),n.isDragging()||t===n.findOne(".back")||n.startDrag(r,!1)})),t.on("dragmove.".concat(an),(function(r){if(e){var i=t.getAbsolutePosition(),a=i.x-e.x,o=i.y-e.y;n.nodes().forEach((function(e){if(e!==t&&!e.isDragging()){var n=e.getAbsolutePosition();e.setAbsolutePosition({x:n.x+a,y:n.y+o}),e.startDrag(r)}})),e=null}}))}},{key:"getNodes",value:function(){return this._nodes||[]}},{key:"getActiveAnchor",value:function(){return this._movingAnchorName}},{key:"detach",value:function(){this._nodes&&this._nodes.forEach((function(t){t.off(".tr-konva")})),this._nodes=[],this._resetTransformCache()}},{key:"_resetTransformCache",value:function(){this._clearCache(sn),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}},{key:"_getNodeRect",value:function(){return this._getCache(sn,this.__getNodeRect)}},{key:"__getNodeShape",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotation(),n=arguments.length>2?arguments[2]:void 0,r=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),i=t.getAbsoluteScale(n),a=t.getAbsolutePosition(n),o=r.x*i.x-t.offsetX()*i.x,s=r.y*i.y-t.offsetY()*i.y,h=(x.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI),l={x:a.x+o*Math.cos(h)+s*Math.sin(-h),y:a.y+s*Math.cos(h)+o*Math.sin(h),width:r.width*i.x,height:r.height*i.y,rotation:h};return dn(l,-x.getAngle(e),{x:0,y:0})}},{key:"__getNodeRect",value:function(){var t=this;if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};var e=[];this.nodes().map((function(n){var r=n.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:t.ignoreStroke()}),i=[{x:r.x,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x+r.width,y:r.y+r.height},{x:r.x,y:r.y+r.height}],a=n.getAbsoluteTransform();i.forEach((function(t){var n=a.point(t);e.push(n)}))}));var n,r,i,a,o=new _;o.rotate(-x.getAngle(this.rotation())),e.forEach((function(t){var e=o.point(t);void 0===n&&(n=i=e.x,r=a=e.y),n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),a=Math.max(a,e.y)})),o.invert();var s=o.point({x:n,y:r});return{x:s.x,y:s.y,width:i-n,height:a-r,rotation:x.getAngle(this.rotation())}}},{key:"getX",value:function(){return this._getNodeRect().x}},{key:"getY",value:function(){return this._getNodeRect().y}},{key:"getWidth",value:function(){return this._getNodeRect().width}},{key:"getHeight",value:function(){return this._getNodeRect().height}},{key:"_createElements",value:function(){this._createBack(),un.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")}},{key:"_createAnchor",value:function(t){var e=this,n=new Fe({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:cn?10:"auto"}),r=this;n.on("mousedown touchstart",(function(t){r._handleMouseDown(t)})),n.on("dragstart",(function(t){n.stopDrag(),t.cancelBubble=!0})),n.on("dragend",(function(t){t.cancelBubble=!0})),n.on("mouseenter",(function(){var r=x.getAngle(e.rotation()),i=function(t,e){if("rotater"===t)return"crosshair";e+=A.degToRad(ln[t]||0);var n=(A.radToDeg(e)%360+360)%360;return A._inRange(n,337.5,360)||A._inRange(n,0,22.5)?"ns-resize":A._inRange(n,22.5,67.5)?"nesw-resize":A._inRange(n,67.5,112.5)?"ew-resize":A._inRange(n,112.5,157.5)?"nwse-resize":A._inRange(n,157.5,202.5)?"ns-resize":A._inRange(n,202.5,247.5)?"nesw-resize":A._inRange(n,247.5,292.5)?"ew-resize":A._inRange(n,292.5,337.5)?"nwse-resize":(A.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}(t,r);n.getStage().content&&(n.getStage().content.style.cursor=i),e._cursorChange=!0})),n.on("mouseout",(function(){n.getStage().content&&(n.getStage().content.style.cursor=""),e._cursorChange=!1})),this.add(n)}},{key:"_createBack",value:function(){var t=this,e=new ie({name:"back",width:0,height:0,draggable:!0,sceneFunc:function(t){var e=this.getParent(),n=e.padding();t.beginPath(),t.rect(-n,-n,this.width()+2*n,this.height()+2*n),t.moveTo(this.width()/2,-n),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateAnchorOffset()*A._sign(this.height())-n),t.fillStrokeShape(this)},hitFunc:function(e,n){if(t.shouldOverdrawWholeArea()){var r=t.padding();e.beginPath(),e.rect(-r,-r,n.width()+2*r,n.height()+2*r),e.fillStrokeShape(n)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",(function(t){t.cancelBubble=!0})),e.on("dragmove",(function(t){t.cancelBubble=!0})),e.on("dragend",(function(t){t.cancelBubble=!0})),this.on("dragmove",(function(e){t.update()}))}},{key:"_handleMouseDown",value:function(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,r=e.height,i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=Math.abs(r/i),this.cos=Math.abs(n/i),"undefined"!==typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var a=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-a.x,y:o.y-a.y},this._fire("transformstart",{evt:t,target:this.getNode()}),this._nodes.forEach((function(e){e._fire("transformstart",{evt:t,target:e})}))}},{key:"_handleMouseMove",value:function(t){var e,n,r,i=this.findOne("."+this._movingAnchorName),a=i.getStage();a.setPointersPositions(t);var o=a.getPointerPosition(),s={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y},h=i.getAbsolutePosition();i.setAbsolutePosition(s);var l=i.getAbsolutePosition();if(h.x!==l.x||h.y!==l.y)if("rotater"!==this._movingAnchorName){var c=this.keepRatio()||t.shiftKey,u=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(c){var d=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(d.x-i.x(),2)+Math.pow(d.y-i.y(),2));var f=this.findOne(".top-left").x()>d.x?-1:1,p=this.findOne(".top-left").y()>d.y?-1:1;e=r*this.cos*f,n=r*this.sin*p,this.findOne(".top-left").x(d.x-e),this.findOne(".top-left").y(d.y-n)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(i.y());else if("top-right"===this._movingAnchorName){if(c){d=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(i.x()-d.x,2)+Math.pow(d.y-i.y(),2));f=this.findOne(".top-right").x()<d.x?-1:1,p=this.findOne(".top-right").y()>d.y?-1:1;e=r*this.cos*f,n=r*this.sin*p,this.findOne(".top-right").x(d.x+e),this.findOne(".top-right").y(d.y-n)}var g=i.position();this.findOne(".top-left").y(g.y),this.findOne(".bottom-right").x(g.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(i.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(i.x());else if("bottom-left"===this._movingAnchorName){if(c){d=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(d.x-i.x(),2)+Math.pow(i.y()-d.y,2));f=d.x<i.x()?-1:1,p=i.y()<d.y?-1:1;e=r*this.cos*f,n=r*this.sin*p,i.x(d.x-e),i.y(d.y+n)}g=i.position(),this.findOne(".top-left").x(g.x),this.findOne(".bottom-right").y(g.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(i.y());else if("bottom-right"===this._movingAnchorName){if(c){d=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(i.x()-d.x,2)+Math.pow(i.y()-d.y,2));f=this.findOne(".bottom-right").x()<d.x?-1:1,p=this.findOne(".bottom-right").y()<d.y?-1:1;e=r*this.cos*f,n=r*this.sin*p,this.findOne(".bottom-right").x(d.x+e),this.findOne(".bottom-right").y(d.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(u=this.centeredScaling()||t.altKey){var v=this.findOne(".top-left"),b=this.findOne(".bottom-right"),y=v.x(),m=v.y(),w=this.getWidth()-b.x(),_=this.getHeight()-b.y();b.move({x:-y,y:-m}),v.move({x:w,y:_})}var k=this.findOne(".top-left").getAbsolutePosition();e=k.x,n=k.y;var S=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),C=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:n,width:S,height:C,rotation:x.getAngle(this.rotation())},t)}else{var O=this._getNodeRect();e=i.x()-O.width/2,n=-i.y()+O.height/2;var j=Math.atan2(-n,e)+Math.PI/2;O.height<0&&(j-=Math.PI);var E=x.getAngle(this.rotation())+j,P=x.getAngle(this.rotationSnapTolerance()),A=function(t,e,n){for(var r=e,i=0;i<t.length;i++){var a=x.getAngle(t[i]),o=Math.abs(a-e)%(2*Math.PI);Math.min(o,2*Math.PI-o)<n&&(r=a)}return r}(this.rotationSnaps(),E,P),T=fn(O,A-O.rotation);this._fitNodesInto(T,t)}}},{key:"_handleMouseUp",value:function(t){this._removeEvents(t)}},{key:"getAbsoluteTransform",value:function(){return this.getTransform()}},{key:"_removeEvents",value:function(t){if(this._transforming){this._transforming=!1,"undefined"!==typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach((function(e){e._fire("transformend",{evt:t,target:e})})),this._movingAnchorName=null}}},{key:"_fitNodesInto",value:function(t,e){var n=this,r=this._getNodeRect();if(A._inRange(t.width,2*-this.padding()-1,1))this.update();else if(A._inRange(t.height,2*-this.padding()-1,1))this.update();else{var i=this.flipEnabled(),a=new _;if(a.rotate(x.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){var o=a.point({x:2*-this.padding(),y:0});if(t.x+=o.x,t.y+=o.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=o.x,this._anchorDragOffset.y-=o.y,!i)return void this.update()}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){var s=a.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=s.x,this._anchorDragOffset.y-=s.y,t.width+=2*this.padding(),!i)return void this.update()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){var h=a.point({x:0,y:2*-this.padding()});if(t.x+=h.x,t.y+=h.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=h.x,this._anchorDragOffset.y-=h.y,t.height+=2*this.padding(),!i)return void this.update()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){var l=a.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y,t.height+=2*this.padding(),!i)return void this.update()}if(this.boundBoxFunc()){var c=this.boundBoxFunc()(r,t);c?t=c:A.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}var u=1e7,d=new _;d.translate(r.x,r.y),d.rotate(r.rotation),d.scale(r.width/u,r.height/u);var f=new _;f.translate(t.x,t.y),f.rotate(t.rotation),f.scale(t.width/u,t.height/u);var p=f.multiply(d.invert());this._nodes.forEach((function(t){var r,i=t.getParent().getAbsoluteTransform(),a=t.getTransform().copy();a.translate(t.offsetX(),t.offsetY());var o=new _;o.multiply(i.copy().invert()).multiply(p).multiply(i).multiply(a);var s=o.decompose();t.setAttrs(s),n._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t}),null===(r=t.getLayer())||void 0===r||r.batchDraw()})),this.rotation(A._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}}},{key:"forceUpdate",value:function(){this._resetTransformCache(),this.update()}},{key:"_batchChangeChild",value:function(t,e){this.findOne(t).setAttrs(e)}},{key:"update",value:function(){var t,e=this,n=this._getNodeRect();this.rotation(A._getRotation(n.rotation));var r=n.width,i=n.height,a=this.enabledAnchors(),o=this.resizeEnabled(),s=this.padding(),h=this.anchorSize();this.find("._anchor").forEach((function(t){t.setAttrs({width:h,height:h,offsetX:h/2,offsetY:h/2,stroke:e.anchorStroke(),strokeWidth:e.anchorStrokeWidth(),fill:e.anchorFill(),cornerRadius:e.anchorCornerRadius()})})),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:h/2+s,offsetY:h/2+s,visible:o&&a.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:h/2+s,visible:o&&a.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:h/2-s,offsetY:h/2+s,visible:o&&a.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:h/2+s,visible:o&&a.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:h/2-s,visible:o&&a.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:h/2+s,offsetY:h/2-s,visible:o&&a.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:h/2-s,visible:o&&a.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:h/2-s,offsetY:h/2-s,visible:o&&a.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*A._sign(i)-s,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(t=this.getLayer())||void 0===t||t.batchDraw()}},{key:"isTransforming",value:function(){return this._transforming}},{key:"stopTransform",value:function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}},{key:"destroy",value:function(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),le.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}},{key:"toObject",value:function(){return ft.prototype.toObject.call(this)}}]),n}(le);pn.prototype.className="Transformer",w(pn),I.addGetterSetter(pn,"enabledAnchors",un,(function(t){return t instanceof Array||A.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===un.indexOf(t)&&A.warn("Unknown anchor name: "+t+". Available names are: "+un.join(", "))})),t||[]})),I.addGetterSetter(pn,"flipEnabled",!0,B()),I.addGetterSetter(pn,"resizeEnabled",!0),I.addGetterSetter(pn,"anchorSize",10,M()),I.addGetterSetter(pn,"rotateEnabled",!0),I.addGetterSetter(pn,"rotationSnaps",[]),I.addGetterSetter(pn,"rotateAnchorOffset",50,M()),I.addGetterSetter(pn,"rotationSnapTolerance",5,M()),I.addGetterSetter(pn,"borderEnabled",!0),I.addGetterSetter(pn,"anchorStroke","rgb(0, 161, 255)"),I.addGetterSetter(pn,"anchorStrokeWidth",1,M()),I.addGetterSetter(pn,"anchorFill","white"),I.addGetterSetter(pn,"anchorCornerRadius",0,M()),I.addGetterSetter(pn,"borderStroke","rgb(0, 161, 255)"),I.addGetterSetter(pn,"borderStrokeWidth",1,M()),I.addGetterSetter(pn,"borderDash"),I.addGetterSetter(pn,"keepRatio",!0),I.addGetterSetter(pn,"centeredScaling",!1),I.addGetterSetter(pn,"ignoreStroke",!1),I.addGetterSetter(pn,"padding",0,M()),I.addGetterSetter(pn,"node"),I.addGetterSetter(pn,"nodes"),I.addGetterSetter(pn,"boundBoxFunc"),I.addGetterSetter(pn,"shouldOverdrawWholeArea",!1),I.addGetterSetter(pn,"useSingleNodeRotation",!0),I.backCompat(pn,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var gn=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"_sceneFunc",value:function(t){t.beginPath(),t.arc(0,0,this.radius(),0,x.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.radius()}},{key:"getHeight",value:function(){return 2*this.radius()}},{key:"setWidth",value:function(t){this.radius(t/2)}},{key:"setHeight",value:function(t){this.radius(t/2)}}]),n}(ie);function vn(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}gn.prototype.className="Wedge",gn.prototype._centroid=!0,gn.prototype._attrsAffectingSize=["radius"],w(gn),I.addGetterSetter(gn,"radius",0,M()),I.addGetterSetter(gn,"angle",0,M()),I.addGetterSetter(gn,"clockwise",!1),I.backCompat(gn,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var bn=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],yn=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];I.addGetterSetter(ft,"blurRadius",0,M(),I.afterSetFilter);I.addGetterSetter(ft,"brightness",0,M(),I.afterSetFilter);I.addGetterSetter(ft,"contrast",0,M(),I.afterSetFilter);function mn(t,e,n,r,i){var a=n-e,o=i-r;return 0===a?r+o/2:0===o?r:o*((t-e)/a)+r}I.addGetterSetter(ft,"embossStrength",.5,M(),I.afterSetFilter),I.addGetterSetter(ft,"embossWhiteLevel",.5,M(),I.afterSetFilter),I.addGetterSetter(ft,"embossDirection","top-left",null,I.afterSetFilter),I.addGetterSetter(ft,"embossBlend",!1,null,I.afterSetFilter);I.addGetterSetter(ft,"enhance",0,M(),I.afterSetFilter);I.addGetterSetter(ft,"hue",0,M(),I.afterSetFilter),I.addGetterSetter(ft,"saturation",0,M(),I.afterSetFilter),I.addGetterSetter(ft,"luminance",0,M(),I.afterSetFilter);I.addGetterSetter(ft,"hue",0,M(),I.afterSetFilter),I.addGetterSetter(ft,"saturation",0,M(),I.afterSetFilter),I.addGetterSetter(ft,"value",0,M(),I.afterSetFilter);function xn(t,e,n){var r=4*(n*t.width+e),i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function wn(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}I.addGetterSetter(ft,"kaleidoscopePower",2,M(),I.afterSetFilter),I.addGetterSetter(ft,"kaleidoscopeAngle",0,M(),I.afterSetFilter);I.addGetterSetter(ft,"threshold",0,M(),I.afterSetFilter);I.addGetterSetter(ft,"noise",.2,M(),I.afterSetFilter);I.addGetterSetter(ft,"pixelSize",8,M(),I.afterSetFilter);I.addGetterSetter(ft,"levels",.5,M(),I.afterSetFilter);I.addGetterSetter(ft,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),I.addGetterSetter(ft,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),I.addGetterSetter(ft,"blue",0,R,I.afterSetFilter);I.addGetterSetter(ft,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),I.addGetterSetter(ft,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),I.addGetterSetter(ft,"blue",0,R,I.afterSetFilter),I.addGetterSetter(ft,"alpha",1,(function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t}));I.addGetterSetter(ft,"threshold",.5,M(),I.afterSetFilter);var _n=ye.Util._assign(ye,{Arc:me,Arrow:Se,Circle:Ce,Ellipse:Oe,Image:je,Label:De,Tag:Le,Line:_e,Path:ke,Rect:Fe,RegularPolygon:Ge,Ring:ze,Sprite:Ne,Star:Ie,Text:Je,TextPath:rn,Transformer:pn,Wedge:gn,Filters:{Blur:function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var n,r,i,a,o,s,h,l,c,u,d,f,p,g,v,b,y,m,x,w,_,k,S,C,O=t.data,j=t.width,E=t.height,P=e+e+1,A=j-1,T=E-1,R=e+1,M=R*(R+1)/2,D=new vn,L=null,F=D,G=null,B=null,z=bn[e],N=yn[e];for(i=1;i<P;i++)F=F.next=new vn,i===R&&(L=F);for(F.next=D,h=s=0,r=0;r<E;r++){for(b=y=m=x=l=c=u=d=0,f=R*(w=O[s]),p=R*(_=O[s+1]),g=R*(k=O[s+2]),v=R*(S=O[s+3]),l+=M*w,c+=M*_,u+=M*k,d+=M*S,F=D,i=0;i<R;i++)F.r=w,F.g=_,F.b=k,F.a=S,F=F.next;for(i=1;i<R;i++)a=s+((A<i?A:i)<<2),l+=(F.r=w=O[a])*(C=R-i),c+=(F.g=_=O[a+1])*C,u+=(F.b=k=O[a+2])*C,d+=(F.a=S=O[a+3])*C,b+=w,y+=_,m+=k,x+=S,F=F.next;for(G=D,B=L,n=0;n<j;n++)O[s+3]=S=d*z>>N,0!==S?(S=255/S,O[s]=(l*z>>N)*S,O[s+1]=(c*z>>N)*S,O[s+2]=(u*z>>N)*S):O[s]=O[s+1]=O[s+2]=0,l-=f,c-=p,u-=g,d-=v,f-=G.r,p-=G.g,g-=G.b,v-=G.a,a=h+((a=n+e+1)<A?a:A)<<2,l+=b+=G.r=O[a],c+=y+=G.g=O[a+1],u+=m+=G.b=O[a+2],d+=x+=G.a=O[a+3],G=G.next,f+=w=B.r,p+=_=B.g,g+=k=B.b,v+=S=B.a,b-=w,y-=_,m-=k,x-=S,B=B.next,s+=4;h+=j}for(n=0;n<j;n++){for(y=m=x=b=c=u=d=l=0,f=R*(w=O[s=n<<2]),p=R*(_=O[s+1]),g=R*(k=O[s+2]),v=R*(S=O[s+3]),l+=M*w,c+=M*_,u+=M*k,d+=M*S,F=D,i=0;i<R;i++)F.r=w,F.g=_,F.b=k,F.a=S,F=F.next;for(o=j,i=1;i<=e;i++)s=o+n<<2,l+=(F.r=w=O[s])*(C=R-i),c+=(F.g=_=O[s+1])*C,u+=(F.b=k=O[s+2])*C,d+=(F.a=S=O[s+3])*C,b+=w,y+=_,m+=k,x+=S,F=F.next,i<T&&(o+=j);for(s=n,G=D,B=L,r=0;r<E;r++)O[3+(a=s<<2)]=S=d*z>>N,S>0?(S=255/S,O[a]=(l*z>>N)*S,O[a+1]=(c*z>>N)*S,O[a+2]=(u*z>>N)*S):O[a]=O[a+1]=O[a+2]=0,l-=f,c-=p,u-=g,d-=v,f-=G.r,p-=G.g,g-=G.b,v-=G.a,a=n+((a=r+R)<T?a:T)*j<<2,l+=b+=G.r=O[a],c+=y+=G.g=O[a+1],u+=m+=G.b=O[a+2],d+=x+=G.a=O[a+3],G=G.next,f+=w=B.r,p+=_=B.g,g+=k=B.b,v+=S=B.a,b-=w,y-=_,m-=k,x-=S,B=B.next,s+=j}}(t,e)},Brighten:function(t){var e,n=255*this.brightness(),r=t.data,i=r.length;for(e=0;e<i;e+=4)r[e]+=n,r[e+1]+=n,r[e+2]+=n},Contrast:function(t){var e,n=Math.pow((this.contrast()+100)/100,2),r=t.data,i=r.length,a=150,o=150,s=150;for(e=0;e<i;e+=4)a=r[e],o=r[e+1],s=r[e+2],a/=255,a-=.5,a*=n,a+=.5,o/=255,o-=.5,o*=n,o+=.5,s/=255,s-=.5,s*=n,s+=.5,a=(a*=255)<0?0:a>255?255:a,o=(o*=255)<0?0:o>255?255:o,s=(s*=255)<0?0:s>255?255:s,r[e]=a,r[e+1]=o,r[e+2]=s},Emboss:function(t){var e=10*this.embossStrength(),n=255*this.embossWhiteLevel(),r=this.embossDirection(),i=this.embossBlend(),a=0,o=0,s=t.data,h=t.width,l=t.height,c=4*h,u=l;switch(r){case"top-left":a=-1,o=-1;break;case"top":a=-1,o=0;break;case"top-right":a=-1,o=1;break;case"right":a=0,o=1;break;case"bottom-right":a=1,o=1;break;case"bottom":a=1,o=0;break;case"bottom-left":a=1,o=-1;break;case"left":a=0,o=-1;break;default:A.error("Unknown emboss direction: "+r)}do{var d=(u-1)*c,f=a;u+f<1&&(f=0),u+f>l&&(f=0);var p=(u-1+f)*h*4,g=h;do{var v=d+4*(g-1),b=o;g+b<1&&(b=0),g+b>h&&(b=0);var y=p+4*(g-1+b),m=s[v]-s[y],x=s[v+1]-s[y+1],w=s[v+2]-s[y+2],_=m,k=_>0?_:-_;if((x>0?x:-x)>k&&(_=x),(w>0?w:-w)>k&&(_=w),_*=e,i){var S=s[v]+_,C=s[v+1]+_,O=s[v+2]+_;s[v]=S>255?255:S<0?0:S,s[v+1]=C>255?255:C<0?0:C,s[v+2]=O>255?255:O<0?0:O}else{var j=n-_;j<0?j=0:j>255&&(j=255),s[v]=s[v+1]=s[v+2]=j}}while(--g)}while(--u)},Enhance:function(t){var e,n,r,i,a=t.data,o=a.length,s=a[0],h=s,l=a[1],c=l,u=a[2],d=u,f=this.enhance();if(0!==f){for(i=0;i<o;i+=4)(e=a[i+0])<s?s=e:e>h&&(h=e),(n=a[i+1])<l?l=n:n>c&&(c=n),(r=a[i+2])<u?u=r:r>d&&(d=r);var p,g,v,b,y,m,x,w,_;for(h===s&&(h=255,s=0),c===l&&(c=255,l=0),d===u&&(d=255,u=0),f>0?(g=h+f*(255-h),v=s-f*(s-0),y=c+f*(255-c),m=l-f*(l-0),w=d+f*(255-d),_=u-f*(u-0)):(g=h+f*(h-(p=.5*(h+s))),v=s+f*(s-p),y=c+f*(c-(b=.5*(c+l))),m=l+f*(l-b),w=d+f*(d-(x=.5*(d+u))),_=u+f*(u-x)),i=0;i<o;i+=4)a[i+0]=mn(a[i+0],s,h,v,g),a[i+1]=mn(a[i+1],l,c,m,y),a[i+2]=mn(a[i+2],u,d,_,w)}},Grayscale:function(t){var e,n,r=t.data,i=r.length;for(e=0;e<i;e+=4)n=.34*r[e]+.5*r[e+1]+.16*r[e+2],r[e]=n,r[e+1]=n,r[e+2]=n},HSL:function(t){var e,n,r,i,a,o=t.data,s=o.length,h=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=127*this.luminance(),u=1*h*Math.cos(l*Math.PI/180),d=1*h*Math.sin(l*Math.PI/180),f=.299+.701*u+.167*d,p=.587-.587*u+.33*d,g=.114-.114*u-.497*d,v=.299-.299*u-.328*d,b=.587+.413*u+.035*d,y=.114-.114*u+.293*d,m=.299-.3*u+1.25*d,x=.587-.586*u-1.05*d,w=.114+.886*u-.2*d;for(e=0;e<s;e+=4)n=o[e+0],r=o[e+1],i=o[e+2],a=o[e+3],o[e+0]=f*n+p*r+g*i+c,o[e+1]=v*n+b*r+y*i+c,o[e+2]=m*n+x*r+w*i+c,o[e+3]=a},HSV:function(t){var e,n,r,i,a,o=t.data,s=o.length,h=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,u=h*l*Math.cos(c*Math.PI/180),d=h*l*Math.sin(c*Math.PI/180),f=.299*h+.701*u+.167*d,p=.587*h-.587*u+.33*d,g=.114*h-.114*u-.497*d,v=.299*h-.299*u-.328*d,b=.587*h+.413*u+.035*d,y=.114*h-.114*u+.293*d,m=.299*h-.3*u+1.25*d,x=.587*h-.586*u-1.05*d,w=.114*h+.886*u-.2*d;for(e=0;e<s;e+=4)n=o[e+0],r=o[e+1],i=o[e+2],a=o[e+3],o[e+0]=f*n+p*r+g*i,o[e+1]=v*n+b*r+y*i,o[e+2]=m*n+x*r+w*i,o[e+3]=a},Invert:function(t){var e,n=t.data,r=n.length;for(e=0;e<r;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]},Kaleidoscope:function(t){var e,n,r,i,a,o,s,h,l,c=t.width,u=t.height,d=Math.round(this.kaleidoscopePower()),f=Math.round(this.kaleidoscopeAngle()),p=Math.floor(c*(f%360)/360);if(!(d<1)){var g=A.createCanvasElement();g.width=c,g.height=u;var v=g.getContext("2d").getImageData(0,0,c,u);!function(t,e,n){var r,i,a,o,s=t.data,h=e.data,l=t.width,c=t.height,u=n.polarCenterX||l/2,d=n.polarCenterY||c/2,f=0,p=0,g=0,v=0,b=Math.sqrt(u*u+d*d);i=l-u,a=c-d,b=(o=Math.sqrt(i*i+a*a))>b?o:b;var y,m,x,w,_=c,k=l,S=360/k*Math.PI/180;for(m=0;m<k;m+=1)for(x=Math.sin(m*S),w=Math.cos(m*S),y=0;y<_;y+=1)i=Math.floor(u+b*y/_*w),f=s[0+(r=4*((a=Math.floor(d+b*y/_*x))*l+i))],p=s[r+1],g=s[r+2],v=s[r+3],h[0+(r=4*(m+y*l))]=f,h[r+1]=p,h[r+2]=g,h[r+3]=v}(t,v,{polarCenterX:c/2,polarCenterY:u/2});for(var b=c/Math.pow(2,d);b<=8;)b*=2,d-=1;var y=b=Math.ceil(b),m=0,x=y,w=1;for(p+b>c&&(m=y,x=0,w=-1),n=0;n<u;n+=1)for(e=m;e!==x;e+=w)h=4*(c*n+Math.round(e+p)%c),i=v.data[h+0],a=v.data[h+1],o=v.data[h+2],s=v.data[h+3],l=4*(c*n+e),v.data[l+0]=i,v.data[l+1]=a,v.data[l+2]=o,v.data[l+3]=s;for(n=0;n<u;n+=1)for(y=Math.floor(b),r=0;r<d;r+=1){for(e=0;e<y+1;e+=1)h=4*(c*n+e),i=v.data[h+0],a=v.data[h+1],o=v.data[h+2],s=v.data[h+3],l=4*(c*n+2*y-e-1),v.data[l+0]=i,v.data[l+1]=a,v.data[l+2]=o,v.data[l+3]=s;y*=2}!function(t,e,n){var r,i,a,o,s,h,l=t.data,c=e.data,u=t.width,d=t.height,f=n.polarCenterX||u/2,p=n.polarCenterY||d/2,g=0,v=0,b=0,y=0,m=Math.sqrt(f*f+p*p);i=u-f,a=d-p,m=(h=Math.sqrt(i*i+a*a))>m?h:m;var x,w,_,k=d,S=u,C=n.polarRotation||0;for(i=0;i<u;i+=1)for(a=0;a<d;a+=1)o=i-f,s=a-p,x=Math.sqrt(o*o+s*s)*k/m,w=(w=(180*Math.atan2(s,o)/Math.PI+360+C)%360)*S/360,_=Math.floor(w),g=l[0+(r=4*(Math.floor(x)*u+_))],v=l[r+1],b=l[r+2],y=l[r+3],c[0+(r=4*(a*u+i))]=g,c[r+1]=v,c[r+2]=b,c[r+3]=y}(v,t,{polarRotation:0})}},Mask:function(t){var e=function(t,e){var n=xn(t,0,0),r=xn(t,t.width-1,0),i=xn(t,0,t.height-1),a=xn(t,t.width-1,t.height-1),o=e||10;if(wn(n,r)<o&&wn(r,a)<o&&wn(a,i)<o&&wn(i,n)<o){for(var s=function(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([r,n,a,i]),h=[],l=0;l<t.width*t.height;l++){var c=wn(s,[t.data[4*l],t.data[4*l+1],t.data[4*l+2]]);h[l]=c<o?0:255}return h}}(t,this.threshold());return e&&function(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}(t,e=function(t,e,n){for(var r=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(r.length)),a=Math.floor(i/2),o=[],s=0;s<n;s++)for(var h=0;h<e;h++){for(var l=s*e+h,c=0,u=0;u<i;u++)for(var d=0;d<i;d++){var f=s+u-a,p=h+d-a;if(f>=0&&f<n&&p>=0&&p<e){var g=r[u*i+d];c+=t[f*e+p]*g}}o[l]=c}return o}(e=function(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),a=Math.floor(i/2),o=[],s=0;s<n;s++)for(var h=0;h<e;h++){for(var l=s*e+h,c=0,u=0;u<i;u++)for(var d=0;d<i;d++){var f=s+u-a,p=h+d-a;if(f>=0&&f<n&&p>=0&&p<e){var g=r[u*i+d];c+=t[f*e+p]*g}}o[l]=c>=1020?255:0}return o}(e=function(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),a=Math.floor(i/2),o=[],s=0;s<n;s++)for(var h=0;h<e;h++){for(var l=s*e+h,c=0,u=0;u<i;u++)for(var d=0;d<i;d++){var f=s+u-a,p=h+d-a;if(f>=0&&f<n&&p>=0&&p<e){var g=r[u*i+d];c+=t[f*e+p]*g}}o[l]=2040===c?255:0}return o}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},Noise:function(t){var e,n=255*this.noise(),r=t.data,i=r.length,a=n/2;for(e=0;e<i;e+=4)r[e+0]+=a-2*a*Math.random(),r[e+1]+=a-2*a*Math.random(),r[e+2]+=a-2*a*Math.random()},Pixelate:function(t){var e,n,r,i,a,o,s,h,l,c,u,d,f,p,g=Math.ceil(this.pixelSize()),v=t.width,b=t.height,y=Math.ceil(v/g),m=Math.ceil(b/g),x=t.data;if(g<=0)A.error("pixelSize value can not be <= 0");else for(d=0;d<y;d+=1)for(f=0;f<m;f+=1){for(i=0,a=0,o=0,s=0,l=(h=d*g)+g,u=(c=f*g)+g,p=0,e=h;e<l;e+=1)if(!(e>=v))for(n=c;n<u;n+=1)n>=b||(i+=x[(r=4*(v*n+e))+0],a+=x[r+1],o+=x[r+2],s+=x[r+3],p+=1);for(i/=p,a/=p,o/=p,s/=p,e=h;e<l;e+=1)if(!(e>=v))for(n=c;n<u;n+=1)n>=b||(x[(r=4*(v*n+e))+0]=i,x[r+1]=a,x[r+2]=o,x[r+3]=s)}},Posterize:function(t){var e,n=Math.round(254*this.levels())+1,r=t.data,i=r.length,a=255/n;for(e=0;e<i;e+=1)r[e]=Math.floor(r[e]/a)*a},RGB:function(t){var e,n,r=t.data,i=r.length,a=this.red(),o=this.green(),s=this.blue();for(e=0;e<i;e+=4)n=(.34*r[e]+.5*r[e+1]+.16*r[e+2])/255,r[e]=n*a,r[e+1]=n*o,r[e+2]=n*s,r[e+3]=r[e+3]},RGBA:function(t){var e,n,r=t.data,i=r.length,a=this.red(),o=this.green(),s=this.blue(),h=this.alpha();for(e=0;e<i;e+=4)n=1-h,r[e]=a*h+r[e]*n,r[e+1]=o*h+r[e+1]*n,r[e+2]=s*h+r[e+2]*n},Sepia:function(t){var e,n,r,i,a=t.data,o=a.length;for(e=0;e<o;e+=4)n=a[e+0],r=a[e+1],i=a[e+2],a[e+0]=Math.min(255,.393*n+.769*r+.189*i),a[e+1]=Math.min(255,.349*n+.686*r+.168*i),a[e+2]=Math.min(255,.272*n+.534*r+.131*i)},Solarize:function(t){var e=t.data,n=t.width,r=4*n,i=t.height;do{var a=(i-1)*r,o=n;do{var s=a+4*(o-1),h=e[s],l=e[s+1],c=e[s+2];h>127&&(h=255-h),l>127&&(l=255-l),c>127&&(c=255-c),e[s]=h,e[s+1]=l,e[s+2]=c}while(--o)}while(--i)},Threshold:function(t){var e,n=255*this.threshold(),r=t.data,i=r.length;for(e=0;e<i;e+=1)r[e]=r[e]<n?0:255}}}),kn={},Sn=kn||Object.freeze({__proto__:null,default:kn});"undefined"===typeof t.document&&(_n.Util.createCanvasElement=function(){var t=Sn.createCanvas(300,300);return t.style||(t.style={}),t},_n.Util.createImageElement=function(){return new Sn.Image});var Cn=function(t,e){return Cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Cn(t,e)};function On(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Cn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var jn=function(){return jn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},jn.apply(this,arguments)};function En(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{h(r.next(t))}catch(e){a(e)}}function s(t){try{h(r.throw(t))}catch(e){a(e)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}h((r=r.apply(t,e||[])).next())}))}function Pn(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function An(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function Tn(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var Rn=function(t){return function(t){return!!t&&"object"===typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===Mn}(t)}(t)};var Mn="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Dn(t,e){return!1!==e.clone&&e.isMergeableObject(t)?zn((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function Ln(t,e,n){return t.concat(e).map((function(t){return Dn(t,n)}))}function Fn(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function Gn(t,e){try{return e in t}catch(n){return!1}}function Bn(t,e,n){var r={};return n.isMergeableObject(t)&&Fn(t).forEach((function(e){r[e]=Dn(t[e],n)})),Fn(e).forEach((function(i){(function(t,e){return Gn(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,i)||(Gn(t,i)&&n.isMergeableObject(e[i])?r[i]=function(t,e){if(!e.customMerge)return zn;var n=e.customMerge(t);return"function"===typeof n?n:zn}(i,n)(t[i],e[i],n):r[i]=Dn(e[i],n))})),r}function zn(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||Ln,n.isMergeableObject=n.isMergeableObject||Rn,n.cloneUnlessOtherwiseSpecified=Dn;var r=Array.isArray(e);return r===Array.isArray(t)?r?n.arrayMerge(t,e,n):Bn(t,e,n):Dn(e,n)}zn.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return zn(t,n,e)}),{})};var Nn=zn,In={borderDash:[15,10],borderStroke:"#fff",borderStrokeWidth:3,anchorSize:15,anchorFill:"#fff",anchorStroke:"#fff",anchorStrokeWidth:1,anchorCornerRadius:30},Hn={disableCanvasContextMenu:!0,containerClassName:"pikaso",transformer:In,cropper:{transformer:In,circular:!1,fixed:!1,keepRatio:!0,aspectRatio:1,minWidth:100,minHeight:100,marginRatio:1.1,overlay:{color:"#262626",opacity:.5},guides:{show:!0,count:3,color:"#fff",width:1,dash:[15,10]}},drawing:{keyboard:{cancelOnEscape:!0}},selection:{interactive:!0,keyboard:{enabled:!0,movingSpaces:5,map:{delete:["Backspace","Delete"],moveLeft:["ArrowLeft"],moveRight:["ArrowRight"],moveUp:["ArrowUp"],moveDown:["ArrowDown"],deselect:["Escape"]}},transformer:jn(jn({},In),{borderDash:[0,0]}),zone:{fill:"rgba(105, 105, 105, 0.7)",stroke:"#dbdbdb"}},history:{keyboard:{enabled:!0}}};function Wn(t,e){return Object.entries(t).reduce((function(t,n){var r,i=An(n,2),a=i[0],o=i[1];return e.includes(a)?t:jn(jn({},t),((r={})[a]=o,r))}),{})}var Xn=function(){function t(t){this.board=t}return t.prototype.apply=function(t,e){var n=this;this.board.history.create(this.board.layer,t.map((function(t){return t.node})),{undo:function(t){return n.clearCache(t)},redo:function(t){return n.addCache(t)}}),t.forEach((function(t){t.node.cache(),(Array.isArray(e)?e:[e]).forEach((function(e){"options"in e&&t.node.setAttrs(e.options);var r=t.node.filters()||[],i=n.getFilterFunction(e);!1===r.includes(i)&&t.node.filters(Tn(Tn([],An(r),!1),[i],!1))}))})),this.board.events.emit("filter:add",{shapes:t,data:{filters:e}})},t.prototype.remove=function(t,e){var n=this;this.board.history.create(this.board.layer,t.map((function(t){return t.node})),{undo:function(t){return n.addCache(t)},redo:function(t){return n.clearCache(t)}}),t.forEach((function(t){if(t.node.filters()){var r=Array.isArray(e)?e.map(n.getFilterFunction):[n.getFilterFunction(e)],i=t.node.filters().filter((function(t){return!r.includes(t)}));0===i.length&&t.node.clearCache(),t.node.filters(i)}})),this.board.events.emit("filter:remove",{shapes:t,data:{filters:e}})},t.prototype.addCache=function(t){t.forEach((function(t){return t.nodes.forEach((function(t){var e;!t.isCached()&&(null===(e=t.filters())||void 0===e?void 0:e.length)&&t.cache()}))})),this.board.selection.reselect()},t.prototype.clearCache=function(t){t.forEach((function(t){return t.nodes.forEach((function(t){var e;t.isCached()&&!(null===(e=t.filters())||void 0===e?void 0:e.length)&&t.clearCache()}))})),this.board.selection.reselect()},t.prototype.getFilterFunction=function(t){return"customFn"in t?t.customFn:_n.Filters[t.name]},t}();var Un,Yn=function(){function t(t){this.board=t}return t.prototype.horizontal=function(t){var e=this,n=null!==t&&void 0!==t?t:Tn(Tn([],An(this.board.activeShapes),!1),[this.board.background.image],!1);this.board.history.create(this.board.layer,n.map((function(t){return t.node}))),n.forEach((function(t){var n=t.node;n.scaleX(-1*n.scaleX()),e.shouldRecalculatePosition(t)&&n.x(n.scaleX()<0?n.width()*Math.abs(n.scaleX())+n.x():n.x()-n.width()*Math.abs(n.scaleX()))})),this.board.events.emit("flip:x",{shapes:n})},t.prototype.vertical=function(t){var e=this,n=null!==t&&void 0!==t?t:Tn(Tn([],An(this.board.activeShapes),!1),[this.board.background.image],!1);this.board.history.create(this.board.layer,n.map((function(t){return t.node}))),n.forEach((function(t){var n=t.node;n.scaleY(-1*n.scaleY()),e.shouldRecalculatePosition(t)&&n.y(n.scaleY()<0?n.height()*Math.abs(n.scaleY())+n.y():n.y()-n.height()*Math.abs(n.scaleY()))})),this.board.events.emit("flip:y",{shapes:n})},t.prototype.shouldRecalculatePosition=function(t){return[_n.Image,_n.Label,_n.Text,_n.Rect,_n.Path].some((function(e){return t.node instanceof e}))},t}(),qn=function(){function t(t,e,n){var r,i,a,o,s=this;void 0===n&&(n={}),this.deleted=!1,this.board=t,this.node=e,this.flip=new Yn(t),this.filter=new Xn(t),this.config=jn({transformer:{},history:null===(r=n.history)||void 0===r||r,selectable:null===(o=null!==(i=n.selectable)&&void 0!==i?i:null===(a=this.board.settings.selection)||void 0===a?void 0:a.interactive)||void 0===o||o},n),this.config.history&&this.board.history.create(this.board.layer,[],{undo:function(){return s.delete()},redo:function(){return s.undelete()}}),this.board.events.emit("shape:create",{shapes:[this]}),this.config.selectable&&(this.node.draggable(!0),this.registerEvents(),this.board.addShape(this)),this.board.layer.add(this.node)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return!this.isDeleted&&!this.isInvisible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDeleted",{get:function(){return this.deleted},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.node.isVisible()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInvisible",{get:function(){return!1===this.isVisible},enumerable:!1,configurable:!0}),t.prototype.flipX=function(){this.flip.horizontal([this])},t.prototype.flipY=function(){this.flip.vertical([this])},t.prototype.select=function(){this.board.selection.add(this)},t.prototype.deselect=function(){this.board.selection.deselect(this)},t.prototype.addFilter=function(t){this.filter.apply([this],t)},t.prototype.removeFilter=function(t){this.filter.remove([this],t)},t.prototype.delete=function(){this.deleted||(this.deselect(),this.node.hide(),this.node.cache(),this.deleted=!0,this.board.events.emit("shape:delete",{shapes:[this]}))},t.prototype.undelete=function(){this.deleted&&(this.node.show(),this.node.clearCache(),this.deleted=!1,this.board.events.emit("shape:undelete",{shapes:[this]}))},t.prototype.destroy=function(){var t=this;this.node.destroy();var e=this.board.activeShapes.filter((function(e){return e.node!==t.node}));this.board.setShapes(e),this.board.events.emit("shape:destroy",{shapes:[this]})},t.prototype.rotate=function(t){this.node.rotation(t),this.board.events.emit("shape:rotate",{shapes:[this]})},t.prototype.x=function(){return this.node.x()},t.prototype.y=function(){return this.node.y()},t.prototype.scale=function(){return this.node.scale()},t.prototype.scaleX=function(){return this.node.scaleX()},t.prototype.scaleY=function(){return this.node.scaleY()},t.prototype.show=function(){return this.node.show()},t.prototype.hide=function(){return this.node.hide()},t.prototype.update=function(t){this.board.history.create(this.board.layer,this.node),this.node.setAttrs(t),this.board.draw()},t.prototype.to=function(t){this.board.history.create(this.board.layer,this.node),this.node.to(t),this.board.draw()},t.prototype.registerEvents=function(){var t=this;this.node.addEventListener("mouseover",(function(){t.board.stage.getContent().style.cursor="move"})),this.node.addEventListener("mouseout",(function(){t.board.stage.getContent().style.cursor="inherit"})),this.node.addEventListener("dragstart",(function(){t.board.selection.isLocked&&t.node.stopDrag()})),this.node.on("dragend",(function(t){return t.currentTarget.setAttrs({originalX:void 0,originalY:void 0})})),this.node.on("transformend",(function(t){return t.currentTarget.setAttrs({originalScaleX:void 0,originalScaleY:void 0})}))},t}();function Vn(t){return Number(t)*Math.PI/180}function Kn(t,e){var n=t.x,r=t.y,i=Math.cos(e),a=Math.sin(e);return{x:n*i-r*a,y:r*i+n*a}}function $n(t,e){var n={x:t.width()/2*-1,y:t.height()/2*-1},r=Kn(n,Vn(t.rotation())),i=Kn(n,Vn(e)),a=i.x-r.x,o=i.y-r.y;t.x(t.x()+a),t.y(t.y()+o),t.rotation(Number(e))}!function(t){t.Text="Text",t.Pencil="Pencil",t.Line="Line",t.Arrow="Arrow",t.Circle="Circle",t.Rect="Rect",t.Ellipse="Ellipse",t.Polygon="Polygon",t.Triangle="Triangle"}(Un||(Un={}));var Zn=function(t){function e(e,n,r){void 0===r&&(r={});var i=t.call(this,e,n,r)||this;return i.isEditingEnabled=!1,n.on("transform",i.transform.bind(i)),n.on("dblclick",i.inlineEdit.bind(i)),i}return On(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"label"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEditing",{get:function(){return this.isEditingEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textNode",{get:function(){return this.node.getText()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagNode",{get:function(){return this.node.getTag()},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){$n(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e.prototype.updateTag=function(t){this.board.history.create(this.board.layer,this.tagNode),this.tagNode.setAttrs(t)},e.prototype.updateText=function(t){this.board.history.create(this.board.layer,this.textNode),this.textNode.setAttrs(t),this.updateTransformer()},e.prototype.transform=function(){"rotater"!==this.board.selection.transformer.getActiveAnchor()&&(this.textNode.setAttrs({width:this.node.width()*this.node.scaleX(),scaleX:this.node.scaleY()}),this.node.scaleX(this.textNode.scaleY()),this.tagNode.scaleX(this.node.scaleY()))},e.prototype.inlineEdit=function(t){var e,n=this;if(!this.node.isCached()){t.cancelBubble=!0,this.isEditingEnabled=!0,this.board.setActiveDrawing(Un.Text);var r=t.target.absolutePosition(),i=this.textNode.getAttr("text");this.node.hide(),null===(e=this.node)||void 0===e||e.draggable(!1),this.board.selection.deselectAll();var a=document.createElement("span");this.board.container.getElementsByClassName(this.board.settings.containerClassName)[0].append(a),this.setInputFocus(a),a.setAttribute("contenteditable",""),a.setAttribute("role","textbox"),a.innerText=this.textNode.getAttr("text"),Object.assign(a.style,{position:"absolute",display:"inline-block",left:r.x-this.textNode.padding()+"px",top:r.y-this.textNode.padding()+"px",width:this.textNode.width()*this.node.scaleX()+"px",minWidth:2*this.textNode.padding()+"px",maxWidth:this.textNode.width()*this.node.scaleX()+"px",minHeight:this.textNode.height()*this.node.scaleY()+"px",fontSize:this.textNode.fontSize()*this.node.scaleY()+"px",border:"none",padding:this.textNode.padding()+"px",margin:this.textNode.padding()+"px",overflow:"hidden",background:this.tagNode.fill(),borderRadius:this.tagNode.cornerRadius()+"px",outline:"none",resize:"none",lineHeight:this.textNode.lineHeight(),fontFamily:this.textNode.fontFamily(),transformOrigin:"left top",textAlign:this.textNode.align(),color:this.textNode.fill(),transform:a.style.transform+" rotateZ("+this.node.rotation()+"deg)"}),a.addEventListener("blur",(function(t){var e,r;n.isEditingEnabled=!1,null===(e=a.parentNode)||void 0===e||e.removeChild(a),n.board.setActiveDrawing(null);var o=function(t){void 0===t&&(t="");var e=String(t);return(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&nbsp;/gi," ")).replace(/&amp;/gi,"&")).replace(/<br>/gi,"\n")).replace(/<br\/>/gi,"\n")).replace(/<div>/gi,"\n")).replace(/<p>/gi,"\n")).replace(/<(.*?)>/g,"")).split("\n").map((function(t){return void 0===t&&(t=""),t.trim()})).join("\n")).replace(/\n\n+/g,"\n\n")).replace(/[ ]+/g," ")).trim()}(t.target.innerHTML);o!==i&&n.board.history.create(n.board.layer,[],{undo:function(){return n.changeText(i)},redo:function(){return n.changeText(o)}}),n.textNode.setText(o),n.node.show(),n.node.setAttrs({draggable:null===(r=n.board.settings.selection)||void 0===r?void 0:r.interactive,width:n.textNode.width()}),n.board.selection.add(n)}))}},e.prototype.changeText=function(t){this.textNode.setAttrs({text:t}),this.updateTransformer(),this.board.events.emit("label:update-text",{shapes:[this],data:{text:t}})},e.prototype.updateTransformer=function(){this.board.selection.isVisible&&this.board.selection.transformer.forceUpdate()},e.prototype.setInputFocus=function(t){return En(this,void 0,void 0,(function(){var e,n;return Pn(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(t){return setTimeout(t,50)}))];case 1:return r.sent(),(e=document.createRange()).selectNodeContents(t),e.collapse(!1),(n=window.getSelection()).removeAllRanges(),n.addRange(e),[2]}}))}))},e}(qn),Qn=function(){function t(t){this.list=[],this.board=t,this.filter=new Xn(t),this.createZone(),this.createTransformer(),this.board.stage.on("mousedown touchstart",this.onDragZoneStart.bind(this)),this.board.stage.on("mousemove touchmove",this.onDragZoneMove.bind(this)),this.board.stage.on("mouseup touchend",this.onDragZoneEnd.bind(this)),window.addEventListener("mouseup",this.onWindowMouseUp.bind(this)),window.addEventListener("touchend",this.onWindowMouseUp.bind(this)),window.addEventListener("keydown",this.onKeyDown.bind(this))}return Object.defineProperty(t.prototype,"shapes",{get:function(){return this.list},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.list.length>0},enumerable:!1,configurable:!0}),t.prototype.getTransformer=function(){return this.transformer},Object.defineProperty(t.prototype,"isLocked",{get:function(){return this.board.activeShapes.some((function(t){return t instanceof Zn&&t.isEditing}))},enumerable:!1,configurable:!0}),t.prototype.find=function(t){var e=this.board.activeShapes.filter((function(e){return t(e)}));this.multi(e)},t.prototype.selectAll=function(){this.multi(this.board.activeShapes)},t.prototype.deselectAll=function(){this.multi([])},t.prototype.reselect=function(){var t=this.list;this.deselectAll(),this.multi(t)},t.prototype.multi=function(t){var e;this.list=t;var n=jn(jn({visible:!0,centeredScaling:!0,rotationSnaps:[0,45,90,135,180,225,270,315],keepRatio:t.length>1,rotateEnabled:!0,enabledAnchors:["top-left","top-right","bottom-left","bottom-right","top-center","bottom-center","middle-left","middle-right"]},this.board.settings.transformer),null===(e=this.board.settings.selection)||void 0===e?void 0:e.transformer),r=t.reduce((function(t,e){var n,r=e.node.isCached()?[]:null===(n=e.config.transformer)||void 0===n?void 0:n.enabledAnchors;return jn(jn(jn({},t),e.config.transformer),{enabledAnchors:r})}),n);this.transformer.show(),this.transformer.moveToTop(),this.transformer.setAttrs(r).nodes(t.map((function(t){return t.node}))),0===t.length&&this.transformer.hide(),this.board.draw(),this.board.events.emit("selection:change",{shapes:t})},t.prototype.add=function(t){this.list.some((function(e){return e.node===t.node}))||this.multi(Tn(Tn([],An(this.list),!1),[t],!1))},t.prototype.toggle=function(t){this.list.some((function(e){return e.node===t.node}))?this.deselect(t):this.multi(Tn(Tn([],An(this.list),!1),[t],!1))},t.prototype.deselect=function(t){this.list=this.list.filter((function(e){return e!==t})),this.multi(this.list)},t.prototype.delete=function(){if(0!==this.list.length){var t=this.list;this.list=[],this.board.stage.getContent().style.cursor="inherit",this.transformer.nodes([]),this.board.history.create(this.board.layer,[],{undo:function(){return t.forEach((function(t){return t.undelete()}))},redo:function(){return t.forEach((function(t){return t.delete()}))}}),t.forEach((function(t){return t.delete()})),this.board.draw(),this.board.events.emit("selection:delete",{shapes:t})}},t.prototype.moveX=function(t){return En(this,void 0,void 0,(function(){var e=this;return Pn(this,(function(n){return[2,new Promise((function(n){e.board.history.create(e.board.layer,e.transformer.nodes()),e.list.forEach((function(e){e.node.to({x:e.node.x()+t,onFinish:n})})),e.board.draw(),e.board.events.emit("selection:move",{shapes:e.list,data:{axis:"x",value:t}})}))]}))}))},t.prototype.moveY=function(t){return En(this,void 0,void 0,(function(){var e=this;return Pn(this,(function(n){return[2,new Promise((function(n){e.board.history.create(e.board.layer,e.transformer.nodes()),e.list.forEach((function(e){e.node.to({y:e.node.y()+t,onFinish:n})})),e.board.draw(),e.board.events.emit("selection:move",{shapes:e.list,data:{axis:"y",value:t}})}))]}))}))},t.prototype.addFilter=function(t){this.filter.apply(this.list,t),this.reselect()},t.prototype.removeFilter=function(t){this.filter.remove(this.list,t),this.reselect()},t.prototype.createZone=function(){var t;this.zone=new _n.Rect(jn({visible:!1},null===(t=this.board.settings.selection)||void 0===t?void 0:t.zone)),this.board.layer.add(this.zone),this.board.draw()},t.prototype.createTransformer=function(){var t=this;this.transformer=new _n.Transformer,this.transformer.on("dragstart",(function(){t.board.history.create(t.board.layer,t.list.map((function(t){return t.node}))),t.board.events.emit("selection:dragstart",{shapes:t.list})})),this.transformer.on("dragmove",(function(){t.board.events.emit("selection:dragmove",{shapes:t.list})})),this.transformer.on("dragend",(function(){t.board.events.emit("selection:dragend",{shapes:t.list})})),this.transformer.on("transformstart",(function(){t.board.history.create(t.board.layer,t.list.map((function(t){return t.node})),{execute:function(){return t.board.selection.transformer.forceUpdate()}}),t.board.events.emit("selection:transformstart",{shapes:t.list})})),this.transformer.on("transform",(function(){t.board.events.emit("selection:transform",{shapes:t.list})})),this.transformer.on("transformend",(function(){t.board.events.emit("selection:transformend",{shapes:t.list})})),this.board.layer.add(this.transformer),this.board.draw()},t.prototype.onDragZoneStart=function(t){var e,n=this;if(!1!==(null===(e=this.board.settings.selection)||void 0===e?void 0:e.interactive)&&!this.isLocked){var r=this.board.activeShapes.find((function(e){return e.node===n.getParentNode(t.target)}));if(r&&!this.list.includes(r)){var i=!0===t.evt.shiftKey,a=!0===t.evt.ctrlKey;return i||a?i&&!a?this.add(r):a&&!i&&this.toggle(r):this.multi([r]),void this.board.setActiveDrawing(null)}null===this.board.activeDrawing&&!1!==this.isBackgroundNode(t.target)&&(this.startPointerPosition=this.board.stage.getPointerPosition(),this.zone.setAttrs({width:0,height:0,visible:!0}).moveToTop(),this.board.draw())}},t.prototype.onDragZoneMove=function(){if(this.zone.visible()){var t=this.board.stage.getPointerPosition(),e=t.x,n=t.y;this.zone.setAttrs({x:Math.min(this.startPointerPosition.x,e),y:Math.min(this.startPointerPosition.y,n),width:Math.abs(e-this.startPointerPosition.x),height:Math.abs(n-this.startPointerPosition.y)}),this.board.draw()}},t.prototype.onDragZoneEnd=function(){var t=this;if(this.zone.visible()){setTimeout((function(){t.zone.visible(!1),t.board.draw()}),10);var e=this.zone.getClientRect(),n=this.board.activeShapes.filter((function(t){return _n.Util.haveIntersection(e,t.node.getClientRect())}));this.multi(n)}},t.prototype.onWindowMouseUp=function(t){t.target instanceof HTMLCanvasElement||this.onDragZoneEnd()},t.prototype.onKeyDown=function(t){var e,n,r=null===(e=this.board.settings.selection)||void 0===e?void 0:e.keyboard;if(!1!==(null===r||void 0===r?void 0:r.enabled)){var i=this.transformer.nodes(),a=null!==(n=null===r||void 0===r?void 0:r.movingSpaces)&&void 0!==n?n:5;!1!==this.transformer.getAttr("visible")&&0!==i.length&&((null===r||void 0===r?void 0:r.map.delete.includes(t.key))&&(this.delete(),this.board.draw()),(null===r||void 0===r?void 0:r.map.moveLeft.includes(t.key))&&(this.moveX(-a),this.board.draw()),(null===r||void 0===r?void 0:r.map.moveRight.includes(t.key))&&(this.moveX(a),this.board.draw()),(null===r||void 0===r?void 0:r.map.moveUp.includes(t.key))&&(this.moveY(-a),this.board.draw()),(null===r||void 0===r?void 0:r.map.moveDown.includes(t.key))&&(this.moveY(a),this.board.draw()),(null===r||void 0===r?void 0:r.map.deselect.includes(t.key))&&(this.deselectAll(),this.board.draw()))}},t.prototype.getParentNode=function(t){for(var e,n=t;n.parent&&"Layer"!==(null===(e=n.parent)||void 0===e?void 0:e.getType());)n=n.parent;return n},t.prototype.isBackgroundNode=function(t){return t===this.board.stage||t===this.board.background.overlay.node},t}();function Jn(t){return En(this,void 0,void 0,(function(){return Pn(this,(function(e){return[2,new Promise((function(e,n){var r=new FileReader;r.addEventListener("load",(function(){e(r.result)})),r.addEventListener("error",(function(t){n(t)})),r.readAsDataURL(t)}))]}))}))}function tr(t){return new Promise((function(e,n){_n.Image.fromURL(t,(function(t){t?e(t):n()}))}))}var er=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return On(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"image"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){$n(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(qn),nr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return On(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"rect"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){$n(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(qn),rr=function(){function t(t){this.board=t;var e=new _n.Image({image:void 0}),n=new _n.Rect;this.image=new er(t,e,{selectable:!1,history:!1}),this.overlay=new nr(t,n,{selectable:!1,history:!1})}return Object.defineProperty(t.prototype,"nodes",{get:function(){return[this.image.node,this.overlay.node]},enumerable:!1,configurable:!0}),t.prototype.getPosition=function(){return{x:this.image.node.x()||this.overlay.node.x(),y:this.image.node.y()||this.overlay.node.y()}},t.prototype.setImageFromFile=function(t){return En(this,void 0,void 0,(function(){var e;return Pn(this,(function(n){switch(n.label){case 0:return[4,Jn(t)];case 1:return e=n.sent(),this.setImageFromUrl(e),[2]}}))}))},t.prototype.setImageFromUrl=function(t){return En(this,void 0,void 0,(function(){var e;return Pn(this,(function(n){switch(n.label){case 0:return this.board.history.create(this.board.layer,[this.board.stage,this.image.node,this.overlay.node],this.board.rescale.bind(this)),[4,tr(t)];case 1:return e=n.sent(),this.board.stage.setAttrs({width:e.width(),height:e.height()}),this.image.node.setAttrs({width:e.width(),height:e.height(),image:e.image()}),this.overlay.node.setAttrs({width:e.width(),height:e.height()}),[2]}}))}))},t.prototype.fill=function(t){this.board.history.create(this.board.layer,this.overlay.node),this.overlay.node.setAttrs({width:this.board.stage.width(),height:this.board.stage.height(),fill:t})},t}(),ir=function(){function t(t,e,n){this.activeDrawing=null,this.shapesList=[],this.settings=t,this.history=n,this.events=e;var r=this.settings.width||this.settings.container.clientWidth,i=this.settings.height||this.settings.container.clientHeight;this.stage=new _n.Stage({container:this.settings.container,width:r,height:i}),this.stage.content.className=this.settings.containerClassName,Object.assign(this.stage.content.style,{position:"relative",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}),this.stage.on("widthChange",this.rescale.bind(this)),this.stage.on("heightChange",this.rescale.bind(this)),this.settings.disableCanvasContextMenu&&this.settings.container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.layer=new _n.Layer,this.stage.add(this.layer),this.background=new rr(this),this.selection=new Qn(this),this.container=this.settings.container}return t.prototype.getDimensions=function(){return{width:this.background.image.node.width()||this.background.overlay.node.width()||this.stage.width()||this.settings.width,height:this.background.image.node.height()||this.background.overlay.node.height()||this.stage.height()||this.settings.height}},t.prototype.getNodes=function(){return Tn(Tn([],An(this.background.nodes),!1),An(this.shapesList.map((function(t){return t.node}))),!1)},Object.defineProperty(t.prototype,"shapes",{get:function(){return this.shapesList},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeShapes",{get:function(){return this.shapesList.filter((function(t){return t.isActive}))},enumerable:!1,configurable:!0}),t.prototype.addShape=function(t){this.shapesList.push(t)},t.prototype.setShapes=function(t){this.shapesList=t},t.prototype.rescale=function(){var t=this.getContainerTransform();this.stage.content.style.transform!==t&&(this.stage.content.style.transform=t,this.events.emit("board:rescale",{data:{transform:t}}))},t.prototype.setActiveDrawing=function(t){t&&(this.selection.transformer.hide(),this.draw()),t!==this.activeDrawing&&this.events.emit("board:change-active-drawing",{data:{type:t}}),this.activeDrawing=t},t.prototype.getContainerTransform=function(){var t=this.getDimensions(),e=this.container.clientWidth<this.container.clientHeight?this.stage.width()/t.width:this.stage.height()/t.height;return e*this.stage.width()>this.container.clientWidth&&(e=this.container.clientWidth/this.stage.width()),e*this.stage.height()>this.container.clientHeight&&(e=this.container.clientHeight/this.stage.height()),"translate(-50%, -50%) scale("+e.toFixed(6)+")"},t.prototype.draw=function(){this.layer.batchDraw()},t}(),ar=function(){function t(){this.listeners={}}return t.prototype.on=function(t,e){var n=this;(Array.isArray(t)?t:[t]).forEach((function(t){n.listeners[t]||(n.listeners[t]=[]),n.listeners[t].push(e)}))},t.prototype.off=function(t,e){var n=this;(Array.isArray(t)?t:[t]).forEach((function(t){if(n.listeners[t]){var r=n.listeners[t].indexOf(e);r>-1&&n.listeners[t].splice(r,1)}}))},t.prototype.emit=function(t,e){var n=this;(this.listeners[t]||this.listeners["*"])&&["*",t].forEach((function(r){var i;null===(i=n.listeners[r])||void 0===i||i.forEach((function(n){n(jn({name:t},e))}))}))},t}(),or=function(){function t(t,e){this.list=[],this.step=-1,this.settings=t,this.events=e,window.addEventListener("keydown",this.onKeyDown.bind(this))}return t.prototype.getStep=function(){return this.step},t.prototype.getList=function(){return this.list},t.prototype.getState=function(){return this.list[this.step]},t.prototype.create=function(t,e,n){var r=this,i=Array.isArray(e)?e:[e];this.step+=1,this.list=Tn(Tn([],An(this.list.slice(0,this.step)),!1),[{container:t,states:i.map((function(t){return r.getNodeState(t)})),hooks:n}],!1)},t.prototype.undo=function(){var t,e,n=this;this.step<0||(this.applyAttributes((function(t,e){return n.getNodeAttributes(t)})),null===(e=null===(t=this.list[this.step].hooks)||void 0===t?void 0:t.undo)||void 0===e||e.call(t,this.list[this.step].states),this.step-=1,this.events.emit("history:undo",this.getEventData()))},t.prototype.redo=function(){var t,e;this.step!==this.list.length-1&&(this.step+=1,this.applyAttributes((function(t,e){return e})),null===(e=null===(t=this.list[this.step].hooks)||void 0===t?void 0:t.redo)||void 0===e||e.call(t,this.list[this.step].states),this.events.emit("history:redo",this.getEventData()))},t.prototype.jump=function(t){if(!(t<0||t>this.list.length-1||this.step===t))for(;t!==this.step;)t<this.step?this.undo():this.redo()},t.prototype.getNodeState=function(t){var e=t.clone({});return"Group"===t.getType()?{nodes:this.getNodesTree(t),snapshots:this.getNodesTree(e).map((function(t){return t.attrs}))}:{nodes:[t],snapshots:[e.attrs]}},t.prototype.applyAttributes=function(t){var e,n=this,r=this.list[this.step],i=r.container,a=r.states,o=r.hooks;a.forEach((function(e){var r=e.nodes,i=e.snapshots;r.forEach((function(e,r){var a=i[r],o=t(e,a);i[r]=jn({},n.getNodeAttributes(e)),Object.entries(o).forEach((function(t){var n=An(t,1)[0];e.setAttr(n,a[n])}))}))})),null===(e=null===o||void 0===o?void 0:o.execute)||void 0===e||e.call(o,a),i.batchDraw()},t.prototype.getNodesTree=function(t){var e=this;return t?(Array.isArray(t)?t:[t]).reduce((function(t,n){return Tn(Tn(Tn([],An(t),!1),[n],!1),An(e.getNodesTree(n.hasChildren()?n.children:[])),!1)}),[]):[]},t.prototype.getNodeAttributes=function(t){return Wn(jn({x:t.x(),y:t.y(),scaleX:t.scaleX(),scaleY:t.scaleY(),width:t.width(),height:t.height()},t.attrs),["id","container"])},t.prototype.getEventData=function(){return{data:{step:this.step,total:this.list.length,canUndo:this.step>-1,canReset:this.step>-1,canRedo:this.step>-1&&this.step<this.list.length-1}}},t.prototype.onKeyDown=function(t){var e,n,r;if(!1!==(null===(r=null===(n=null===(e=this.settings)||void 0===e?void 0:e.history)||void 0===n?void 0:n.keyboard)||void 0===r?void 0:r.enabled)){var i=t.metaKey||t.ctrlKey,a=!0===t.shiftKey,o=t.key.toLowerCase();i&&!a&&"z"===o&&this.undo(),i&&a&&"z"===o&&this.redo()}},t}(),sr=function(){function t(t){this.board=t}return t.prototype.export=function(t){var e,n=null===(e=this.board.stage.children)||void 0===e?void 0:e.flatMap((function(t){var e;return null===(e=t.children)||void 0===e?void 0:e.filter((function(t){return"Transformer"===t.getClassName()&&t.nodes().length>0}))}));null===n||void 0===n||n.forEach((function(t){return null===t||void 0===t?void 0:t.hide()}));var r=this.board.stage.toDataURL(t);return null===n||void 0===n||n.forEach((function(t){return null===t||void 0===t?void 0:t.show()})),r},t}(),hr=function(){function t(t){this.board=t}return t.prototype.export=function(){var t=this,e=this.nodeToObject(this.board.stage,["container","children"]),n=this.nodeToObject(this.board.layer,["children"]),r=this.board.activeShapes.map((function(e){return t.nodeToObject(e.node)}));return{stage:e,layer:n,background:{image:this.nodeToObject(this.board.background.image.node),overlay:this.nodeToObject(this.board.background.overlay.node)},shapes:r}},t.prototype.nodeToObject=function(t,e){void 0===e&&(e=[]);var n=t.toObject();"Image"===n.className&&t.attrs.image&&(n.attrs.url=t.attrs.image.src);var r=(t.filters()||[]).map((function(t){return Object.keys(_n.Filters).find((function(e){return _n.Filters[e]===t}))}));return{className:n.className,filters:r,children:["Label"].includes(n.className)?n.children:void 0,attrs:Wn(jn(jn({},n.attrs),{x:t.x(),y:t.y(),width:t.width(),height:t.height()}),Tn(["draggable","filters"],An(e),!1))}},t}(),lr=function(){function t(t,e){this.board=t,this.cropper=e,this.image=new sr(this.board),this.json=new hr(this.board)}return t.prototype.toImage=function(t){return this.cropper.stop(),this.image.export(t)},t.prototype.toJson=function(){return this.json.export()},t}(),cr=function(){function t(t,e){this.board=t,this.shapes=e}return t.prototype.json=function(t){var e=t.stage,n=t.layer,r=t.background,i=t.shapes;return En(this,void 0,void 0,(function(){var t=this;return Pn(this,(function(a){switch(a.label){case 0:return this.board.background.overlay.update(r.overlay),r.image.attrs.url?[4,this.board.background.setImageFromUrl(r.image.attrs.url)]:[3,2];case 1:a.sent(),this.board.background.image.update(Wn(r.image.attrs,["url"])),a.label=2;case 2:return this.board.layer.setAttrs(Wn(n.attrs,["width","height"])),this.board.stage.setAttrs(e.attrs),[4,Promise.all(i.map((function(e){return En(t,void 0,void 0,(function(){var t;return Pn(this,(function(n){switch(n.label){case 0:switch(e.className){case"Image":return[3,1];case"Label":return[3,3];case"Line":return[3,4];case"Arrow":return[3,5];case"Circle":return[3,6];case"Ellipse":return[3,7];case"RegularPolygon":return[3,8];case"Rect":return[3,9]}return[3,10];case 1:return[4,this.shapes.image.insert(e.attrs.url,Wn(e.attrs,["url"]))];case 2:return t=n.sent(),[3,10];case 3:return t=this.shapes.label.insert({container:e.attrs,tag:e.children[0].attrs,text:e.children[1].attrs}),[3,10];case 4:return t=this.shapes.line.insert(e.attrs),[3,10];case 5:return t=this.shapes.arrow.insert(e.attrs),[3,10];case 6:return t=this.shapes.circle.insert(e.attrs),[3,10];case 7:return t=this.shapes.ellipse.insert(e.attrs),[3,10];case 8:return t=this.shapes.polygon.insert(e.attrs),[3,10];case 9:return t=this.shapes.rect.insert(e.attrs),[3,10];case 10:return Array.isArray(e.filters)&&(e.filters.forEach((function(e){t.node.filters(Tn(Tn([],An((null===t||void 0===t?void 0:t.node.filters())||[]),!1),[_n.Filters[e]],!1))})),t.node.cache()),[2]}}))}))})))];case 3:return a.sent(),this.board.stage.draw(),[2]}}))}))},t}();function ur(t,e){return{x:t.x*Math.cos(e)+-t.y*Math.sin(e),y:t.x*Math.sin(e)- -t.y*Math.cos(e)}}var dr=function(){function t(t,e){this.board=t,this.options=this.createOptions(e),this.layer=new _n.Layer;var n=new _n.Rect({fill:this.options.overlay.color,opacity:this.options.overlay.opacity,width:this.board.stage.width(),height:this.board.stage.height()});this.overlay=this.createOverlay(),this.cropzone=this.createCropzone(),this.layer.add(n,this.overlay,this.cropzone)}return t.prototype.getCursorEvents=function(){return[{name:"mouseout",cursor:"default"},{name:"mouseover",cursor:"grab"},{name:"dragmove",cursor:"grabbing"},{name:"dragend",cursor:"default"}]},t.prototype.createCropzone=function(){var t,e,n,r,i,a,o,s=this,h=new _n.Group({x:this.options.x,y:this.options.y}),l={x:0,y:0,fill:"transparent",dash:this.options.transformer.borderDash};return this.options.circular?h.add(new _n.Circle(jn(jn({},l),{radius:this.options.radius,stroke:null!==(e=null===(t=this.options.circle)||void 0===t?void 0:t.borderStroke)&&void 0!==e?e:this.options.transformer.borderStroke,strokeWidth:null!==(r=null===(n=this.options.circle)||void 0===n?void 0:n.borderStrokeWidth)&&void 0!==r?r:this.options.transformer.borderStrokeWidth,dash:null!==(a=null===(i=this.options.circle)||void 0===i?void 0:i.borderDash)&&void 0!==a?a:this.options.transformer.borderDash}))):h.add(new _n.Rect(jn(jn({},l),{width:this.options.width,height:this.options.height,stroke:this.options.fixed?this.options.transformer.borderStroke:void 0,strokeWidth:this.options.fixed?this.options.transformer.borderStrokeWidth:void 0}))),(null===(o=this.options.guides)||void 0===o?void 0:o.show)&&h.add.apply(h,Tn([],An(this.createGuideLines()),!1)),this.getCursorEvents().forEach((function(t){var e=t.name,n=t.cursor;h.on(e,(function(){s.board.stage.container().style.cursor=n}))})),h},t.prototype.createGuideLines=function(){var t,e,n=this.options.guides,r={stroke:n.color,strokeWidth:n.width,dash:n.dash};if(this.options.circular)return[new _n.Line(jn({points:[-this.options.radius,0,this.options.radius,0]},r)),new _n.Line(jn({points:[0,-this.options.radius,0,this.options.radius]},r))];var i=this.options,a=i.width,o=i.height,s=n.count||(null===(e=null===(t=Hn.cropper)||void 0===t?void 0:t.guides)||void 0===e?void 0:e.count);return Array.from({length:s}).flatMap((function(t,e){var n=a/(s+1),i=n+e*n,h=o/(s+1),l=h+e*h;return[new _n.Line(jn({points:[i,0,i,o]},r)),new _n.Line(jn({points:[0,l,a,l]},r))]}))},t.prototype.createOverlay=function(){return new _n.Rect({x:0,y:0,width:this.board.stage.width(),height:this.board.stage.height()})},t.prototype.createOptions=function(t){var e,n=jn(jn(jn({},this.board.settings.cropper),{transformer:jn(jn(jn({},this.board.settings.transformer),null===(e=this.board.settings.cropper)||void 0===e?void 0:e.transformer),t.transformer)}),t);return t.circular?jn(jn({circular:!0},n),this.getCircularCropperOptions(n)):jn(jn({circular:!1},n),this.getRectangularCropperOptions(n))},t.prototype.getCircularCropperOptions=function(t){var e,n,r,i,a=null===(e=t.transformer)||void 0===e?void 0:e.borderStrokeWidth,o=(Math.min(this.board.stage.width(),this.board.stage.height())-2*a)/2,s=null!==(n=t.x)&&void 0!==n?n:-1,h=null!==(r=t.y)&&void 0!==r?r:-1;return{radius:null!==(i=t.radius)&&void 0!==i?i:o/t.marginRatio,x:s>=Math.max(s,a)?s:this.board.stage.width()/2,y:h>=Math.max(h,a)?h:this.board.stage.height()/2}},t.prototype.getRectangularCropperOptions=function(t){var e,n,r,i,a=null===(e=t.transformer)||void 0===e?void 0:e.borderStrokeWidth,o=t.fixed?2*a:2*(null===(n=t.transformer)||void 0===n?void 0:n.anchorSize),s=t.aspectRatio||this.board.stage.width()/this.board.stage.height(),h=t.width||(this.board.stage.width()-o)/t.marginRatio,l=t.height||h/s;l>this.board.stage.height()-o&&(h=(l=this.board.stage.height()-o)*s);var c=null!==(r=t.x)&&void 0!==r?r:-1,u=null!==(i=t.y)&&void 0!==i?i:-1;return{aspectRatio:s,width:h,height:l,x:c>=0?Math.max(c,a):(this.board.stage.width()-h)/2,y:u>=0?Math.max(u,a):(this.board.stage.height()-l)/2}},t}(),fr=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.draggable=r.createDraggableOverlay(),r.layer.add(r.draggable),r.setupCropzone(),r.board.stage.add(r.layer),r}return On(e,t),e.prototype.zoom=function(t){this.board.layer.scale({x:t,y:t});var e=this.board.layer.width()*t,n=this.board.layer.height()*t,r=[this.draggable.width()/2,this.draggable.height()/2],i=[e/2,n/2];this.draggable.width(e),this.draggable.height(n);var a=this.getDraggableOverlayBoundRect({x:this.draggable.x()+r[0]-i[0],y:this.draggable.y()+r[1]-i[1]}),o=a.x,s=a.y;this.draggable.x(o),this.draggable.y(s),this.board.layer.x(this.draggable.x()),this.board.layer.y(this.draggable.y()),this.board.draw()},e.prototype.setDraggableOverlayPosition=function(t){var e=t.x,n=t.y,r=this.getDraggableOverlayBoundRect({x:e,y:n}),i=r.x,a=r.y;this.draggable.x(i),this.board.layer.x(i),this.draggable.y(a),this.board.layer.y(a),this.board.draw()},e.prototype.setupCropzone=function(){this.cropzone.draggable(!1)},e.prototype.getDraggableOverlayBoundRect=function(t){var e=this.draggable,n=this.options.circular?2*this.options.radius:this.options.width,r=this.options.circular?2*this.options.radius:this.options.height,i=this.options.circular?this.options.x-this.options.radius:this.options.x,a=this.options.circular?this.options.y-this.options.radius:this.options.y,o=i+n-e.width(),s=a+r-e.height(),h=t.x,l=t.y;return h>=i?h=i:h<=o&&(h=o),l>=a?l=a:l<=s&&(l=s),{x:h,y:l}},e.prototype.createDraggableOverlay=function(){var t=this,e=new _n.Rect({x:0,y:0,width:this.board.stage.width(),height:this.board.stage.height(),fill:"transparent",opacity:0,draggable:!0,dragBoundFunc:function(e){var n=t.getDraggableOverlayBoundRect(e),r=n.x,i=n.y;return t.board.layer.x(r),t.board.layer.y(i),t.board.draw(),{x:r,y:i}}});return this.getCursorEvents().forEach((function(n){var r=n.name,i=n.cursor;e.on(r,(function(){t.board.stage.container().style.cursor=i}))})),e},e}(dr),pr=function(t){function e(e,n){var r=t.call(this,e,jn(jn({},n),{keepRatio:!0}))||this;return r.setupOverlay(),r}return On(e,t),e.prototype.getRect=function(){var t=this.options,e=this.draggable.width()/this.layer.width(),n=this.draggable.height()/this.layer.height();return{x:(t.x-t.radius-this.draggable.x())/e,y:(t.y-t.radius-this.draggable.y())/n,width:2*t.radius/e,height:2*t.radius/n}},e.prototype.setupOverlay=function(){var t=this.options;this.overlay.sceneFunc((function(e,n){e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),e.clip(),e.clearRect(t.x-t.radius,t.y-t.radius,2*t.radius,2*t.radius),e.closePath(),e.fillStrokeShape(n)}))},e}(fr),gr=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.setupOverlay(),r}return On(e,t),e.prototype.getRect=function(){var t=this.options,e=this.draggable.width()/this.layer.width(),n=this.draggable.height()/this.layer.height();return{x:(t.x-this.draggable.x())/e,y:(t.y-this.draggable.y())/n,width:t.width/e,height:t.height/n}},e.prototype.setupOverlay=function(){var t=this.options;this.overlay.sceneFunc((function(e,n){e.beginPath(),e.clearRect(t.x,t.y,t.width,t.height),e.closePath(),e.fillStrokeShape(n)}))},e}(fr),vr=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.transformer=r.createTransformer(),r.layer.add(r.transformer),r.setupCropzone(),r.board.stage.add(r.layer),r}return On(e,t),e.prototype.setPosition=function(t){var e=void 0===t?{x:this.options.x,y:this.options.y}:t,n=e.x,r=e.y,i=this.getCropzoneBoundRect({x:n,y:r}),a=i.x,o=i.y;this.cropzone.x(a),this.cropzone.y(o),this.layer.batchDraw()},e.prototype.getRect=function(){return{x:this.transformer.x(),y:this.transformer.y(),width:this.transformer.width(),height:this.transformer.height()}},e.prototype.setupCropzone=function(){var t=this;this.cropzone.draggable(!0),this.cropzone.dragBoundFunc((function(e){return t.getCropzoneBoundRect(e)}))},e.prototype.getCropzoneBoundRect=function(t){var e=this.options.transformer.borderStrokeWidth,n=(this.options.circular?this.transformer.width()/2:0)+e,r=(this.options.circular?this.transformer.height()/2:0)+e,i=(this.options.circular?this.board.stage.width()-this.transformer.width()/2:this.board.stage.width()-this.transformer.width())-e,a=(this.options.circular?this.board.stage.height()-this.transformer.height()/2:this.board.stage.height()-this.transformer.height())-e;return{x:t.x<=n?Math.max(t.x,n):Math.min(t.x,i),y:t.y<=r?Math.max(t.y,r):Math.min(t.y,a)}},e.prototype.createTransformer=function(){var t=this;return new _n.Transformer(jn(jn({nodes:[this.cropzone],keepRatio:this.options.keepRatio,rotateEnabled:!1},this.options.transformer),{enabledAnchors:Tn(["top-left","top-right","bottom-left","bottom-right"],An(this.options.keepRatio?[]:["top-center","bottom-center"]),!1),boundBoxFunc:function(e,n){return Math.ceil(n.x)<-1||Math.ceil(n.y)<-1||n.width<t.options.minWidth||n.height<t.options.minHeight||n.width>=t.board.stage.width()||n.height>=t.board.stage.height()||n.x+n.width>=t.board.stage.width()||n.y+n.height>=t.board.stage.height()?e:n}}))},e}(dr),br=function(t){function e(e,n){var r=t.call(this,e,jn(jn({},n),{circular:!0,keepRatio:!0}))||this;return r.setupOverlay(),r}return On(e,t),e.prototype.setupOverlay=function(){var t=this;this.overlay.sceneFunc((function(e,n){e.beginPath();var r=t.transformer.width()/2;e.arc(t.cropzone.x(),t.cropzone.y(),r,0,2*Math.PI,!1),e.clip(),e.clearRect(t.cropzone.x()-r,t.cropzone.y()-r,2*r,2*r),e.closePath(),e.fillStrokeShape(n)}))},e}(vr),yr=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.setupOverlay(),r}return On(e,t),e.prototype.setupOverlay=function(){var t=this;this.overlay.sceneFunc((function(e,n){e.beginPath(),e.clearRect(t.cropzone.x(),t.cropzone.y(),t.transformer.width(),t.transformer.height()),e.closePath(),e.fillStrokeShape(n)}))},e}(vr),mr=function(){function t(t){this.board=t}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this.active},enumerable:!1,configurable:!0}),t.prototype.getInstance=function(){return this.instance},t.prototype.start=function(t){if(!this.active){var e=Nn(Hn.cropper,t);this.active=!0,this.board.selection.deselectAll();var n=e.circular,r=e.fixed&&0===this.board.stage.rotation();!r&&n&&(this.instance=new br(this.board,jn(jn({},e),{fixed:!1,circular:!0}))),r||n||(this.instance=new yr(this.board,jn(jn({},e),{fixed:!1,circular:!1}))),r&&n&&(this.instance=new pr(this.board,jn(jn({},e),{fixed:!0,circular:!0}))),r&&!n&&(this.instance=new gr(this.board,jn(jn({},e),{fixed:!0,circular:!1})))}},t.prototype.stop=function(){this.active&&(this.active=!1,this.instance.layer.remove(),this.board.layer.setAttrs({x:0,y:0,scale:{x:1,y:1}}),this.board.draw(),this.board.stage.container().style.cursor="default")},t.prototype.zoom=function(t){if(!this.instance.options.fixed)return!1;this.instance.zoom(t)},t.prototype.setPosition=function(t){this.instance.options.fixed?this.instance.setDraggableOverlayPosition(t):this.instance.setPosition(t)},t.prototype.getRect=function(){return this.isActive?this.instance.getRect():null},t.prototype.crop=function(t){return void 0===t&&(t={}),En(this,void 0,void 0,(function(){var e,n,r,i,a;return Pn(this,(function(o){switch(o.label){case 0:return(e=t.rect||this.getRect())?(this.board.history.create(this.board.stage,Tn([this.board.stage],An(this.board.layer.children||[]),!1)),n=this.board.selection.isVisible,this.stop(),r=this.board.stage,i=Math.min(r.width()/e.width,r.height()/e.height),r.setAttrs({scale:{x:i*r.scaleX(),y:i*r.scaleY()},width:e.width*i,height:e.height*i,x:-e.x*i+r.x()*i,y:-e.y*i+r.y()*i,rotation:r.rotation()}),this.board.background.overlay.hide(),n&&this.board.selection.transformer.hide(),this.board.activeShapes.forEach((function(t){t.node.hide()})),[4,tr(this.board.stage.toDataURL({pixelRatio:1}))]):[2,null];case 1:return a=o.sent(),this.board.background.nodes.forEach((function(t){t.setAttrs({width:a.width(),height:a.height(),rotation:0,x:0,y:0,scale:{x:1,y:1}})})),this.board.background.image.node.setAttrs({image:a.image()}),this.board.shapes.forEach((function(t){if(!t.isDeleted){var e=t.node,n=ur({x:e.x(),y:e.y()},Vn(r.rotation()));e.setAttrs({rotation:e.rotation(),x:n.x*r.scaleX()+r.x(),y:n.y*r.scaleY()+r.y(),scaleX:e.scaleX()*r.scaleX(),scaleY:e.scaleY()*r.scaleY()}).show()}})),this.board.background.overlay.show(),n&&this.board.selection.transformer.show(),r.setAttrs({rotation:0,scaleX:1,scaleY:1,x:0,y:0}),r.batchDraw(),this.board.events.emit("crop",{data:{options:t,rect:e}}),[2,e]}}))}))},t}(),xr=function(){function t(t){this.board=t}return t.prototype.transform=function(t){var e=this;this.board.history.create(this.board.stage,Tn([this.board.stage],An(this.board.getNodes()),!1));var n=Vn(Number(t)),r=this.board.getDimensions(),i=r.width,a=r.height,o=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),h=i*o+a*s,l=a,c=a/(a*o+i*s)*h,u=c/h,d=ur({x:i*u/2,y:a*u/2},n);this.board.stage.setAttrs({width:c,height:l}),this.board.background.nodes.forEach((function(e){e.scale({x:u,y:u}).rotation(Number(t)).x(c/2-d.x).y(l/2-d.y)})),this.board.activeShapes.forEach((function(n){var r,i,a,o,s=null!==(r=n.node.attrs.originalScaleX)&&void 0!==r?r:n.node.scaleX(),h=null!==(i=n.node.attrs.originalScaleY)&&void 0!==i?i:n.node.scaleY(),l=null!==(a=n.node.attrs.originalX)&&void 0!==a?a:n.node.x(),c=null!==(o=n.node.attrs.originalY)&&void 0!==o?o:n.node.y();console.log(n.node.attrs.originalX);var d=ur({x:l,y:c},Vn(t));n.node.setAttrs({originalX:l,originalY:c,originalScaleX:s,originalScaleY:h,rotation:Number(t),x:d.x*u+e.board.background.getPosition().x,y:d.y*u+e.board.background.getPosition().y,scaleX:s*u,scaleY:h*u})})),this.board.events.emit("rotation:transform")},t.prototype.straighten=function(t){this.board.background.nodes.forEach((function(e){$n(e,t)})),this.board.activeShapes.forEach((function(e){e.rotate(t)})),this.board.events.emit("rotation:straighten")},t}(),wr=function(){function t(t,e){this.board=t,this.drawType=e,this.onStartDrawing=this.onStartDrawing.bind(this),this.onFinishDrawing=this.onFinishDrawing.bind(this),this.onDrawing=this.onDrawing.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}return Object.defineProperty(t.prototype,"isDrawing",{get:function(){return this.board.activeDrawing===this.drawType},enumerable:!1,configurable:!0}),t.prototype.insert=function(t){return this.stopDrawing(),this.createShape(t)},t.prototype.draw=function(t){this.config=t,this.stopDrawing(),this.board.setActiveDrawing(this.drawType),this.board.stage.on("mousedown touchstart",this.onStartDrawing),this.board.stage.on("mousemove touchmove",this.onDrawing),this.board.stage.on("mouseup touchend",this.onFinishDrawing),window.addEventListener("mouseup",this.onFinishDrawing),window.addEventListener("touchend",this.onFinishDrawing),window.addEventListener("keydown",this.onKeyDown)},t.prototype.stopDrawing=function(){this.node=null,this.board.setActiveDrawing(null),this.board.stage.container().style.cursor="inherit",this.board.stage.off("mousedown touchstart",this.onStartDrawing),this.board.stage.off("mousemove touchmove",this.onDrawing),this.board.stage.off("mouseup touchend",this.onFinishDrawing),window.removeEventListener("mouseup",this.onFinishDrawing),window.removeEventListener("touchend",this.onFinishDrawing),window.removeEventListener("keydown",this.onKeyDown)},t.prototype.getShapePosition=function(){return{x:this.node.x(),y:this.node.y()}},t.prototype.onStartDrawing=function(){var t=this.board.stage.getPointerPosition(),e=t.x,n=t.y;this.startPoint={x:e,y:n}},t.prototype.onDrawing=function(t){this.isDrawing&&(this.board.stage.container().style.cursor="crosshair")},t.prototype.onFinishDrawing=function(){this.node=null,this.board.stage.container().style.cursor="inherit"},t.prototype.onKeyDown=function(t){if("Escape"===t.key)this.stopDrawing()},t}(),_r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return On(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"text"},enumerable:!1,configurable:!0}),e.prototype.rotate=function(t){$n(this.node,t),this.board.events.emit("shape:rotate",{shapes:[this]})},e}(qn),kr=function(t){function e(e){return t.call(this,e,Un.Text)||this}return On(e,t),e.prototype.insert=function(e){return t.prototype.insert.call(this,e)},e.prototype.draw=function(e){void 0===e&&(e={}),t.prototype.draw.call(this,e)},e.prototype.createShape=function(t){return this.node=new _n.Text(t),new _r(this.board,this.node)},e.prototype.onStartDrawing=function(){t.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(jn({x:this.startPoint.x,y:this.startPoint.y},this.config))},e.prototype.onDrawing=function(e){t.prototype.onDrawing.call(this,e)},e}(wr),Sr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return On(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"line"},enumerable:!1,configurable:!0}),e}(qn),Cr=function(t){function e(e){return t.call(this,e,Un.Line)||this}return On(e,t),e.prototype.insert=function(e){return t.prototype.insert.call(this,e)},e.prototype.draw=function(e){void 0===e&&(e={}),t.prototype.draw.call(this,e)},e.prototype.createShape=function(t){return this.node=new _n.Line(jn({hitStrokeWidth:15},t)),new Sr(this.board,this.node)},e.prototype.onStartDrawing=function(){t.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(jn({globalCompositeOperation:"source-over",points:[this.startPoint.x,this.startPoint.y]},this.config))},e.prototype.onDrawing=function(e){if(t.prototype.onDrawing.call(this,e),this.node){var n=this.board.stage.getPointerPosition();this.node.points(Tn(Tn([],An(this.node.points().slice(0,2)),!1),[n.x,n.y],!1)),this.board.draw()}},e}(wr),Or=function(t){function e(e){return t.call(this,e,Un.Rect)||this}return On(e,t),e.prototype.insert=function(e){return t.prototype.insert.call(this,e)},e.prototype.draw=function(e){void 0===e&&(e={}),t.prototype.draw.call(this,e)},e.prototype.createShape=function(t){return this.node=new _n.Rect(t),new nr(this.board,this.node)},e.prototype.onStartDrawing=function(){t.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(jn({x:this.startPoint.x,y:this.startPoint.y},this.config))},e.prototype.onDrawing=function(e){if(t.prototype.onDrawing.call(this,e),this.node){var n=this.board.stage.getPointerPosition(),r=Math.abs(n.x-this.startPoint.x),i=Math.abs(n.y-this.startPoint.y);this.node.setAttrs({x:Math.min(this.startPoint.x,n.x),y:Math.min(this.startPoint.y,n.y),width:r,height:e.evt.shiftKey?r:i}),this.board.draw()}},e}(wr),jr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return On(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"arrow"},enumerable:!1,configurable:!0}),e}(qn),Er=function(t){function e(e){return t.call(this,e,Un.Arrow)||this}return On(e,t),e.prototype.insert=function(e){return t.prototype.insert.call(this,e)},e.prototype.draw=function(e){void 0===e&&(e={}),t.prototype.draw.call(this,e)},e.prototype.createShape=function(t){return this.node=new _n.Arrow(t),new jr(this.board,this.node)},e.prototype.onStartDrawing=function(){t.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(jn({globalCompositeOperation:"source-over",points:[this.startPoint.x,this.startPoint.y]},this.config))},e.prototype.onDrawing=function(e){if(t.prototype.onDrawing.call(this,e),this.node){var n=this.board.stage.getPointerPosition();this.node.points(Tn(Tn([],An(this.node.points().slice(0,2)),!1),[n.x,n.y],!1)),this.board.draw()}},e}(wr),Pr=function(){function t(t){this.board=t}return t.prototype.insert=function(t){var e,n=new _n.Label(jn(jn({},t.container),{draggable:null===(e=this.board.settings.selection)||void 0===e?void 0:e.interactive})),r=new _n.Text(t.text),i=new _n.Tag(t.tag);return r.setAttr("height","auto"),n.add(i).add(r),new Zn(this.board,n,{transformer:{centeredScaling:!1,enabledAnchors:["middle-left","middle-right"]}})},t}(),Ar=function(t){function e(e){return t.call(this,e,Un.Pencil)||this}return On(e,t),e.prototype.draw=function(e){void 0===e&&(e={}),t.prototype.draw.call(this,e)},e.prototype.createShape=function(t){return this.node=new _n.Line(t),new Sr(this.board,this.node)},e.prototype.onStartDrawing=function(){t.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(jn({globalCompositeOperation:"source-over",points:[this.startPoint.x,this.startPoint.y]},this.config))},e.prototype.onDrawing=function(e){if(t.prototype.onDrawing.call(this,e),this.node){var n=this.board.stage.getPointerPosition();this.node.points(this.node.points().concat([n.x,n.y])),this.board.draw()}},e}(wr),Tr=function(){function t(t){this.board=t}return t.prototype.insert=function(t,e){var n;return void 0===e&&(e={}),En(this,void 0,void 0,(function(){var r,i,a,o,s;return Pn(this,(function(h){switch(h.label){case 0:return t instanceof _n.Image?(r=t,[3,6]):[3,1];case 1:return t instanceof File?[4,Jn(t)]:[3,3];case 2:return i=h.sent(),[3,4];case 3:i=t,h.label=4;case 4:return[4,tr(i)];case 5:r=h.sent(),h.label=6;case 6:return a=r.width()/r.height(),o=this.board.stage.height()/2,s=o*a,r.setAttrs(jn({width:s,height:o,x:(this.board.stage.width()-s)/2,y:(this.board.stage.height()-o)/2,rotation:-1*this.board.stage.rotation(),draggable:null===(n=this.board.settings.selection)||void 0===n?void 0:n.interactive},e)),[2,new er(this.board,r,{transformer:{keepRatio:!0}})]}}))}))},t}();function Rr(t,e){return Math.sqrt(Math.pow(Math.abs(t.x-e.x),2)+Math.pow(Math.abs(t.y-e.y),2))}var Mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return On(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"circle"},enumerable:!1,configurable:!0}),e}(qn),Dr=function(t){function e(e){return t.call(this,e,Un.Circle)||this}return On(e,t),e.prototype.insert=function(e){return t.prototype.insert.call(this,e)},e.prototype.draw=function(e){void 0===e&&(e={}),t.prototype.draw.call(this,e)},e.prototype.createShape=function(t){return this.node=new _n.Circle(t),new Mr(this.board,this.node)},e.prototype.onStartDrawing=function(){t.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(jn({x:this.startPoint.x,y:this.startPoint.y,radius:0},this.config))},e.prototype.onDrawing=function(e){if(t.prototype.onDrawing.call(this,e),this.node){var n=this.board.stage.getPointerPosition();this.node.setAttrs({radius:Rr(n,this.getShapePosition())}),this.board.draw()}},e}(wr),Lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return On(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"ellipse"},enumerable:!1,configurable:!0}),e}(qn),Fr=function(t){function e(e){return t.call(this,e,Un.Ellipse)||this}return On(e,t),e.prototype.insert=function(e){return t.prototype.insert.call(this,e)},e.prototype.draw=function(e){void 0===e&&(e={}),t.prototype.draw.call(this,e)},e.prototype.createShape=function(t){return this.node=new _n.Ellipse(t),new Lr(this.board,this.node)},e.prototype.onStartDrawing=function(){t.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(jn({x:this.startPoint.x,y:this.startPoint.y,radiusX:0,radiusY:0},this.config))},e.prototype.onDrawing=function(e){if(t.prototype.onDrawing.call(this,e),this.node){var n=this.board.stage.getPointerPosition(),r=Math.abs(n.x-this.node.x()),i=Math.abs(n.y-this.node.y());this.node.setAttrs({radiusX:r,radiusY:e.evt.shiftKey?r:i}),this.board.draw()}},e}(wr),Gr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return On(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"polygon"},enumerable:!1,configurable:!0}),e}(qn),Br=function(t){function e(e){return t.call(this,e,Un.Polygon)||this}return On(e,t),e.prototype.insert=function(e){return t.prototype.insert.call(this,e)},e.prototype.draw=function(e){void 0===e&&(e={}),t.prototype.draw.call(this,e)},e.prototype.createShape=function(t){return this.node=new _n.RegularPolygon(t),new Gr(this.board,this.node)},e.prototype.onStartDrawing=function(){t.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(jn({x:this.startPoint.x,y:this.startPoint.y,radius:0,sides:4},this.config))},e.prototype.onDrawing=function(e){if(t.prototype.onDrawing.call(this,e),this.node){var n=this.board.stage.getPointerPosition();this.node.setAttrs({radius:Rr(n,this.getShapePosition())}),this.board.draw()}},e}(wr),zr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return On(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"triangle"},enumerable:!1,configurable:!0}),e}(qn),Nr=function(t){function e(e){return t.call(this,e,Un.Triangle)||this}return On(e,t),e.prototype.insert=function(e){return t.prototype.insert.call(this,e)},e.prototype.draw=function(e){void 0===e&&(e={}),t.prototype.draw.call(this,jn(jn({},e),{sides:3}))},e.prototype.createShape=function(t){return this.node=new _n.RegularPolygon(jn({radius:10,sides:3},t)),new zr(this.board,this.node)},e.prototype.onStartDrawing=function(){t.prototype.onStartDrawing.call(this),this.isDrawing&&this.createShape(jn({x:this.startPoint.x,y:this.startPoint.y,radius:0},this.config))},e.prototype.onDrawing=function(e){if(t.prototype.onDrawing.call(this,e),this.node){var n=this.board.stage.getPointerPosition();this.node.setAttrs({radius:Rr(n,this.getShapePosition())}),this.board.draw()}},e}(wr),Ir=function(){function t(t,e){if(!t.container)throw new Error("It needs to have a container element");this.settings=function(t){return jn({container:t.container},Nn(Hn,Wn(t,["container"])))}(t),this.registerShapes=e,this.init()}return t.prototype.loadFromFile=function(t){return En(this,void 0,void 0,(function(){return Pn(this,(function(e){switch(e.label){case 0:return[4,this.board.background.setImageFromFile(t)];case 1:return e.sent(),[2]}}))}))},t.prototype.loadFromUrl=function(t){return En(this,void 0,void 0,(function(){return Pn(this,(function(e){switch(e.label){case 0:return[4,this.board.background.setImageFromUrl(t)];case 1:return e.sent(),[2]}}))}))},t.prototype.rescale=function(){this.board.rescale()},t.prototype.undo=function(){this.history.undo()},t.prototype.redo=function(){this.history.redo()},t.prototype.on=function(t,e){this.events.on(t,e)},t.prototype.off=function(t,e){this.events.off(t,e)},t.prototype.reset=function(){this.init(),this.events.emit("history:reset")},t.prototype.load=function(t){return En(this,void 0,void 0,(function(){return Pn(this,(function(e){switch(e.label){case 0:return this.reset(),[4,this.import.json(JSON.parse(t))];case 1:return e.sent(),[2]}}))}))},t.prototype.init=function(){var t,e=new ar,n=new or(this.settings,e),r=new ir(this.settings,e,n);this.selection=r.selection,this.flip=new Yn(r),this.filters=new Xn(r),this.cropper=new mr(r),this.rotation=new xr(r),this.shapes=jn({arrow:new Er(r),circle:new Dr(r),ellipse:new Fr(r),image:new Tr(r),label:new Pr(r),line:new Cr(r),pencil:new Ar(r),polygon:new Br(r),rect:new Or(r),triangle:new Nr(r),text:new kr(r)},null===(t=this.registerShapes)||void 0===t?void 0:t.call(this,r)),this.import=new cr(r,this.shapes),this.export=new lr(r,this.cropper),this.board=r,this.events=e,this.history=n},t}()}).call(this,n(132))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(251);function i(t,e,n){return i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(r.a)(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}},i(t,e,n||t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(49);function i(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Object(r.a)(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,h=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){h=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(h)throw o}}}}},,,,,,function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){"use strict";var r=n(342),i="object"==typeof self&&self&&self.Object===Object&&self,a=r.a||i||Function("return this")();e.a=a},,function(t,e,n){"use strict";var r=n(0),i={restoreOnUnmount:!1};e.a="undefined"!==typeof document?function(t,e){void 0===e&&(e=i);var n=Object(r.useRef)(document.title);document.title!==t&&(document.title=t),Object(r.useEffect)((function(){return e&&e.restoreOnUnmount?function(){document.title=n.current}:void 0}),[])}:function(t){}},function(t,e,n){var r=n(317),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();t.exports=a},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(14),i=n(0),a=n(277),o=n(536),s=n(2);function h(t){var e=t.buttonRenderer,n=t.children,h=Object(i.useState)(null),l=Object(r.a)(h,2),c=l[0],u=l[1],d=function(){u(null)},f=Boolean(c),p=f?"base-popover":void 0;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(a.a,{disableRipple:!0,"aria-describedby":p,style:{background:"none",cursor:"pointer"},onClick:function(t){u(t.currentTarget)},children:e({id:p,isOpen:f})}),Object(s.jsx)(o.a,{id:p,open:f,anchorEl:c,onClose:d,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:"function"===typeof n?n({close:d}):n})]})}},function(t,e,n){var r=n(278),i=n(356),a=n(357),o=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?i(t):a(t)}},function(t,e,n){var r=n(382),i=n(385);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},,,function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},,,function(t,e,n){var r=n(264).Symbol;t.exports=r},function(t,e,n){var r=n(319),i=n(364),a=n(281);t.exports=function(t){return a(t)?r(t):i(t)}},,function(t,e,n){var r=n(324),i=n(297);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(372),i=n(373),a=n(374),o=n(375),s=n(376);function h(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}h.prototype.clear=r,h.prototype.delete=i,h.prototype.get=a,h.prototype.has=o,h.prototype.set=s,t.exports=h},function(t,e,n){var r=n(303);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(272)(Object,"create");t.exports=r},function(t,e,n){var r=n(394);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(409),i=n(304),a=n(410),o=n(411),s=n(412),h=n(271),l=n(327),c="[object Map]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",g=l(r),v=l(i),b=l(a),y=l(o),m=l(s),x=h;(r&&x(new r(new ArrayBuffer(1)))!=p||i&&x(new i)!=c||a&&x(a.resolve())!=u||o&&x(new o)!=d||s&&x(new s)!=f)&&(x=function(t){var e=h(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case g:return p;case v:return c;case b:return u;case y:return d;case m:return f}return e}),t.exports=x},function(t,e,n){var r=n(308);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}},function(t,e,n){var r=n(339),i=n(340);t.exports=function(t,e,n,a){var o=!n;n||(n={});for(var s=-1,h=e.length;++s<h;){var l=e[s],c=a?a(n[l],t[l],l,n,t):void 0;void 0===c&&(c=t[l]),o?i(n,l,c):r(n,l,c)}return n}},,,,,,function(t,e,n){var r=n(318),i=n(366);t.exports=function(t,e){return t&&r(t,i(e))}},function(t,e,n){(function(t){var r=n(264),i=n(362),a=e&&!e.nodeType&&e,o=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===a?r.Buffer:void 0,h=(s?s.isBuffer:void 0)||i;t.exports=h}).call(this,n(296)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(317),i=e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===i&&r.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(e){}}();t.exports=s}).call(this,n(296)(t))},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(323)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(282),i=n(377),a=n(378),o=n(379),s=n(380),h=n(381);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=s,l.prototype.set=h,t.exports=l},function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e,n){var r=n(272)(n(264),"Map");t.exports=r},function(t,e,n){var r=n(386),i=n(393),a=n(395),o=n(396),s=n(397);function h(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}h.prototype.clear=r,h.prototype.delete=i,h.prototype.get=a,h.prototype.has=o,h.prototype.set=s,t.exports=h},function(t,e,n){var r=n(408),i=n(334),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(t){return null==t?[]:(t=Object(t),r(o(t),(function(e){return a.call(t,e)})))}:i;t.exports=s},function(t,e,n){var r=n(260),i=n(308),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(o.test(t)||!a.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(271),i=n(265);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e,n){var r=n(319),i=n(437),a=n(281);t.exports=function(t){return a(t)?r(t,!0):i(t)}},function(t,e,n){var r=n(330);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){"use strict";(function(t){var r=n(261),i=n(460),a="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===a?r.a.Buffer:void 0,h=(s?s.isBuffer:void 0)||i.a;e.a=h}).call(this,n(312)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},,,,,function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(132))},function(t,e,n){var r=n(358),i=n(279);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){var r=n(360),i=n(320),a=n(260),o=n(295),s=n(321),h=n(322),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=a(t),c=!n&&i(t),u=!n&&!c&&o(t),d=!n&&!c&&!u&&h(t),f=n||c||u||d,p=f?r(t.length,String):[],g=p.length;for(var v in t)!e&&!l.call(t,v)||f&&("length"==v||u&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,g))||p.push(v);return p}},function(t,e,n){var r=n(361),i=n(265),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,h=r(function(){return arguments}())?r:function(t){return i(t)&&o.call(t,"callee")&&!s.call(t,"callee")};t.exports=h},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(363),i=n(298),a=n(299),o=a&&a.isTypedArray,s=o?i(o):r;t.exports=s},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(271),i=n(275);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},function(t,e,n){var r=n(398),i=n(265);t.exports=function t(e,n,a,o,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!==e&&n!==n:r(e,n,a,o,t,s))}},function(t,e,n){var r=n(399),i=n(402),a=n(403);t.exports=function(t,e,n,o,s,h){var l=1&n,c=t.length,u=e.length;if(c!=u&&!(l&&u>c))return!1;var d=h.get(t),f=h.get(e);if(d&&f)return d==e&&f==t;var p=-1,g=!0,v=2&n?new r:void 0;for(h.set(t,e),h.set(e,t);++p<c;){var b=t[p],y=e[p];if(o)var m=l?o(y,b,p,e,t,h):o(b,y,p,t,e,h);if(void 0!==m){if(m)continue;g=!1;break}if(v){if(!i(e,(function(t,e){if(!a(v,e)&&(b===t||s(b,t,n,o,h)))return v.push(e)}))){g=!1;break}}else if(b!==y&&!s(b,y,n,o,h)){g=!1;break}}return h.delete(t),h.delete(e),g}},function(t,e,n){var r=n(264).Uint8Array;t.exports=r},function(t,e,n){var r=n(332),i=n(306),a=n(279);t.exports=function(t){return r(t,a,i)}},function(t,e,n){var r=n(333),i=n(260);t.exports=function(t,e,n){var a=e(t);return i(t)?a:r(a,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(275);t.exports=function(t){return t===t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(338),i=n(287);t.exports=function(t,e){for(var n=0,a=(e=r(e,t)).length;null!=t&&n<a;)t=t[i(e[n++])];return n&&n==a?t:void 0}},function(t,e,n){var r=n(260),i=n(307),a=n(416),o=n(419);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:a(o(t))}},function(t,e,n){var r=n(340),i=n(303),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var o=t[e];a.call(t,e)&&i(o,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(434);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(333),i=n(301),a=n(306),o=n(334),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,a(t)),t=i(t);return e}:o;t.exports=s},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(132))},,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n(14),i=n(37),a=n(100),o=n(0),s=n(859),h=n(838),l=n(478),c=n(239),u=n(1),d=n(3),f=n(5),p=(n(7),n(40)),g=n.n(p),v=n(233),b=n(2),y=["name"],m=["children","className","clone","component"];function x(t,e){var n={};return Object.keys(t).forEach((function(r){-1===e.indexOf(r)&&(n[r]=t[r])})),n}var w,_=n(270),k=["children"],S=(w=s.b,function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.name,i=Object(d.a)(n,y),a=r,s="function"===typeof t?function(e){return{root:function(n){return t(Object(u.a)({theme:e},n))}}}:{root:t},h=Object(v.a)(s,Object(u.a)({Component:w,name:r||w.displayName,classNamePrefix:a},i));t.filterProps&&(e=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);var l=o.forwardRef((function(t,n){var r=t.children,i=t.className,a=t.clone,s=t.component,l=Object(d.a)(t,m),c=h(t),p=Object(f.a)(c.root,i),g=l;if(e&&(g=x(g,e)),a)return o.cloneElement(r,Object(u.a)({className:Object(f.a)(r.props.className,p)},g));if("function"===typeof r)return r(Object(u.a)({className:p},g));var v=s||w;return Object(b.jsx)(v,Object(u.a)({ref:n,className:p},g,{children:r}))}));return g()(l,w),l})((function(t){var e=t.theme;return{color:"#3a8589",height:3,padding:"13px 0","& .MuiSlider-thumb":{height:27,width:27,backgroundColor:"#fff",border:"1px solid currentColor","&:hover":{boxShadow:"0 0 0 8px rgba(58, 133, 137, 0.16)"},"& .airbnb-bar":{height:9,width:1,backgroundColor:"currentColor",marginLeft:1,marginRight:1}},"& .MuiSlider-track":{height:3},"& .MuiSlider-rail":{color:"dark"===e.palette.mode?"#bfbfbf":"#d8d8d8",opacity:"dark"===e.palette.mode?void 0:1,height:3}}}));function C(t){var e=t.children,n=Object(a.a)(t,k);return Object(b.jsxs)(s.a,Object(i.a)(Object(i.a)({},n),{},{children:[e,Object(b.jsx)("span",{className:"airbnb-bar"}),Object(b.jsx)("span",{className:"airbnb-bar"}),Object(b.jsx)("span",{className:"airbnb-bar"})]}))}function O(t){var e=t.title,n=t.defaultValue,a=t.SliderProps,s=t.valueLabelFormat,u=void 0===s?function(t){return t}:s,d=t.onChange,f=Object(o.useState)(n),p=Object(r.a)(f,2),g=p[0],v=p[1];return Object(b.jsx)(_.a,{buttonRenderer:function(t){var n=t.id,r=t.isOpen;return Object(b.jsx)(h.a,{"aria-describedby":n,size:"medium",avatar:Object(b.jsx)(l.a,{sx:{borderColor:"primary.main"},children:"function"===typeof u?u(g):null!==g&&void 0!==g?g:""}),label:Object(b.jsx)("strong",{children:e}),variant:"outlined",color:"info",sx:{cursor:"pointer",borderColor:r?"primary.main":"info",color:r?"primary.main":"info"}})},children:Object(b.jsx)(c.a,{px:4,pt:5,pb:2,width:"300px",children:Object(b.jsx)(S,Object(i.a)(Object(i.a)({valueLabelDisplay:"on",components:{Thumb:C},valueLabelFormat:u},a),{},{value:g,onChange:function(t,e){v(e),d(e)}}))})})}},,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.flattenNames=void 0;var r=s(n(355)),i=s(n(294)),a=s(n(367)),o=s(n(368));function s(t){return t&&t.__esModule?t:{default:t}}var h=e.flattenNames=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,o.default)(e,(function(e){Array.isArray(e)?t(e).map((function(t){return n.push(t)})):(0,a.default)(e)?(0,i.default)(e,(function(t,e){!0===t&&n.push(e),n.push(e+"-"+t)})):(0,r.default)(e)&&n.push(e)})),n};e.default=h},function(t,e,n){var r=n(271),i=n(260),a=n(265);t.exports=function(t){return"string"==typeof t||!i(t)&&a(t)&&"[object String]"==r(t)}},function(t,e,n){var r=n(278),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(h){}var i=o.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(359)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var h=o[t?s:++i];if(!1===n(a[h],h,a))break}return e}}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(271),i=n(265);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(271),i=n(297),a=n(265),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&i(t.length)&&!!o[r(t)]}},function(t,e,n){var r=n(300),i=n(365),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(323)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(325);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e,n){var r=n(271),i=n(301),a=n(265),o=Function.prototype,s=Object.prototype,h=o.toString,l=s.hasOwnProperty,c=h.call(Object);t.exports=function(t){if(!a(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&h.call(n)==c}},function(t,e,n){var r=n(326),i=n(369),a=n(427),o=n(260);t.exports=function(t,e){return(o(t)?r:a)(t,i(e,3))}},function(t,e,n){var r=n(370),i=n(414),a=n(325),o=n(260),s=n(424);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?o(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e,n){var r=n(371),i=n(413),a=n(336);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(302),i=n(328);t.exports=function(t,e,n,a){var o=n.length,s=o,h=!a;if(null==t)return!s;for(t=Object(t);o--;){var l=n[o];if(h&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<s;){var c=(l=n[o])[0],u=t[c],d=l[1];if(h&&l[2]){if(void 0===u&&!(c in t))return!1}else{var f=new r;if(a)var p=a(u,d,c,t,e,f);if(!(void 0===p?i(d,u,3,a,f):p))return!1}}return!0}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(283),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(283);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(283);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(283);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(282);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(282),i=n(304),a=n(305);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(324),i=n(383),a=n(275),o=n(327),s=/^\[object .+?Constructor\]$/,h=Function.prototype,l=Object.prototype,c=h.toString,u=l.hasOwnProperty,d=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||i(t))&&(r(t)?d:s).test(o(t))}},function(t,e,n){var r=n(384),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(264)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(387),i=n(282),a=n(304);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},function(t,e,n){var r=n(388),i=n(389),a=n(390),o=n(391),s=n(392);function h(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}h.prototype.clear=r,h.prototype.delete=i,h.prototype.get=a,h.prototype.has=o,h.prototype.set=s,t.exports=h},function(t,e,n){var r=n(284);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(284),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(284),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(284);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(285);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(285);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(285);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(285);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(302),i=n(329),a=n(404),o=n(407),s=n(286),h=n(260),l=n(295),c=n(322),u="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,v,b){var y=h(t),m=h(e),x=y?d:s(t),w=m?d:s(e),_=(x=x==u?f:x)==f,k=(w=w==u?f:w)==f,S=x==w;if(S&&l(t)){if(!l(e))return!1;y=!0,_=!1}if(S&&!_)return b||(b=new r),y||c(t)?i(t,e,n,g,v,b):a(t,e,x,n,g,v,b);if(!(1&n)){var C=_&&p.call(t,"__wrapped__"),O=k&&p.call(e,"__wrapped__");if(C||O){var j=C?t.value():t,E=O?e.value():e;return b||(b=new r),v(j,E,n,g,b)}}return!!S&&(b||(b=new r),o(t,e,n,g,v,b))}},function(t,e,n){var r=n(305),i=n(400),a=n(401);function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,t.exports=o},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(278),i=n(330),a=n(303),o=n(329),s=n(405),h=n(406),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;t.exports=function(t,e,n,r,l,u,d){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!u(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=h),t.size!=e.size&&!p)return!1;var g=d.get(t);if(g)return g==e;r|=2,d.set(t,e);var v=o(f(t),f(e),r,l,u,d);return d.delete(t),v;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var r=n(331),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,o,s){var h=1&n,l=r(t),c=l.length;if(c!=r(e).length&&!h)return!1;for(var u=c;u--;){var d=l[u];if(!(h?d in e:i.call(e,d)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var g=!0;s.set(t,e),s.set(e,t);for(var v=h;++u<c;){var b=t[d=l[u]],y=e[d];if(a)var m=h?a(y,b,d,e,t,s):a(b,y,d,t,e,s);if(!(void 0===m?b===y||o(b,y,n,a,s):m)){g=!1;break}v||(v="constructor"==d)}if(g&&!v){var x=t.constructor,w=e.constructor;x==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(g=!1)}return s.delete(t),s.delete(e),g}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}},function(t,e,n){var r=n(272)(n(264),"DataView");t.exports=r},function(t,e,n){var r=n(272)(n(264),"Promise");t.exports=r},function(t,e,n){var r=n(272)(n(264),"Set");t.exports=r},function(t,e,n){var r=n(272)(n(264),"WeakMap");t.exports=r},function(t,e,n){var r=n(335),i=n(279);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var a=e[n],o=t[a];e[n]=[a,o,r(o)]}return e}},function(t,e,n){var r=n(328),i=n(415),a=n(421),o=n(307),s=n(335),h=n(336),l=n(287);t.exports=function(t,e){return o(t)&&s(e)?h(l(t),e):function(n){var o=i(n,t);return void 0===o&&o===e?a(n,t):r(e,o,3)}}},function(t,e,n){var r=n(337);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=n(417),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(a,"$1"):n||t)})),e}));t.exports=o},function(t,e,n){var r=n(418);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(305);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(420);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(278),i=n(326),a=n(260),o=n(308),s=r?r.prototype:void 0,h=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(a(e))return i(e,t)+"";if(o(e))return h?h.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n}},function(t,e,n){var r=n(422),i=n(423);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(338),i=n(320),a=n(260),o=n(321),s=n(297),h=n(287);t.exports=function(t,e,n){for(var l=-1,c=(e=r(e,t)).length,u=!1;++l<c;){var d=h(e[l]);if(!(u=null!=t&&n(t,d)))break;t=t[d]}return u||++l!=c?u:!!(c=null==t?0:t.length)&&s(c)&&o(d,c)&&(a(t)||i(t))}},function(t,e,n){var r=n(425),i=n(426),a=n(307),o=n(287);t.exports=function(t){return a(t)?r(o(t)):i(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(337);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e,n){var r=n(428),i=n(281);t.exports=function(t,e){var n=-1,a=i(t)?Array(t.length):[];return r(t,(function(t,r,i){a[++n]=e(t,r,i)})),a}},function(t,e,n){var r=n(318),i=n(429)(r);t.exports=i},function(t,e,n){var r=n(281);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var a=n.length,o=e?a:-1,s=Object(n);(e?o--:++o<a)&&!1!==i(s[o],o,s););return n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeClasses=void 0;var r=o(n(294)),i=o(n(431)),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function o(t){return t&&t.__esModule?t:{default:t}}var s=e.mergeClasses=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.default&&(0,i.default)(t.default)||{};return e.map((function(e){var i=t[e];return i&&(0,r.default)(i,(function(t,e){n[e]||(n[e]={}),n[e]=a({},n[e],i[e])})),e})),n};e.default=s},function(t,e,n){var r=n(432);t.exports=function(t){return r(t,5)}},function(t,e,n){var r=n(302),i=n(433),a=n(339),o=n(435),s=n(436),h=n(439),l=n(440),c=n(441),u=n(442),d=n(331),f=n(443),p=n(286),g=n(444),v=n(445),b=n(450),y=n(260),m=n(295),x=n(452),w=n(275),_=n(454),k=n(279),S=n(309),C="[object Arguments]",O="[object Function]",j="[object Object]",E={};E[C]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E[j]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E[O]=E["[object WeakMap]"]=!1,t.exports=function t(e,n,P,A,T,R){var M,D=1&n,L=2&n,F=4&n;if(P&&(M=T?P(e,A,T,R):P(e)),void 0!==M)return M;if(!w(e))return e;var G=y(e);if(G){if(M=g(e),!D)return l(e,M)}else{var B=p(e),z=B==O||"[object GeneratorFunction]"==B;if(m(e))return h(e,D);if(B==j||B==C||z&&!T){if(M=L||z?{}:b(e),!D)return L?u(e,s(M,e)):c(e,o(M,e))}else{if(!E[B])return T?e:{};M=v(e,B,D)}}R||(R=new r);var N=R.get(e);if(N)return N;R.set(e,M),_(e)?e.forEach((function(r){M.add(t(r,n,P,r,e,R))})):x(e)&&e.forEach((function(r,i){M.set(i,t(r,n,P,i,e,R))}));var I=G?void 0:(F?L?f:d:L?S:k)(e);return i(I||e,(function(r,i){I&&(r=e[i=r]),a(M,i,t(r,n,P,i,e,R))})),M}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(272),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},function(t,e,n){var r=n(288),i=n(279);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(288),i=n(309);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(275),i=n(300),a=n(438),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return a(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&o.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){(function(t){var r=n(264),i=e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===i?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(296)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(288),i=n(306);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(288),i=n(341);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(332),i=n(341),a=n(309);t.exports=function(t){return r(t,a,i)}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(310),i=n(446),a=n(447),o=n(448),s=n(449);t.exports=function(t,e,n){var h=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new h(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":case"[object Set]":return new h;case"[object Number]":case"[object String]":return new h(t);case"[object RegExp]":return a(t);case"[object Symbol]":return o(t)}}},function(t,e,n){var r=n(310);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(278),i=r?r.prototype:void 0,a=i?i.valueOf:void 0;t.exports=function(t){return a?Object(a.call(t)):{}}},function(t,e,n){var r=n(310);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(451),i=n(301),a=n(300);t.exports=function(t){return"function"!=typeof t.constructor||a(t)?{}:r(i(t))}},function(t,e,n){var r=n(275),i=Object.create,a=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=a},function(t,e,n){var r=n(453),i=n(298),a=n(299),o=a&&a.isMap,s=o?i(o):r;t.exports=s},function(t,e,n){var r=n(286),i=n(265);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(455),i=n(298),a=n(299),o=a&&a.isSet,s=o?i(o):r;t.exports=s},function(t,e,n){var r=n(286),i=n(265);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.autoprefix=void 0;var r,i=n(294),a=(r=i)&&r.__esModule?r:{default:r},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var s={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var e=t&&t.split(" ");return{position:"absolute",top:e&&e[0],right:e&&e[1],bottom:e&&e[2],left:e&&e[3]}},extend:function(t,e){var n=e[t];return n||{extend:t}}},h=e.autoprefix=function(t){var e={};return(0,a.default)(t,(function(t,n){var r={};(0,a.default)(t,(function(t,e){var n=s[e];n?r=o({},r,n(t)):r[e]=t})),e[n]=r})),e};e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hover=void 0;var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(0),o=(r=a)&&r.__esModule?r:{default:r};function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function l(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=e.hover=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,a,l;s(this,r);for(var c=arguments.length,u=Array(c),d=0;d<c;d++)u[d]=arguments[d];return a=l=h(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(u))),l.state={hover:!1},l.handleMouseOver=function(){return l.setState({hover:!0})},l.handleMouseOut=function(){return l.setState({hover:!1})},l.render=function(){return o.default.createElement(e,{onMouseOver:l.handleMouseOver,onMouseOut:l.handleMouseOut},o.default.createElement(t,i({},l.props,l.state)))},h(l,a)}return l(r,n),r}(o.default.Component)};e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.active=void 0;var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(0),o=(r=a)&&r.__esModule?r:{default:r};function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function l(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=e.active=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,a,l;s(this,r);for(var c=arguments.length,u=Array(c),d=0;d<c;d++)u[d]=arguments[d];return a=l=h(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(u))),l.state={active:!1},l.handleMouseDown=function(){return l.setState({active:!0})},l.handleMouseUp=function(){return l.setState({active:!1})},l.render=function(){return o.default.createElement(e,{onMouseDown:l.handleMouseDown,onMouseUp:l.handleMouseUp},o.default.createElement(t,i({},l.props,l.state)))},h(l,a)}return l(r,n),r}(o.default.Component)};e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){var n={},r=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[t]=e};return 0===t&&r("first-child"),t===e-1&&r("last-child"),(0===t||t%2===0)&&r("even"),1===Math.abs(t%2)&&r("odd"),r("nth-child",t),n}},function(t,e,n){"use strict";e.a=function(){return!1}},function(t,e,n){"use strict";(function(t){var r=n(342),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===i&&r.a.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(e){}}();e.a=s}).call(this,n(312)(t))},function(t,e,n){"use strict";(function(t){var r=n(261),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===i?r.a.Buffer:void 0,s=o?o.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(312)(t))},function(t,e,n){var r;!function(i){var a=/^\s+/,o=/\s+$/,s=0,h=i.round,l=i.min,c=i.max,u=i.random;function d(t,e){if(e=e||{},(t=t||"")instanceof d)return t;if(!(this instanceof d))return new d(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,r=null,s=null,h=null,u=!1,d=!1;"string"==typeof t&&(t=function(t){t=t.replace(a,"").replace(o,"").toLowerCase();var e,n=!1;if(A[t])t=A[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=N.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=N.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=N.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=N.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=N.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=N.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=N.hex8.exec(t))return{r:L(e[1]),g:L(e[2]),b:L(e[3]),a:z(e[4]),format:n?"name":"hex8"};if(e=N.hex6.exec(t))return{r:L(e[1]),g:L(e[2]),b:L(e[3]),format:n?"name":"hex"};if(e=N.hex4.exec(t))return{r:L(e[1]+""+e[1]),g:L(e[2]+""+e[2]),b:L(e[3]+""+e[3]),a:z(e[4]+""+e[4]),format:n?"name":"hex8"};if(e=N.hex3.exec(t))return{r:L(e[1]+""+e[1]),g:L(e[2]+""+e[2]),b:L(e[3]+""+e[3]),format:n?"name":"hex"};return!1}(t));"object"==typeof t&&(I(t.r)&&I(t.g)&&I(t.b)?(f=t.r,p=t.g,g=t.b,e={r:255*M(f,255),g:255*M(p,255),b:255*M(g,255)},u=!0,d="%"===String(t.r).substr(-1)?"prgb":"rgb"):I(t.h)&&I(t.s)&&I(t.v)?(r=G(t.s),s=G(t.v),e=function(t,e,n){t=6*M(t,360),e=M(e,100),n=M(n,100);var r=i.floor(t),a=t-r,o=n*(1-e),s=n*(1-a*e),h=n*(1-(1-a)*e),l=r%6;return{r:255*[n,s,o,o,h,n][l],g:255*[h,n,n,s,o,o][l],b:255*[o,o,h,n,n,s][l]}}(t.h,r,s),u=!0,d="hsv"):I(t.h)&&I(t.s)&&I(t.l)&&(r=G(t.s),h=G(t.l),e=function(t,e,n){var r,i,a;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=M(t,360),e=M(e,100),n=M(n,100),0===e)r=i=a=n;else{var s=n<.5?n*(1+e):n+e-n*e,h=2*n-s;r=o(h,s,t+1/3),i=o(h,s,t),a=o(h,s,t-1/3)}return{r:255*r,g:255*i,b:255*a}}(t.h,r,h),u=!0,d="hsl"),t.hasOwnProperty("a")&&(n=t.a));var f,p,g;return n=R(n),{ok:u,format:t.format||d,r:l(255,c(e.r,0)),g:l(255,c(e.g,0)),b:l(255,c(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=h(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=h(this._r)),this._g<1&&(this._g=h(this._g)),this._b<1&&(this._b=h(this._b)),this._ok=n.ok,this._tc_id=s++}function f(t,e,n){t=M(t,255),e=M(e,255),n=M(n,255);var r,i,a=c(t,e,n),o=l(t,e,n),s=(a+o)/2;if(a==o)r=i=0;else{var h=a-o;switch(i=s>.5?h/(2-a-o):h/(a+o),a){case t:r=(e-n)/h+(e<n?6:0);break;case e:r=(n-t)/h+2;break;case n:r=(t-e)/h+4}r/=6}return{h:r,s:i,l:s}}function p(t,e,n){t=M(t,255),e=M(e,255),n=M(n,255);var r,i,a=c(t,e,n),o=l(t,e,n),s=a,h=a-o;if(i=0===a?0:h/a,a==o)r=0;else{switch(a){case t:r=(e-n)/h+(e<n?6:0);break;case e:r=(n-t)/h+2;break;case n:r=(t-e)/h+4}r/=6}return{h:r,s:i,v:s}}function g(t,e,n,r){var i=[F(h(t).toString(16)),F(h(e).toString(16)),F(h(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function v(t,e,n,r){return[F(B(r)),F(h(t).toString(16)),F(h(e).toString(16)),F(h(n).toString(16))].join("")}function b(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.s-=e/100,n.s=D(n.s),d(n)}function y(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.s+=e/100,n.s=D(n.s),d(n)}function m(t){return d(t).desaturate(100)}function x(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.l+=e/100,n.l=D(n.l),d(n)}function w(t,e){e=0===e?0:e||10;var n=d(t).toRgb();return n.r=c(0,l(255,n.r-h(-e/100*255))),n.g=c(0,l(255,n.g-h(-e/100*255))),n.b=c(0,l(255,n.b-h(-e/100*255))),d(n)}function _(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.l-=e/100,n.l=D(n.l),d(n)}function k(t,e){var n=d(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,d(n)}function S(t){var e=d(t).toHsl();return e.h=(e.h+180)%360,d(e)}function C(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+120)%360,s:e.s,l:e.l}),d({h:(n+240)%360,s:e.s,l:e.l})]}function O(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+90)%360,s:e.s,l:e.l}),d({h:(n+180)%360,s:e.s,l:e.l}),d({h:(n+270)%360,s:e.s,l:e.l})]}function j(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+72)%360,s:e.s,l:e.l}),d({h:(n+216)%360,s:e.s,l:e.l})]}function E(t,e,n){e=e||6,n=n||30;var r=d(t).toHsl(),i=360/n,a=[d(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,a.push(d(r));return a}function P(t,e){e=e||6;for(var n=d(t).toHsv(),r=n.h,i=n.s,a=n.v,o=[],s=1/e;e--;)o.push(d({h:r,s:i,v:a})),a=(a+s)%1;return o}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r=this.toRgb();return t=r.r/255,e=r.g/255,n=r.b/255,.2126*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=R(t),this._roundA=h(100*this._a)/100,this},toHsv:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=p(this._r,this._g,this._b),e=h(360*t.h),n=h(100*t.s),r=h(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=f(this._r,this._g,this._b),e=h(360*t.h),n=h(100*t.s),r=h(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return g(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var a=[F(h(t).toString(16)),F(h(e).toString(16)),F(h(n).toString(16)),F(B(r))];if(i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:h(this._r),g:h(this._g),b:h(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+h(this._r)+", "+h(this._g)+", "+h(this._b)+")":"rgba("+h(this._r)+", "+h(this._g)+", "+h(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:h(100*M(this._r,255))+"%",g:h(100*M(this._g,255))+"%",b:h(100*M(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+h(100*M(this._r,255))+"%, "+h(100*M(this._g,255))+"%, "+h(100*M(this._b,255))+"%)":"rgba("+h(100*M(this._r,255))+"%, "+h(100*M(this._g,255))+"%, "+h(100*M(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(T[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+v(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=d(t);n="#"+v(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(b,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(k,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(E,arguments)},complement:function(){return this._applyCombination(S,arguments)},monochromatic:function(){return this._applyCombination(P,arguments)},splitcomplement:function(){return this._applyCombination(j,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(O,arguments)}},d.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:G(t[r]));t=n}return d(t,e)},d.equals=function(t,e){return!(!t||!e)&&d(t).toRgbString()==d(e).toRgbString()},d.random=function(){return d.fromRatio({r:u(),g:u(),b:u()})},d.mix=function(t,e,n){n=0===n?0:n||50;var r=d(t).toRgb(),i=d(e).toRgb(),a=n/100;return d({r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a})},d.readability=function(t,e){var n=d(t),r=d(e);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},d.isReadable=function(t,e,n){var r,i,a=d.readability(t,e);switch(i=!1,(r=function(t){var e,n;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==n&&"large"!==n&&(n="small");return{level:e,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},d.mostReadable=function(t,e,n){var r,i,a,o,s=null,h=0;i=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var l=0;l<e.length;l++)(r=d.readability(t,e[l]))>h&&(h=r,s=d(e[l]));return d.isReadable(t,s,{level:a,size:o})||!i?s:(n.includeFallbackColors=!1,d.mostReadable(t,["#fff","#000"],n))};var A=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=d.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(A);function R(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function M(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"===typeof t&&-1!=t.indexOf("%")}(t);return t=l(e,c(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function D(t){return l(1,c(0,t))}function L(t){return parseInt(t,16)}function F(t){return 1==t.length?"0"+t:""+t}function G(t){return t<=1&&(t=100*t+"%"),t}function B(t){return i.round(255*parseFloat(t)).toString(16)}function z(t){return L(t)/255}var N=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",e="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+e),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+e),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function I(t){return!!N.CSS_UNIT.exec(t)}t.exports?t.exports=d:void 0===(r=function(){return d}.call(e,n,e,t))||(t.exports=r)}(Math)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(0),o=(r=a)&&r.__esModule?r:{default:r};e.default=function(t){var e=t.fill,n=void 0===e?"currentColor":e,r=t.width,a=void 0===r?24:r,s=t.height,h=void 0===s?24:s,l=t.style,c=void 0===l?{}:l,u=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["fill","width","height","style"]);return o.default.createElement("svg",i({viewBox:"0 0 24 24",style:i({fill:n,width:a,height:h},c)},u),o.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(0),o=(r=a)&&r.__esModule?r:{default:r};e.default=function(t){var e=t.fill,n=void 0===e?"currentColor":e,r=t.width,a=void 0===r?24:r,s=t.height,h=void 0===s?24:s,l=t.style,c=void 0===l?{}:l,u=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["fill","width","height","style"]);return o.default.createElement("svg",i({viewBox:"0 0 24 24",style:i({fill:n,width:a,height:h},c)},u),o.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return Ba}));var r=n(14),i=n(0),a=n.n(i),o=n(838),s=n(478),h=n(247),l=n.n(h),c=function(t,e,n,r,i){var a=i.clientWidth,o=i.clientHeight,s="number"===typeof t.pageX?t.pageX:t.touches[0].pageX,h="number"===typeof t.pageY?t.pageY:t.touches[0].pageY,l=s-(i.getBoundingClientRect().left+window.pageXOffset),c=h-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var u=void 0;if(u=c<0?0:c>o?1:Math.round(100*c/o)/100,e.a!==u)return{h:e.h,s:e.s,l:e.l,a:u,source:"rgb"}}else{var d=void 0;if(r!==(d=l<0?0:l>a?1:Math.round(100*l/a)/100))return{h:e.h,s:e.s,l:e.l,a:d,source:"rgb"}}return null},u={},d=function(t,e,n,r){var i=t+"-"+e+"-"+n+(r?"-server":"");if(u[i])return u[i];var a=function(t,e,n,r){if("undefined"===typeof document&&!r)return null;var i=r?new r:document.createElement("canvas");i.width=2*n,i.height=2*n;var a=i.getContext("2d");return a?(a.fillStyle=t,a.fillRect(0,0,i.width,i.height),a.fillStyle=e,a.fillRect(0,0,n,n),a.translate(n,n),a.fillRect(0,0,n,n),i.toDataURL()):null}(t,e,n,r);return u[i]=a,a},f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p=function(t){var e=t.white,n=t.grey,r=t.size,o=t.renderers,s=t.borderRadius,h=t.boxShadow,c=t.children,u=l()({default:{grid:{borderRadius:s,boxShadow:h,absolute:"0px 0px 0px 0px",background:"url("+d(e,n,r,o.canvas)+") center left"}}});return Object(i.isValidElement)(c)?a.a.cloneElement(c,f({},c.props,{style:f({},c.props.style,u.grid)})):a.a.createElement("div",{style:u.grid})};p.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var g=p,v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}var x=function(t){function e(){var t,n,r;y(this,e);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=m(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),r.handleChange=function(t){var e=c(t,r.props.hsl,r.props.direction,r.props.a,r.container);e&&"function"===typeof r.props.onChange&&r.props.onChange(e,t)},r.handleMouseDown=function(t){r.handleChange(t),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},m(r,n)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),b(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var t=this,e=this.props.rgb,n=l()({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+e.r+","+e.g+","+e.b+", 0) 0%,\n           rgba("+e.r+","+e.g+","+e.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*e.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+e.r+","+e.g+","+e.b+", 0) 0%,\n           rgba("+e.r+","+e.g+","+e.b+", 1) 100%)"},pointer:{left:0,top:100*e.a+"%"}},overwrite:v({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return a.a.createElement("div",{style:n.alpha},a.a.createElement("div",{style:n.checkboard},a.a.createElement(g,{renderers:this.props.renderers})),a.a.createElement("div",{style:n.gradient}),a.a.createElement("div",{style:n.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.a.createElement("div",{style:n.pointer},this.props.pointer?a.a.createElement(this.props.pointer,this.props):a.a.createElement("div",{style:n.slider}))))}}]),e}(i.PureComponent||i.Component),w=x,_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var k=[38,40],S=1,C=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(t){n.setUpdatedValue(t.target.value,t)},n.handleKeyDown=function(t){var e,r=function(t){return Number(String(t).replace(/%/g,""))}(t.target.value);if(!isNaN(r)&&(e=t.keyCode,k.indexOf(e)>-1)){var i=n.getArrowOffset(),a=38===t.keyCode?r+i:r-i;n.setUpdatedValue(a,t)}},n.handleDrag=function(t){if(n.props.dragLabel){var e=Math.round(n.props.value+t.movementX);e>=0&&e<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(e),t)}},n.handleMouseDown=function(t){n.props.dragLabel&&(t.preventDefault(),n.handleDrag(t),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(t.value).toUpperCase(),blurValue:String(t.value).toUpperCase()},n.inputId="rc-editable-input-"+S++,n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),_(e,[{key:"componentDidUpdate",value:function(t,e){this.props.value===this.state.value||t.value===this.props.value&&e.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},this.props.label,t)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(t,e){var n=this.props.label?this.getValueObjectWithLabel(t):t;this.props.onChange&&this.props.onChange(n,e),this.setState({value:t})}},{key:"render",value:function(){var t=this,e=l()({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return a.a.createElement("div",{style:e.wrap},a.a.createElement("input",{id:this.inputId,style:e.input,ref:function(e){return t.input=e},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?a.a.createElement("label",{htmlFor:this.inputId,style:e.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(i.PureComponent||i.Component),O=function(t,e,n,r){var i=r.clientWidth,a=r.clientHeight,o="number"===typeof t.pageX?t.pageX:t.touches[0].pageX,s="number"===typeof t.pageY?t.pageY:t.touches[0].pageY,h=o-(r.getBoundingClientRect().left+window.pageXOffset),l=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===e){var c=void 0;if(l<0)c=359;else if(l>a)c=0;else{c=360*(-100*l/a+100)/100}if(n.h!==c)return{h:c,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var u=void 0;if(h<0)u=0;else if(h>i)u=359;else{u=360*(100*h/i)/100}if(n.h!==u)return{h:u,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},j=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}var A=function(t){function e(){var t,n,r;E(this,e);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=P(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),r.handleChange=function(t){var e=O(t,r.props.direction,r.props.hsl,r.container);e&&"function"===typeof r.props.onChange&&r.props.onChange(e,t)},r.handleMouseDown=function(t){r.handleChange(t),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},P(r,n)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),j(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=this,e=this.props.direction,n=void 0===e?"horizontal":e,r=l()({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return a.a.createElement("div",{style:r.hue},a.a.createElement("div",{className:"hue-"+n,style:r.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.a.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),a.a.createElement("div",{style:r.pointer},this.props.pointer?a.a.createElement(this.props.pointer,this.props):a.a.createElement("div",{style:r.slider}))))}}]),e}(i.PureComponent||i.Component),T=A,R=n(7),M=n.n(R);var D=function(){this.__data__=[],this.size=0};var L=function(t,e){return t===e||t!==t&&e!==e};var F=function(t,e){for(var n=t.length;n--;)if(L(t[n][0],e))return n;return-1},G=Array.prototype.splice;var B=function(t){var e=this.__data__,n=F(e,t);return!(n<0)&&(n==e.length-1?e.pop():G.call(e,n,1),--this.size,!0)};var z=function(t){var e=this.__data__,n=F(e,t);return n<0?void 0:e[n][1]};var N=function(t){return F(this.__data__,t)>-1};var I=function(t,e){var n=this.__data__,r=F(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function H(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}H.prototype.clear=D,H.prototype.delete=B,H.prototype.get=z,H.prototype.has=N,H.prototype.set=I;var W=H;var X=function(){this.__data__=new W,this.size=0};var U=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var Y=function(t){return this.__data__.get(t)};var q=function(t){return this.__data__.has(t)},V=n(261),K=V.a.Symbol,$=Object.prototype,Z=$.hasOwnProperty,Q=$.toString,J=K?K.toStringTag:void 0;var tt=function(t){var e=Z.call(t,J),n=t[J];try{t[J]=void 0;var r=!0}catch(a){}var i=Q.call(t);return r&&(e?t[J]=n:delete t[J]),i},et=Object.prototype.toString;var nt=function(t){return et.call(t)},rt=K?K.toStringTag:void 0;var it=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":rt&&rt in Object(t)?tt(t):nt(t)};var at=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var ot=function(t){if(!at(t))return!1;var e=it(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},st=V.a["__core-js_shared__"],ht=function(){var t=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var lt=function(t){return!!ht&&ht in t},ct=Function.prototype.toString;var ut=function(t){if(null!=t){try{return ct.call(t)}catch(e){}try{return t+""}catch(e){}}return""},dt=/^\[object .+?Constructor\]$/,ft=Function.prototype,pt=Object.prototype,gt=ft.toString,vt=pt.hasOwnProperty,bt=RegExp("^"+gt.call(vt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var yt=function(t){return!(!at(t)||lt(t))&&(ot(t)?bt:dt).test(ut(t))};var mt=function(t,e){return null==t?void 0:t[e]};var xt=function(t,e){var n=mt(t,e);return yt(n)?n:void 0},wt=xt(V.a,"Map"),_t=xt(Object,"create");var kt=function(){this.__data__=_t?_t(null):{},this.size=0};var St=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ct=Object.prototype.hasOwnProperty;var Ot=function(t){var e=this.__data__;if(_t){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Ct.call(e,t)?e[t]:void 0},jt=Object.prototype.hasOwnProperty;var Et=function(t){var e=this.__data__;return _t?void 0!==e[t]:jt.call(e,t)};var Pt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=_t&&void 0===e?"__lodash_hash_undefined__":e,this};function At(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}At.prototype.clear=kt,At.prototype.delete=St,At.prototype.get=Ot,At.prototype.has=Et,At.prototype.set=Pt;var Tt=At;var Rt=function(){this.size=0,this.__data__={hash:new Tt,map:new(wt||W),string:new Tt}};var Mt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Dt=function(t,e){var n=t.__data__;return Mt(e)?n["string"==typeof e?"string":"hash"]:n.map};var Lt=function(t){var e=Dt(this,t).delete(t);return this.size-=e?1:0,e};var Ft=function(t){return Dt(this,t).get(t)};var Gt=function(t){return Dt(this,t).has(t)};var Bt=function(t,e){var n=Dt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function zt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}zt.prototype.clear=Rt,zt.prototype.delete=Lt,zt.prototype.get=Ft,zt.prototype.has=Gt,zt.prototype.set=Bt;var Nt=zt;var It=function(t,e){var n=this.__data__;if(n instanceof W){var r=n.__data__;if(!wt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Nt(r)}return n.set(t,e),this.size=n.size,this};function Ht(t){var e=this.__data__=new W(t);this.size=e.size}Ht.prototype.clear=X,Ht.prototype.delete=U,Ht.prototype.get=Y,Ht.prototype.has=q,Ht.prototype.set=It;var Wt=Ht,Xt=function(){try{var t=xt(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();var Ut=function(t,e,n){"__proto__"==e&&Xt?Xt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var Yt=function(t,e,n){(void 0!==n&&!L(t[e],n)||void 0===n&&!(e in t))&&Ut(t,e,n)};var qt=function(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var h=o[t?s:++i];if(!1===n(a[h],h,a))break}return e}}(),Vt=n(462),Kt=V.a.Uint8Array;var $t=function(t){var e=new t.constructor(t.byteLength);return new Kt(e).set(new Kt(t)),e};var Zt=function(t,e){var n=e?$t(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var Qt=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},Jt=Object.create,te=function(){function t(){}return function(e){if(!at(e))return{};if(Jt)return Jt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var ee=function(t,e){return function(n){return t(e(n))}},ne=ee(Object.getPrototypeOf,Object),re=Object.prototype;var ie=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||re)};var ae=function(t){return"function"!=typeof t.constructor||ie(t)?{}:te(ne(t))};var oe=function(t){return null!=t&&"object"==typeof t};var se=function(t){return oe(t)&&"[object Arguments]"==it(t)},he=Object.prototype,le=he.hasOwnProperty,ce=he.propertyIsEnumerable,ue=se(function(){return arguments}())?se:function(t){return oe(t)&&le.call(t,"callee")&&!ce.call(t,"callee")},de=ue,fe=Array.isArray;var pe=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var ge=function(t){return null!=t&&pe(t.length)&&!ot(t)};var ve=function(t){return oe(t)&&ge(t)},be=n(311),ye=Function.prototype,me=Object.prototype,xe=ye.toString,we=me.hasOwnProperty,_e=xe.call(Object);var ke=function(t){if(!oe(t)||"[object Object]"!=it(t))return!1;var e=ne(t);if(null===e)return!0;var n=we.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&xe.call(n)==_e},Se={};Se["[object Float32Array]"]=Se["[object Float64Array]"]=Se["[object Int8Array]"]=Se["[object Int16Array]"]=Se["[object Int32Array]"]=Se["[object Uint8Array]"]=Se["[object Uint8ClampedArray]"]=Se["[object Uint16Array]"]=Se["[object Uint32Array]"]=!0,Se["[object Arguments]"]=Se["[object Array]"]=Se["[object ArrayBuffer]"]=Se["[object Boolean]"]=Se["[object DataView]"]=Se["[object Date]"]=Se["[object Error]"]=Se["[object Function]"]=Se["[object Map]"]=Se["[object Number]"]=Se["[object Object]"]=Se["[object RegExp]"]=Se["[object Set]"]=Se["[object String]"]=Se["[object WeakMap]"]=!1;var Ce=function(t){return oe(t)&&pe(t.length)&&!!Se[it(t)]};var Oe=function(t){return function(e){return t(e)}},je=n(461),Ee=je.a&&je.a.isTypedArray,Pe=Ee?Oe(Ee):Ce;var Ae=function(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]},Te=Object.prototype.hasOwnProperty;var Re=function(t,e,n){var r=t[e];Te.call(t,e)&&L(r,n)&&(void 0!==n||e in t)||Ut(t,e,n)};var Me=function(t,e,n,r){var i=!n;n||(n={});for(var a=-1,o=e.length;++a<o;){var s=e[a],h=r?r(n[s],t[s],s,n,t):void 0;void 0===h&&(h=t[s]),i?Ut(n,s,h):Re(n,s,h)}return n};var De=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},Le=/^(?:0|[1-9]\d*)$/;var Fe=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Le.test(t))&&t>-1&&t%1==0&&t<e},Ge=Object.prototype.hasOwnProperty;var Be=function(t,e){var n=fe(t),r=!n&&de(t),i=!n&&!r&&Object(be.a)(t),a=!n&&!r&&!i&&Pe(t),o=n||r||i||a,s=o?De(t.length,String):[],h=s.length;for(var l in t)!e&&!Ge.call(t,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Fe(l,h))||s.push(l);return s};var ze=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},Ne=Object.prototype.hasOwnProperty;var Ie=function(t){if(!at(t))return ze(t);var e=ie(t),n=[];for(var r in t)("constructor"!=r||!e&&Ne.call(t,r))&&n.push(r);return n};var He=function(t){return ge(t)?Be(t,!0):Ie(t)};var We=function(t){return Me(t,He(t))};var Xe=function(t,e,n,r,i,a,o){var s=Ae(t,n),h=Ae(e,n),l=o.get(h);if(l)Yt(t,n,l);else{var c=a?a(s,h,n+"",t,e,o):void 0,u=void 0===c;if(u){var d=fe(h),f=!d&&Object(be.a)(h),p=!d&&!f&&Pe(h);c=h,d||f||p?fe(s)?c=s:ve(s)?c=Qt(s):f?(u=!1,c=Object(Vt.a)(h,!0)):p?(u=!1,c=Zt(h,!0)):c=[]:ke(h)||de(h)?(c=s,de(s)?c=We(s):at(s)&&!ot(s)||(c=ae(h))):u=!1}u&&(o.set(h,c),i(c,h,r,a,o),o.delete(h)),Yt(t,n,c)}};var Ue=function t(e,n,r,i,a){e!==n&&qt(n,(function(o,s){if(a||(a=new Wt),at(o))Xe(e,n,s,r,t,i,a);else{var h=i?i(Ae(e,s),o,s+"",e,n,a):void 0;void 0===h&&(h=o),Yt(e,s,h)}}),He)};var Ye=function(t){return t};var qe=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Ve=Math.max;var Ke=function(t,e,n){return e=Ve(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=Ve(r.length-e,0),o=Array(a);++i<a;)o[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(o),qe(t,this,s)}};var $e=function(t){return function(){return t}},Ze=Xt?function(t,e){return Xt(t,"toString",{configurable:!0,enumerable:!1,value:$e(e),writable:!0})}:Ye,Qe=Date.now;var Je=function(t){var e=0,n=0;return function(){var r=Qe(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},tn=Je(Ze);var en=function(t,e){return tn(Ke(t,e,Ye),t+"")};var nn=function(t,e,n){if(!at(n))return!1;var r=typeof e;return!!("number"==r?ge(n)&&Fe(e,n.length):"string"==r&&e in n)&&L(n[e],t)};var rn=function(t){return en((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,o&&nn(n[0],n[1],o)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,a)}return e}))}((function(t,e,n){Ue(t,e,n)})),an=function(t){var e=t.zDepth,n=t.radius,r=t.background,i=t.children,o=t.styles,s=void 0===o?{}:o,h=l()(rn({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+e+"px "+4*e+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},s),{"zDepth-1":1===e});return a.a.createElement("div",{style:h.wrap},a.a.createElement("div",{style:h.bg}),a.a.createElement("div",{style:h.content},i))};an.propTypes={background:M.a.string,zDepth:M.a.oneOf([0,1,2,3,4,5]),radius:M.a.number,styles:M.a.object},an.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var on=an,sn=function(){return V.a.Date.now()},hn=/\s/;var ln=function(t){for(var e=t.length;e--&&hn.test(t.charAt(e)););return e},cn=/^\s+/;var un=function(t){return t?t.slice(0,ln(t)+1).replace(cn,""):t};var dn=function(t){return"symbol"==typeof t||oe(t)&&"[object Symbol]"==it(t)},fn=/^[-+]0x[0-9a-f]+$/i,pn=/^0b[01]+$/i,gn=/^0o[0-7]+$/i,vn=parseInt;var bn=function(t){if("number"==typeof t)return t;if(dn(t))return NaN;if(at(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=at(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=un(t);var n=pn.test(t);return n||gn.test(t)?vn(t.slice(2),n?2:8):fn.test(t)?NaN:+t},yn=Math.max,mn=Math.min;var xn=function(t,e,n){var r,i,a,o,s,h,l=0,c=!1,u=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=r,a=i;return r=i=void 0,l=e,o=t.apply(a,n)}function p(t){return l=t,s=setTimeout(v,e),c?f(t):o}function g(t){var n=t-h;return void 0===h||n>=e||n<0||u&&t-l>=a}function v(){var t=sn();if(g(t))return b(t);s=setTimeout(v,function(t){var n=e-(t-h);return u?mn(n,a-(t-l)):n}(t))}function b(t){return s=void 0,d&&r?f(t):(r=i=void 0,o)}function y(){var t=sn(),n=g(t);if(r=arguments,i=this,h=t,n){if(void 0===s)return p(h);if(u)return clearTimeout(s),s=setTimeout(v,e),f(h)}return void 0===s&&(s=setTimeout(v,e)),o}return e=bn(e)||0,at(n)&&(c=!!n.leading,a=(u="maxWait"in n)?yn(bn(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=h=i=s=void 0},y.flush=function(){return void 0===s?o:b(sn())},y};var wn=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return at(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),xn(t,e,{leading:r,maxWait:e,trailing:i})},_n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var kn=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.handleChange=function(t){"function"===typeof n.props.onChange&&n.throttle(n.props.onChange,function(t,e,n){var r=n.getBoundingClientRect(),i=r.width,a=r.height,o="number"===typeof t.pageX?t.pageX:t.touches[0].pageX,s="number"===typeof t.pageY?t.pageY:t.touches[0].pageY,h=o-(n.getBoundingClientRect().left+window.pageXOffset),l=s-(n.getBoundingClientRect().top+window.pageYOffset);h<0?h=0:h>i&&(h=i),l<0?l=0:l>a&&(l=a);var c=h/i,u=1-l/a;return{h:e.h,s:c,v:u,a:e.a,source:"hsv"}}(t,n.props.hsl,n.container),t)},n.handleMouseDown=function(t){n.handleChange(t);var e=n.getContainerRenderWindow();e.addEventListener("mousemove",n.handleChange),e.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=wn((function(t,e,n){t(e,n)}),50),n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),_n(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var t=this.container,e=window;!e.document.contains(t)&&e.parent!==e;)e=e.parent;return e}},{key:"unbindEventListeners",value:function(){var t=this.getContainerRenderWindow();t.removeEventListener("mousemove",this.handleChange),t.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=this,e=this.props.style||{},n=e.color,r=e.white,i=e.black,o=e.pointer,s=e.circle,h=l()({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:i,pointer:o,circle:s}},{custom:!!this.props.style});return a.a.createElement("div",{style:h.color,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.a.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),a.a.createElement("div",{style:h.white,className:"saturation-white"},a.a.createElement("div",{style:h.black,className:"saturation-black"}),a.a.createElement("div",{style:h.pointer},this.props.pointer?a.a.createElement(this.props.pointer,this.props):a.a.createElement("div",{style:h.circle}))))}}]),e}(i.PureComponent||i.Component);var Sn=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},Cn=ee(Object.keys,Object),On=Object.prototype.hasOwnProperty;var jn=function(t){if(!ie(t))return Cn(t);var e=[];for(var n in Object(t))On.call(t,n)&&"constructor"!=n&&e.push(n);return e};var En=function(t){return ge(t)?Be(t):jn(t)};var Pn=function(t,e){return function(n,r){if(null==n)return n;if(!ge(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=Object(n);(e?a--:++a<i)&&!1!==r(o[a],a,o););return n}}((function(t,e){return t&&qt(t,e,En)}));var An=function(t){return"function"==typeof t?t:Ye};var Tn=function(t,e){return(fe(t)?Sn:Pn)(t,An(e))},Rn=n(463),Mn=n.n(Rn),Dn=function(t){var e=0,n=0;return Tn(["r","g","b","a","h","s","l","v"],(function(r){if(t[r]&&(e+=1,isNaN(t[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(t[r])&&(n+=1)}})),e===n&&t},Ln=function(t,e){var n=t.hex?Mn()(t.hex):Mn()(t),r=n.toHsl(),i=n.toHsv(),a=n.toRgb(),o=n.toHex();return 0===r.s&&(r.h=e||0,i.h=e||0),{hsl:r,hex:"000000"===o&&0===a.a?"transparent":"#"+o,rgb:a,hsv:i,oldHue:t.h||e||r.h,source:t.source}},Fn=function(t){if("transparent"===t)return!0;var e="#"===String(t).charAt(0)?1:0;return t.length!==4+e&&t.length<7+e&&Mn()(t).isValid()},Gn=function(t){if(!t)return"#fff";var e=Ln(t);return"transparent"===e.hex?"rgba(0,0,0,0.4)":(299*e.rgb.r+587*e.rgb.g+114*e.rgb.b)/1e3>=128?"#000":"#fff"},Bn=function(t,e){var n=t.replace("\xb0","");return Mn()(e+" ("+n+")")._ok},zn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nn=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var In=function(t){var e=function(e){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.handleChange=function(t,n){if(Dn(t)){var r=Ln(t,t.h||e.state.oldHue);e.setState(r),e.props.onChangeComplete&&e.debounce(e.props.onChangeComplete,r,n),e.props.onChange&&e.props.onChange(r,n)}},e.handleSwatchHover=function(t,n){if(Dn(t)){var r=Ln(t,t.h||e.state.oldHue);e.props.onSwatchHover&&e.props.onSwatchHover(r,n)}},e.state=zn({},Ln(t.color,0)),e.debounce=xn((function(t,e,n){t(e,n)}),100),e}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),Nn(n,[{key:"render",value:function(){var e={};return this.props.onSwatchHover&&(e.onSwatchHover=this.handleSwatchHover),a.a.createElement(t,zn({},this.props,this.state,{onChange:this.handleChange},e))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return zn({},Ln(t.color,e.oldHue))}}]),n}(i.PureComponent||i.Component);return e.propTypes=zn({},t.propTypes),e.defaultProps=zn({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),e},Hn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wn=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function Xn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Un(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function Yn(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var qn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var t,e,n;Xn(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=n=Un(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(a))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},Un(n,e)}return Yn(r,n),Wn(r,[{key:"render",value:function(){return a.a.createElement(e,{onFocus:this.handleFocus,onBlur:this.handleBlur},a.a.createElement(t,Hn({},this.props,this.state)))}}]),r}(a.a.Component)}((function(t){var e=t.color,n=t.style,r=t.onClick,i=void 0===r?function(){}:r,o=t.onHover,s=t.title,h=void 0===s?e:s,c=t.children,u=t.focus,d=t.focusStyle,f=void 0===d?{}:d,p="transparent"===e,v=l()({default:{swatch:qn({background:e,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,u?f:{})}}),b={};return o&&(b.onMouseOver=function(t){return o(e,t)}),a.a.createElement("div",qn({style:v.swatch,onClick:function(t){return i(e,t)},title:h,tabIndex:0,onKeyDown:function(t){return 13===t.keyCode&&i(e,t)}},b),c,p&&a.a.createElement(g,{borderRadius:v.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))})),Kn=function(t){var e=t.direction,n=l()({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===e});return a.a.createElement("div",{style:n.picker})},$n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zn=function(t){var e=t.rgb,n=t.hsl,r=t.width,i=t.height,o=t.onChange,s=t.direction,h=t.style,c=t.renderers,u=t.pointer,d=t.className,f=void 0===d?"":d,p=l()({default:{picker:{position:"relative",width:r,height:i},alpha:{radius:"2px",style:h}}});return a.a.createElement("div",{style:p.picker,className:"alpha-picker "+f},a.a.createElement(w,$n({},p.alpha,{rgb:e,hsl:n,pointer:u,renderers:c,onChange:o,direction:s})))};Zn.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Kn};In(Zn);var Qn=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i};var Jn=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var tr=function(t){return this.__data__.has(t)};function er(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Nt;++e<n;)this.add(t[e])}er.prototype.add=er.prototype.push=Jn,er.prototype.has=tr;var nr=er;var rr=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var ir=function(t,e){return t.has(e)};var ar=function(t,e,n,r,i,a){var o=1&n,s=t.length,h=e.length;if(s!=h&&!(o&&h>s))return!1;var l=a.get(t),c=a.get(e);if(l&&c)return l==e&&c==t;var u=-1,d=!0,f=2&n?new nr:void 0;for(a.set(t,e),a.set(e,t);++u<s;){var p=t[u],g=e[u];if(r)var v=o?r(g,p,u,e,t,a):r(p,g,u,t,e,a);if(void 0!==v){if(v)continue;d=!1;break}if(f){if(!rr(e,(function(t,e){if(!ir(f,e)&&(p===t||i(p,t,n,r,a)))return f.push(e)}))){d=!1;break}}else if(p!==g&&!i(p,g,n,r,a)){d=!1;break}}return a.delete(t),a.delete(e),d};var or=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n};var sr=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},hr=K?K.prototype:void 0,lr=hr?hr.valueOf:void 0;var cr=function(t,e,n,r,i,a,o){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new Kt(t),new Kt(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return L(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=or;case"[object Set]":var h=1&r;if(s||(s=sr),t.size!=e.size&&!h)return!1;var l=o.get(t);if(l)return l==e;r|=2,o.set(t,e);var c=ar(s(t),s(e),r,i,a,o);return o.delete(t),c;case"[object Symbol]":if(lr)return lr.call(t)==lr.call(e)}return!1};var ur=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t};var dr=function(t,e,n){var r=e(t);return fe(t)?r:ur(r,n(t))};var fr=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a};var pr=function(){return[]},gr=Object.prototype.propertyIsEnumerable,vr=Object.getOwnPropertySymbols,br=vr?function(t){return null==t?[]:(t=Object(t),fr(vr(t),(function(e){return gr.call(t,e)})))}:pr;var yr=function(t){return dr(t,En,br)},mr=Object.prototype.hasOwnProperty;var xr=function(t,e,n,r,i,a){var o=1&n,s=yr(t),h=s.length;if(h!=yr(e).length&&!o)return!1;for(var l=h;l--;){var c=s[l];if(!(o?c in e:mr.call(e,c)))return!1}var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var f=!0;a.set(t,e),a.set(e,t);for(var p=o;++l<h;){var g=t[c=s[l]],v=e[c];if(r)var b=o?r(v,g,c,e,t,a):r(g,v,c,t,e,a);if(!(void 0===b?g===v||i(g,v,n,r,a):b)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var y=t.constructor,m=e.constructor;y==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m||(f=!1)}return a.delete(t),a.delete(e),f},wr=xt(V.a,"DataView"),_r=xt(V.a,"Promise"),kr=xt(V.a,"Set"),Sr=xt(V.a,"WeakMap"),Cr="[object Map]",Or="[object Promise]",jr="[object Set]",Er="[object WeakMap]",Pr="[object DataView]",Ar=ut(wr),Tr=ut(wt),Rr=ut(_r),Mr=ut(kr),Dr=ut(Sr),Lr=it;(wr&&Lr(new wr(new ArrayBuffer(1)))!=Pr||wt&&Lr(new wt)!=Cr||_r&&Lr(_r.resolve())!=Or||kr&&Lr(new kr)!=jr||Sr&&Lr(new Sr)!=Er)&&(Lr=function(t){var e=it(t),n="[object Object]"==e?t.constructor:void 0,r=n?ut(n):"";if(r)switch(r){case Ar:return Pr;case Tr:return Cr;case Rr:return Or;case Mr:return jr;case Dr:return Er}return e});var Fr=Lr,Gr="[object Arguments]",Br="[object Array]",zr="[object Object]",Nr=Object.prototype.hasOwnProperty;var Ir=function(t,e,n,r,i,a){var o=fe(t),s=fe(e),h=o?Br:Fr(t),l=s?Br:Fr(e),c=(h=h==Gr?zr:h)==zr,u=(l=l==Gr?zr:l)==zr,d=h==l;if(d&&Object(be.a)(t)){if(!Object(be.a)(e))return!1;o=!0,c=!1}if(d&&!c)return a||(a=new Wt),o||Pe(t)?ar(t,e,n,r,i,a):cr(t,e,h,n,r,i,a);if(!(1&n)){var f=c&&Nr.call(t,"__wrapped__"),p=u&&Nr.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,v=p?e.value():e;return a||(a=new Wt),i(g,v,n,r,a)}}return!!d&&(a||(a=new Wt),xr(t,e,n,r,i,a))};var Hr=function t(e,n,r,i,a){return e===n||(null==e||null==n||!oe(e)&&!oe(n)?e!==e&&n!==n:Ir(e,n,r,i,t,a))};var Wr=function(t,e,n,r){var i=n.length,a=i,o=!r;if(null==t)return!a;for(t=Object(t);i--;){var s=n[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var h=(s=n[i])[0],l=t[h],c=s[1];if(o&&s[2]){if(void 0===l&&!(h in t))return!1}else{var u=new Wt;if(r)var d=r(l,c,h,t,e,u);if(!(void 0===d?Hr(c,l,3,r,u):d))return!1}}return!0};var Xr=function(t){return t===t&&!at(t)};var Ur=function(t){for(var e=En(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Xr(i)]}return e};var Yr=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};var qr=function(t){var e=Ur(t);return 1==e.length&&e[0][2]?Yr(e[0][0],e[0][1]):function(n){return n===t||Wr(n,t,e)}},Vr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Kr=/^\w*$/;var $r=function(t,e){if(fe(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!dn(t))||(Kr.test(t)||!Vr.test(t)||null!=e&&t in Object(e))};function Zr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Zr.Cache||Nt),n}Zr.Cache=Nt;var Qr=Zr;var Jr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ti=/\\(\\)?/g,ei=function(t){var e=Qr(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Jr,(function(t,n,r,i){e.push(r?i.replace(ti,"$1"):n||t)})),e})),ni=K?K.prototype:void 0,ri=ni?ni.toString:void 0;var ii=function t(e){if("string"==typeof e)return e;if(fe(e))return Qn(e,t)+"";if(dn(e))return ri?ri.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n};var ai=function(t){return null==t?"":ii(t)};var oi=function(t,e){return fe(t)?t:$r(t,e)?[t]:ei(ai(t))};var si=function(t){if("string"==typeof t||dn(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var hi=function(t,e){for(var n=0,r=(e=oi(e,t)).length;null!=t&&n<r;)t=t[si(e[n++])];return n&&n==r?t:void 0};var li=function(t,e,n){var r=null==t?void 0:hi(t,e);return void 0===r?n:r};var ci=function(t,e){return null!=t&&e in Object(t)};var ui=function(t,e,n){for(var r=-1,i=(e=oi(e,t)).length,a=!1;++r<i;){var o=si(e[r]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&pe(i)&&Fe(o,i)&&(fe(t)||de(t))};var di=function(t,e){return null!=t&&ui(t,e,ci)};var fi=function(t,e){return $r(t)&&Xr(e)?Yr(si(t),e):function(n){var r=li(n,t);return void 0===r&&r===e?di(n,t):Hr(e,r,3)}};var pi=function(t){return function(e){return null==e?void 0:e[t]}};var gi=function(t){return function(e){return hi(e,t)}};var vi=function(t){return $r(t)?pi(si(t)):gi(t)};var bi=function(t){return"function"==typeof t?t:null==t?Ye:"object"==typeof t?fe(t)?fi(t[0],t[1]):qr(t):vi(t)};var yi=function(t,e){var n=-1,r=ge(t)?Array(t.length):[];return Pn(t,(function(t,i,a){r[++n]=e(t,i,a)})),r};var mi=function(t,e){return(fe(t)?Qn:yi)(t,bi(e,3))},xi=function(t){var e=t.colors,n=t.onClick,r=t.onSwatchHover,i=l()({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return a.a.createElement("div",{style:i.swatches},mi(e,(function(t){return a.a.createElement(Vn,{key:t,color:t,style:i.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+t}})})),a.a.createElement("div",{style:i.clear}))},wi=function(t){var e=t.onChange,n=t.onSwatchHover,r=t.hex,i=t.colors,o=t.width,s=t.triangle,h=t.styles,c=void 0===h?{}:h,u=t.className,d=void 0===u?"":u,f="transparent"===r,p=function(t,n){Fn(t)&&e({hex:t,source:"hex"},n)},v=l()(rn({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Gn(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},c),{"hide-triangle":"hide"===s});return a.a.createElement("div",{style:v.card,className:"block-picker "+d},a.a.createElement("div",{style:v.triangle}),a.a.createElement("div",{style:v.head},f&&a.a.createElement(g,{borderRadius:"6px 6px 0 0"}),a.a.createElement("div",{style:v.label},r)),a.a.createElement("div",{style:v.body},a.a.createElement(xi,{colors:i,onClick:p,onSwatchHover:n}),a.a.createElement(C,{style:{input:v.input},value:r,onChange:p})))};wi.propTypes={width:M.a.oneOfType([M.a.string,M.a.number]),colors:M.a.arrayOf(M.a.string),triangle:M.a.oneOf(["top","hide"]),styles:M.a.object},wi.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};In(wi);var _i={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},ki={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Si={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},Ci={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Oi={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},ji={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},Ei={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},Pi={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},Ai={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},Ti={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},Ri={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},Mi={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},Di={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},Li={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},Fi={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},Gi={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},Bi={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},zi={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},Ni=function(t){var e=t.color,n=t.onClick,r=t.onSwatchHover,i=t.hover,o=t.active,s=t.circleSize,h=t.circleSpacing,c=l()({default:{swatch:{width:s,height:s,marginRight:h,marginBottom:h,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(s/2+1)+"px "+e,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+e}}},{hover:i,active:o});return a.a.createElement("div",{style:c.swatch},a.a.createElement(Vn,{style:c.Swatch,color:e,onClick:n,onHover:r,focusStyle:{boxShadow:c.Swatch.boxShadow+", 0 0 5px "+e}}))};Ni.defaultProps={circleSize:28,circleSpacing:14};var Ii=Object(h.handleHover)(Ni),Hi=function(t){var e=t.width,n=t.onChange,r=t.onSwatchHover,i=t.colors,o=t.hex,s=t.circleSize,h=t.styles,c=void 0===h?{}:h,u=t.circleSpacing,d=t.className,f=void 0===d?"":d,p=l()(rn({default:{card:{width:e,display:"flex",flexWrap:"wrap",marginRight:-u,marginBottom:-u}}},c)),g=function(t,e){return n({hex:t,source:"hex"},e)};return a.a.createElement("div",{style:p.card,className:"circle-picker "+f},mi(i,(function(t){return a.a.createElement(Ii,{key:t,color:t,onClick:g,onSwatchHover:r,active:o===t.toLowerCase(),circleSize:s,circleSpacing:u})})))};Hi.propTypes={width:M.a.oneOfType([M.a.string,M.a.number]),circleSize:M.a.number,circleSpacing:M.a.number,styles:M.a.object},Hi.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[_i[500],ki[500],Si[500],Ci[500],Oi[500],ji[500],Ei[500],Pi[500],Ai[500],Ti[500],Ri[500],Mi[500],Di[500],Li[500],Fi[500],Gi[500],Bi[500],zi[500]],styles:{}};In(Hi);var Wi=function(t){return void 0===t},Xi=n(464),Ui=n.n(Xi),Yi=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var qi=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(t,e){t.hex?Fn(t.hex)&&n.props.onChange({hex:t.hex,source:"hex"},e):t.r||t.g||t.b?n.props.onChange({r:t.r||n.props.rgb.r,g:t.g||n.props.rgb.g,b:t.b||n.props.rgb.b,source:"rgb"},e):t.a?(t.a<0?t.a=0:t.a>1&&(t.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*t.a)/100,source:"rgb"},e)):(t.h||t.s||t.l)&&("string"===typeof t.s&&t.s.includes("%")&&(t.s=t.s.replace("%","")),"string"===typeof t.l&&t.l.includes("%")&&(t.l=t.l.replace("%","")),1==t.s?t.s=.01:1==t.l&&(t.l=.01),n.props.onChange({h:t.h||n.props.hsl.h,s:Number(Wi(t.s)?n.props.hsl.s:t.s),l:Number(Wi(t.l)?n.props.hsl.l:t.l),source:"hsl"},e))},n.showHighlight=function(t){t.currentTarget.style.background="#eee"},n.hideHighlight=function(t){t.currentTarget.style.background="transparent"},1!==t.hsl.a&&"hex"===t.view?n.state={view:"rgb"}:n.state={view:t.view},n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),Yi(e,[{key:"render",value:function(){var t=this,e=l()({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=a.a.createElement("div",{style:e.fields,className:"flexbox-fix"},a.a.createElement("div",{style:e.field},a.a.createElement(C,{style:{input:e.input,label:e.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=a.a.createElement("div",{style:e.fields,className:"flexbox-fix"},a.a.createElement("div",{style:e.field},a.a.createElement(C,{style:{input:e.input,label:e.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),a.a.createElement("div",{style:e.field},a.a.createElement(C,{style:{input:e.input,label:e.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),a.a.createElement("div",{style:e.field},a.a.createElement(C,{style:{input:e.input,label:e.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),a.a.createElement("div",{style:e.alpha},a.a.createElement(C,{style:{input:e.input,label:e.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=a.a.createElement("div",{style:e.fields,className:"flexbox-fix"},a.a.createElement("div",{style:e.field},a.a.createElement(C,{style:{input:e.input,label:e.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),a.a.createElement("div",{style:e.field},a.a.createElement(C,{style:{input:e.input,label:e.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),a.a.createElement("div",{style:e.field},a.a.createElement(C,{style:{input:e.input,label:e.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),a.a.createElement("div",{style:e.alpha},a.a.createElement(C,{style:{input:e.input,label:e.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),a.a.createElement("div",{style:e.wrap,className:"flexbox-fix"},n,a.a.createElement("div",{style:e.toggle},a.a.createElement("div",{style:e.icon,onClick:this.toggleViews,ref:function(e){return t.icon=e}},a.a.createElement(Ui.a,{style:e.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return 1!==t.hsl.a&&"hex"===e.view?{view:"rgb"}:null}}]),e}(a.a.Component);qi.defaultProps={view:"hex"};var Vi=qi,Ki=function(){var t=l()({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return a.a.createElement("div",{style:t.picker})},$i=function(){var t=l()({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return a.a.createElement("div",{style:t.picker})},Zi=function(t){var e=t.width,n=t.onChange,r=t.disableAlpha,i=t.rgb,o=t.hsl,s=t.hsv,h=t.hex,c=t.renderers,u=t.styles,d=void 0===u?{}:u,f=t.className,p=void 0===f?"":f,v=t.defaultView,b=l()(rn({default:{picker:{width:e,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},d),{disableAlpha:r});return a.a.createElement("div",{style:b.picker,className:"chrome-picker "+p},a.a.createElement("div",{style:b.saturation},a.a.createElement(kn,{style:b.Saturation,hsl:o,hsv:s,pointer:$i,onChange:n})),a.a.createElement("div",{style:b.body},a.a.createElement("div",{style:b.controls,className:"flexbox-fix"},a.a.createElement("div",{style:b.color},a.a.createElement("div",{style:b.swatch},a.a.createElement("div",{style:b.active}),a.a.createElement(g,{renderers:c}))),a.a.createElement("div",{style:b.toggles},a.a.createElement("div",{style:b.hue},a.a.createElement(T,{style:b.Hue,hsl:o,pointer:Ki,onChange:n})),a.a.createElement("div",{style:b.alpha},a.a.createElement(w,{style:b.Alpha,rgb:i,hsl:o,pointer:Ki,renderers:c,onChange:n})))),a.a.createElement(Vi,{rgb:i,hsl:o,hex:h,view:v,onChange:n,disableAlpha:r})))};Zi.propTypes={width:M.a.oneOfType([M.a.string,M.a.number]),disableAlpha:M.a.bool,styles:M.a.object,defaultView:M.a.oneOf(["hex","rgb","hsl"])},Zi.defaultProps={width:225,disableAlpha:!1,styles:{}};In(Zi);var Qi=function(t){var e=t.color,n=t.onClick,r=void 0===n?function(){}:n,i=t.onSwatchHover,o=t.active,s=l()({default:{color:{background:e,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:Gn(e),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":"#FFFFFF"===e,transparent:"transparent"===e});return a.a.createElement(Vn,{style:s.color,color:e,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+e}},a.a.createElement("div",{style:s.dot}))},Ji=function(t){var e=t.hex,n=t.rgb,r=t.onChange,i=l()({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:e},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(t,e){t.r||t.g||t.b?r({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,source:"rgb"},e):r({hex:t.hex,source:"hex"},e)};return a.a.createElement("div",{style:i.fields,className:"flexbox-fix"},a.a.createElement("div",{style:i.active}),a.a.createElement(C,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:e,onChange:o}),a.a.createElement(C,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:o}),a.a.createElement(C,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:o}),a.a.createElement(C,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:o}))},ta=function(t){var e=t.onChange,n=t.onSwatchHover,r=t.colors,i=t.hex,o=t.rgb,s=t.styles,h=void 0===s?{}:s,c=t.className,u=void 0===c?"":c,d=l()(rn({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},h)),f=function(t,n){t.hex?Fn(t.hex)&&e({hex:t.hex,source:"hex"},n):e(t,n)};return a.a.createElement(on,{style:d.Compact,styles:h},a.a.createElement("div",{style:d.compact,className:"compact-picker "+u},a.a.createElement("div",null,mi(r,(function(t){return a.a.createElement(Qi,{key:t,color:t,active:t.toLowerCase()===i,onClick:f,onSwatchHover:n})})),a.a.createElement("div",{style:d.clear})),a.a.createElement(Ji,{hex:i,rgb:o,onChange:f})))};ta.propTypes={colors:M.a.arrayOf(M.a.string),styles:M.a.object},ta.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};In(ta);var ea=Object(h.handleHover)((function(t){var e=t.hover,n=t.color,r=t.onClick,i=t.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},s=l()({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:e});return a.a.createElement("div",{style:s.swatch},a.a.createElement(Vn,{color:n,onClick:r,onHover:i,focusStyle:o}))})),na=function(t){var e=t.width,n=t.colors,r=t.onChange,i=t.onSwatchHover,o=t.triangle,s=t.styles,h=void 0===s?{}:s,c=t.className,u=void 0===c?"":c,d=l()(rn({default:{card:{width:e,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},h),{"hide-triangle":"hide"===o,"top-left-triangle":"top-left"===o,"top-right-triangle":"top-right"===o,"bottom-left-triangle":"bottom-left"===o,"bottom-right-triangle":"bottom-right"===o}),f=function(t,e){return r({hex:t,source:"hex"},e)};return a.a.createElement("div",{style:d.card,className:"github-picker "+u},a.a.createElement("div",{style:d.triangleShadow}),a.a.createElement("div",{style:d.triangle}),mi(n,(function(t){return a.a.createElement(ea,{color:t,key:t,onClick:f,onSwatchHover:i})})))};na.propTypes={width:M.a.oneOfType([M.a.string,M.a.number]),colors:M.a.arrayOf(M.a.string),triangle:M.a.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:M.a.object},na.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};In(na);var ra=function(t){var e=t.direction,n=l()({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===e});return a.a.createElement("div",{style:n.picker})},ia=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aa=function(t){var e=t.width,n=t.height,r=t.onChange,i=t.hsl,o=t.direction,s=t.pointer,h=t.styles,c=void 0===h?{}:h,u=t.className,d=void 0===u?"":u,f=l()(rn({default:{picker:{position:"relative",width:e,height:n},hue:{radius:"2px"}}},c));return a.a.createElement("div",{style:f.picker,className:"hue-picker "+d},a.a.createElement(T,ia({},f.hue,{hsl:i,pointer:s,onChange:function(t){return r({a:1,h:t.h,l:.5,s:1})},direction:o})))};aa.propTypes={styles:M.a.object},aa.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:ra,styles:{}};In(aa),In((function(t){var e=t.onChange,n=t.hex,r=t.rgb,i=t.styles,o=void 0===i?{}:i,s=t.className,h=void 0===s?"":s,c=l()(rn({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),u=function(t,n){t.hex?Fn(t.hex)&&e({hex:t.hex,source:"hex"},n):(t.r||t.g||t.b)&&e({r:t.r||r.r,g:t.g||r.g,b:t.b||r.b,source:"rgb"},n)};return a.a.createElement(on,{styles:o},a.a.createElement("div",{style:c.material,className:"material-picker "+h},a.a.createElement(C,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"hex",value:n,onChange:u}),a.a.createElement("div",{style:c.split,className:"flexbox-fix"},a.a.createElement("div",{style:c.third},a.a.createElement(C,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:r.r,onChange:u})),a.a.createElement("div",{style:c.third},a.a.createElement(C,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:r.g,onChange:u})),a.a.createElement("div",{style:c.third},a.a.createElement(C,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:r.b,onChange:u})))))}));var oa=function(t){var e=t.onChange,n=t.rgb,r=t.hsv,i=t.hex,o=l()({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),s=function(t,i){t["#"]?Fn(t["#"])&&e({hex:t["#"],source:"hex"},i):t.r||t.g||t.b?e({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,source:"rgb"},i):(t.h||t.s||t.v)&&e({h:t.h||r.h,s:t.s||r.s,v:t.v||r.v,source:"hsv"},i)};return a.a.createElement("div",{style:o.fields},a.a.createElement(C,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(r.h),onChange:s}),a.a.createElement(C,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(100*r.s),onChange:s}),a.a.createElement(C,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(100*r.v),onChange:s}),a.a.createElement("div",{style:o.divider}),a.a.createElement(C,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:s}),a.a.createElement(C,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:s}),a.a.createElement(C,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:s}),a.a.createElement("div",{style:o.divider}),a.a.createElement(C,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:i.replace("#",""),onChange:s}),a.a.createElement("div",{style:o.fieldSymbols},a.a.createElement("div",{style:o.symbol},"\xb0"),a.a.createElement("div",{style:o.symbol},"%"),a.a.createElement("div",{style:o.symbol},"%")))},sa=function(t){var e=t.hsl,n=l()({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":e.l>.5});return a.a.createElement("div",{style:n.picker})},ha=function(){var t=l()({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return a.a.createElement("div",{style:t.pointer},a.a.createElement("div",{style:t.left},a.a.createElement("div",{style:t.leftInside})),a.a.createElement("div",{style:t.right},a.a.createElement("div",{style:t.rightInside})))},la=function(t){var e=t.onClick,n=t.label,r=t.children,i=t.active,o=l()({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return a.a.createElement("div",{style:o.button,onClick:e},n||r)},ca=function(t){var e=t.rgb,n=t.currentColor,r=l()({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+e.r+","+e.g+", "+e.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return a.a.createElement("div",null,a.a.createElement("div",{style:r.label},"new"),a.a.createElement("div",{style:r.swatches},a.a.createElement("div",{style:r.new}),a.a.createElement("div",{style:r.current})),a.a.createElement("div",{style:r.label},"current"))},ua=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var da=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={currentColor:t.hex},n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),ua(e,[{key:"render",value:function(){var t=this.props,e=t.styles,n=void 0===e?{}:e,r=t.className,i=void 0===r?"":r,o=l()(rn({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return a.a.createElement("div",{style:o.picker,className:"photoshop-picker "+i},a.a.createElement("div",{style:o.head},this.props.header),a.a.createElement("div",{style:o.body,className:"flexbox-fix"},a.a.createElement("div",{style:o.saturation},a.a.createElement(kn,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:sa,onChange:this.props.onChange})),a.a.createElement("div",{style:o.hue},a.a.createElement(T,{direction:"vertical",hsl:this.props.hsl,pointer:ha,onChange:this.props.onChange})),a.a.createElement("div",{style:o.controls},a.a.createElement("div",{style:o.top,className:"flexbox-fix"},a.a.createElement("div",{style:o.previews},a.a.createElement(ca,{rgb:this.props.rgb,currentColor:this.state.currentColor})),a.a.createElement("div",{style:o.actions},a.a.createElement(la,{label:"OK",onClick:this.props.onAccept,active:!0}),a.a.createElement(la,{label:"Cancel",onClick:this.props.onCancel}),a.a.createElement(oa,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(a.a.Component);da.propTypes={header:M.a.string,styles:M.a.object},da.defaultProps={header:"Color Picker",styles:{}};In(da);var fa=function(t){var e=t.onChange,n=t.rgb,r=t.hsl,i=t.hex,o=t.disableAlpha,s=l()({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),h=function(t,i){t.hex?Fn(t.hex)&&e({hex:t.hex,source:"hex"},i):t.r||t.g||t.b?e({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,a:n.a,source:"rgb"},i):t.a&&(t.a<0?t.a=0:t.a>100&&(t.a=100),t.a/=100,e({h:r.h,s:r.s,l:r.l,a:t.a,source:"rgb"},i))};return a.a.createElement("div",{style:s.fields,className:"flexbox-fix"},a.a.createElement("div",{style:s.double},a.a.createElement(C,{style:{input:s.input,label:s.label},label:"hex",value:i.replace("#",""),onChange:h})),a.a.createElement("div",{style:s.single},a.a.createElement(C,{style:{input:s.input,label:s.label},label:"r",value:n.r,onChange:h,dragLabel:"true",dragMax:"255"})),a.a.createElement("div",{style:s.single},a.a.createElement(C,{style:{input:s.input,label:s.label},label:"g",value:n.g,onChange:h,dragLabel:"true",dragMax:"255"})),a.a.createElement("div",{style:s.single},a.a.createElement(C,{style:{input:s.input,label:s.label},label:"b",value:n.b,onChange:h,dragLabel:"true",dragMax:"255"})),a.a.createElement("div",{style:s.alpha},a.a.createElement(C,{style:{input:s.input,label:s.label},label:"a",value:Math.round(100*n.a),onChange:h,dragLabel:"true",dragMax:"100"})))},pa=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ga=function(t){var e=t.colors,n=t.onClick,r=void 0===n?function(){}:n,i=t.onSwatchHover,o=l()({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!e||!e.length}),s=function(t,e){r({hex:t,source:"hex"},e)};return a.a.createElement("div",{style:o.colors,className:"flexbox-fix"},e.map((function(t){var e="string"===typeof t?{color:t}:t,n=""+e.color+(e.title||"");return a.a.createElement("div",{key:n,style:o.swatchWrap},a.a.createElement(Vn,pa({},e,{style:o.swatch,onClick:s,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+e.color}})))})))};ga.propTypes={colors:M.a.arrayOf(M.a.oneOfType([M.a.string,M.a.shape({color:M.a.string,title:M.a.string})])).isRequired};var va=ga,ba=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ya=function(t){var e=t.width,n=t.rgb,r=t.hex,i=t.hsv,o=t.hsl,s=t.onChange,h=t.onSwatchHover,c=t.disableAlpha,u=t.presetColors,d=t.renderers,f=t.styles,p=void 0===f?{}:f,v=t.className,b=void 0===v?"":v,y=l()(rn({default:ba({picker:{width:e,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},p),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},p),{disableAlpha:c});return a.a.createElement("div",{style:y.picker,className:"sketch-picker "+b},a.a.createElement("div",{style:y.saturation},a.a.createElement(kn,{style:y.Saturation,hsl:o,hsv:i,onChange:s})),a.a.createElement("div",{style:y.controls,className:"flexbox-fix"},a.a.createElement("div",{style:y.sliders},a.a.createElement("div",{style:y.hue},a.a.createElement(T,{style:y.Hue,hsl:o,onChange:s})),a.a.createElement("div",{style:y.alpha},a.a.createElement(w,{style:y.Alpha,rgb:n,hsl:o,renderers:d,onChange:s}))),a.a.createElement("div",{style:y.color},a.a.createElement(g,null),a.a.createElement("div",{style:y.activeColor}))),a.a.createElement(fa,{rgb:n,hsl:o,hex:r,onChange:s,disableAlpha:c}),a.a.createElement(va,{colors:u,onClick:s,onSwatchHover:h}))};ya.propTypes={disableAlpha:M.a.bool,width:M.a.oneOfType([M.a.string,M.a.number]),styles:M.a.object},ya.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};var ma=In(ya),xa=function(t){var e=t.hsl,n=t.offset,r=t.onClick,i=void 0===r?function(){}:r,o=t.active,s=t.first,h=t.last,c=l()({default:{swatch:{height:"12px",background:"hsl("+e.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:s,last:h});return a.a.createElement("div",{style:c.swatch,onClick:function(t){return i({h:e.h,s:.5,l:n,source:"hsl"},t)}})},wa=function(t){var e=t.onClick,n=t.hsl,r=l()({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),i=.1;return a.a.createElement("div",{style:r.swatches},a.a.createElement("div",{style:r.swatch},a.a.createElement(xa,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<i&&Math.abs(n.s-.5)<i,onClick:e,first:!0})),a.a.createElement("div",{style:r.swatch},a.a.createElement(xa,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<i&&Math.abs(n.s-.5)<i,onClick:e})),a.a.createElement("div",{style:r.swatch},a.a.createElement(xa,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<i&&Math.abs(n.s-.5)<i,onClick:e})),a.a.createElement("div",{style:r.swatch},a.a.createElement(xa,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<i&&Math.abs(n.s-.5)<i,onClick:e})),a.a.createElement("div",{style:r.swatch},a.a.createElement(xa,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<i&&Math.abs(n.s-.5)<i,onClick:e,last:!0})),a.a.createElement("div",{style:r.clear}))},_a=function(){var t=l()({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return a.a.createElement("div",{style:t.picker})},ka=function(t){var e=t.hsl,n=t.onChange,r=t.pointer,i=t.styles,o=void 0===i?{}:i,s=t.className,h=void 0===s?"":s,c=l()(rn({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return a.a.createElement("div",{style:c.wrap||{},className:"slider-picker "+h},a.a.createElement("div",{style:c.hue},a.a.createElement(T,{style:c.Hue,hsl:e,pointer:r,onChange:n})),a.a.createElement("div",{style:c.swatches},a.a.createElement(wa,{hsl:e,onClick:n})))};ka.propTypes={styles:M.a.object},ka.defaultProps={pointer:_a,styles:{}};In(ka);var Sa=n(465),Ca=n.n(Sa),Oa=function(t){var e=t.color,n=t.onClick,r=void 0===n?function(){}:n,i=t.onSwatchHover,o=t.first,s=t.last,h=t.active,c=l()({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:e,marginBottom:"1px"},check:{color:Gn(e),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:s,active:h,"color-#FFFFFF":"#FFFFFF"===e,transparent:"transparent"===e});return a.a.createElement(Vn,{color:e,style:c.color,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+e}},a.a.createElement("div",{style:c.check},a.a.createElement(Ca.a,null)))},ja=function(t){var e=t.onClick,n=t.onSwatchHover,r=t.group,i=t.active,o=l()({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return a.a.createElement("div",{style:o.group},mi(r,(function(t,o){return a.a.createElement(Oa,{key:t,color:t,active:t.toLowerCase()===i,first:0===o,last:o===r.length-1,onClick:e,onSwatchHover:n})})))},Ea=function(t){var e=t.width,n=t.height,r=t.onChange,i=t.onSwatchHover,o=t.colors,s=t.hex,h=t.styles,c=void 0===h?{}:h,u=t.className,d=void 0===u?"":u,f=l()(rn({default:{picker:{width:e,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},c)),p=function(t,e){return r({hex:t,source:"hex"},e)};return a.a.createElement("div",{style:f.picker,className:"swatches-picker "+d},a.a.createElement(on,null,a.a.createElement("div",{style:f.overflow},a.a.createElement("div",{style:f.body},mi(o,(function(t){return a.a.createElement(ja,{key:t.toString(),group:t,active:s,onClick:p,onSwatchHover:i})})),a.a.createElement("div",{style:f.clear})))))};Ea.propTypes={width:M.a.oneOfType([M.a.string,M.a.number]),height:M.a.oneOfType([M.a.string,M.a.number]),colors:M.a.arrayOf(M.a.arrayOf(M.a.string)),styles:M.a.object},Ea.defaultProps={width:320,height:240,colors:[[_i[900],_i[700],_i[500],_i[300],_i[100]],[ki[900],ki[700],ki[500],ki[300],ki[100]],[Si[900],Si[700],Si[500],Si[300],Si[100]],[Ci[900],Ci[700],Ci[500],Ci[300],Ci[100]],[Oi[900],Oi[700],Oi[500],Oi[300],Oi[100]],[ji[900],ji[700],ji[500],ji[300],ji[100]],[Ei[900],Ei[700],Ei[500],Ei[300],Ei[100]],[Pi[900],Pi[700],Pi[500],Pi[300],Pi[100]],[Ai[900],Ai[700],Ai[500],Ai[300],Ai[100]],["#194D33",Ti[700],Ti[500],Ti[300],Ti[100]],[Ri[900],Ri[700],Ri[500],Ri[300],Ri[100]],[Mi[900],Mi[700],Mi[500],Mi[300],Mi[100]],[Di[900],Di[700],Di[500],Di[300],Di[100]],[Li[900],Li[700],Li[500],Li[300],Li[100]],[Fi[900],Fi[700],Fi[500],Fi[300],Fi[100]],[Gi[900],Gi[700],Gi[500],Gi[300],Gi[100]],[Bi[900],Bi[700],Bi[500],Bi[300],Bi[100]],[zi[900],zi[700],zi[500],zi[300],zi[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};In(Ea);var Pa=function(t){var e=t.onChange,n=t.onSwatchHover,r=t.hex,i=t.colors,o=t.width,s=t.triangle,h=t.styles,c=void 0===h?{}:h,u=t.className,d=void 0===u?"":u,f=l()(rn({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},c),{"hide-triangle":"hide"===s,"top-left-triangle":"top-left"===s,"top-right-triangle":"top-right"===s}),p=function(t,n){Fn(t)&&e({hex:t,source:"hex"},n)};return a.a.createElement("div",{style:f.card,className:"twitter-picker "+d},a.a.createElement("div",{style:f.triangleShadow}),a.a.createElement("div",{style:f.triangle}),a.a.createElement("div",{style:f.body},mi(i,(function(t,e){return a.a.createElement(Vn,{key:e,color:t,hex:t,style:f.swatch,onClick:p,onHover:n,focusStyle:{boxShadow:"0 0 4px "+t}})})),a.a.createElement("div",{style:f.hash},"#"),a.a.createElement(C,{label:null,style:{input:f.input},value:r.replace("#",""),onChange:p}),a.a.createElement("div",{style:f.clear})))};Pa.propTypes={width:M.a.oneOfType([M.a.string,M.a.number]),triangle:M.a.oneOf(["hide","top-left","top-right"]),colors:M.a.arrayOf(M.a.string),styles:M.a.object},Pa.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};In(Pa);var Aa=function(t){var e=l()({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(100*t.hsl.s)+"%, "+Math.round(100*t.hsl.l)+"%)"}}});return a.a.createElement("div",{style:e.picker})};Aa.propTypes={hsl:M.a.shape({h:M.a.number,s:M.a.number,l:M.a.number,a:M.a.number})},Aa.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Ta=Aa,Ra=function(t){var e=l()({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return a.a.createElement("div",{style:e.picker})};Ra.propTypes={hsl:M.a.shape({h:M.a.number,s:M.a.number,l:M.a.number,a:M.a.number})},Ra.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Ma=Ra,Da=function(t){var e=t.onChange,n=t.rgb,r=t.hsl,i=t.hex,o=t.hsv,s=function(t,n){if(t.hex)Fn(t.hex)&&e({hex:t.hex,source:"hex"},n);else if(t.rgb){var r=t.rgb.split(",");Bn(t.rgb,"rgb")&&e({r:r[0],g:r[1],b:r[2],a:1,source:"rgb"},n)}else if(t.hsv){var i=t.hsv.split(",");Bn(t.hsv,"hsv")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("\xb0",""),1==i[1]?i[1]=.01:1==i[2]&&(i[2]=.01),e({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsv"},n))}else if(t.hsl){var a=t.hsl.split(",");Bn(t.hsl,"hsl")&&(a[2]=a[2].replace("%",""),a[1]=a[1].replace("%",""),a[0]=a[0].replace("\xb0",""),1==d[1]?d[1]=.01:1==d[2]&&(d[2]=.01),e({h:Number(a[0]),s:Number(a[1]),v:Number(a[2]),source:"hsl"},n))}},h=l()({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),c=n.r+", "+n.g+", "+n.b,u=Math.round(r.h)+"\xb0, "+Math.round(100*r.s)+"%, "+Math.round(100*r.l)+"%",d=Math.round(o.h)+"\xb0, "+Math.round(100*o.s)+"%, "+Math.round(100*o.v)+"%";return a.a.createElement("div",{style:h.wrap,className:"flexbox-fix"},a.a.createElement("div",{style:h.fields},a.a.createElement("div",{style:h.double},a.a.createElement(C,{style:{input:h.input,label:h.label},label:"hex",value:i,onChange:s})),a.a.createElement("div",{style:h.column},a.a.createElement("div",{style:h.single},a.a.createElement(C,{style:{input:h.input2,label:h.label2},label:"rgb",value:c,onChange:s})),a.a.createElement("div",{style:h.single},a.a.createElement(C,{style:{input:h.input2,label:h.label2},label:"hsv",value:d,onChange:s})),a.a.createElement("div",{style:h.single},a.a.createElement(C,{style:{input:h.input2,label:h.label2},label:"hsl",value:u,onChange:s})))))},La=function(t){var e=t.width,n=t.onChange,r=t.rgb,i=t.hsl,o=t.hsv,s=t.hex,h=t.header,c=t.styles,u=void 0===c?{}:c,d=t.className,f=void 0===d?"":d,p=l()(rn({default:{picker:{width:e,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},u));return a.a.createElement("div",{style:p.picker,className:"google-picker "+f},a.a.createElement("div",{style:p.head},h),a.a.createElement("div",{style:p.swatch}),a.a.createElement("div",{style:p.saturation},a.a.createElement(kn,{hsl:i,hsv:o,pointer:Ta,onChange:n})),a.a.createElement("div",{style:p.body},a.a.createElement("div",{style:p.controls,className:"flexbox-fix"},a.a.createElement("div",{style:p.hue},a.a.createElement(T,{style:p.Hue,hsl:i,radius:"4px",pointer:Ma,onChange:n}))),a.a.createElement(Da,{rgb:r,hsl:i,hex:s,hsv:o,onChange:n})))};La.propTypes={width:M.a.oneOfType([M.a.string,M.a.number]),styles:M.a.object,header:M.a.string},La.defaultProps={width:652,styles:{},header:"Color picker"};In(La);var Fa=n(270),Ga=n(2);function Ba(t){var e=t.title,n=t.defaultColor,a=t.onChange,h=Object(i.useState)(n),l=Object(r.a)(h,2),c=l[0],u=l[1];return Object(Ga.jsx)(Fa.a,{buttonRenderer:function(t){var n=t.id,r=t.isOpen;return Object(Ga.jsx)(o.a,{"aria-describedby":n,size:"medium",avatar:Object(Ga.jsx)(s.a,{sx:{bgcolor:c,borderColor:"primary.main"},children:"\xa0"}),label:Object(Ga.jsx)("strong",{children:e}),variant:"outlined",color:"info",sx:{cursor:"pointer",borderColor:r?"primary.main":"info",color:r?"primary.main":"info"}})},children:Object(Ga.jsx)(ma,{color:c,presetColors:[],onSwatchHover:function(t){u(t.hex),a(t.hex)},onChange:function(t){u(t.hex),a(t.hex)}})})}},,,,,,,,,,,function(t,e,n){"use strict";var r=n(14),i=n(3),a=n(1),o=n(0),s=(n(7),n(5)),h=n(223),l=n(8),c=n(9),u=n(62),d=n(2),f=Object(u.a)(Object(d.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),p=n(166),g=n(224);function v(t){return Object(p.a)("MuiAvatar",t)}Object(g.a)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var b=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],y=Object(l.a)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e[n.variant],n.colorDefault&&e.colorDefault]}})((function(t){var e=t.theme,n=t.ownerState;return Object(a.a)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===n.variant&&{borderRadius:e.shape.borderRadius},"square"===n.variant&&{borderRadius:0},n.colorDefault&&{color:e.palette.background.default,backgroundColor:"light"===e.palette.mode?e.palette.grey[400]:e.palette.grey[600]})})),m=Object(l.a)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:function(t,e){return e.img}})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),x=Object(l.a)(f,{name:"MuiAvatar",slot:"Fallback",overridesResolver:function(t,e){return e.fallback}})({width:"75%",height:"75%"});var w=o.forwardRef((function(t,e){var n=Object(c.a)({props:t,name:"MuiAvatar"}),l=n.alt,u=n.children,f=n.className,p=n.component,g=void 0===p?"div":p,w=n.imgProps,_=n.sizes,k=n.src,S=n.srcSet,C=n.variant,O=void 0===C?"circular":C,j=Object(i.a)(n,b),E=null,P=function(t){var e=t.crossOrigin,n=t.referrerPolicy,i=t.src,a=t.srcSet,s=o.useState(!1),h=Object(r.a)(s,2),l=h[0],c=h[1];return o.useEffect((function(){if(i||a){c(!1);var t=!0,r=new Image;return r.onload=function(){t&&c("loaded")},r.onerror=function(){t&&c("error")},r.crossOrigin=e,r.referrerPolicy=n,r.src=i,a&&(r.srcset=a),function(){t=!1}}}),[e,n,i,a]),l}(Object(a.a)({},w,{src:k,srcSet:S})),A=k||S,T=A&&"error"!==P,R=Object(a.a)({},n,{colorDefault:!T,component:g,variant:O}),M=function(t){var e=t.classes,n={root:["root",t.variant,t.colorDefault&&"colorDefault"],img:["img"],fallback:["fallback"]};return Object(h.a)(n,v,e)}(R);return E=T?Object(d.jsx)(m,Object(a.a)({alt:l,src:k,srcSet:S,sizes:_,ownerState:R,className:M.img},w)):null!=u?u:A&&l?l[0]:Object(d.jsx)(x,{className:M.fallback}),Object(d.jsx)(y,Object(a.a)({as:g,ownerState:R,className:Object(s.a)(M.root,f),ref:e},j,{children:E}))}));e.a=w}])]);
//# sourceMappingURL=9.6d935508.chunk.js.map